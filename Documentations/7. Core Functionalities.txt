7. Core Functionalities
7.1 User Profile Management
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PROFILE MANAGEMENT FUNCTIONALITY                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

File: pages/Profile.js

Component Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Profile Page                                                â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Header                                              â”‚   â”‚
â”‚ â”‚ - Title: "User Profile"                            â”‚   â”‚
â”‚ â”‚ - Status Badge (if profile complete)               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 1. Data Protection & Consent Section                â”‚   â”‚
â”‚ â”‚    - Privacy notice                                 â”‚   â”‚
â”‚ â”‚    - Consent checkbox âš ï¸ Required                   â”‚   â”‚
â”‚ â”‚    - Warning if not given                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 2. Basic Information Section                        â”‚   â”‚
â”‚ â”‚    Fields:                                          â”‚   â”‚
â”‚ â”‚    - Full Name (read-only, from Google)            â”‚   â”‚
â”‚ â”‚    - Email (read-only, from Google)                â”‚   â”‚
â”‚ â”‚    - Representation Type âš ï¸ Required                â”‚   â”‚
â”‚ â”‚      (dropdown: gov, ngo, private, academic, etc.)  â”‚   â”‚
â”‚ â”‚    - Country/Entity âš ï¸ Required                     â”‚   â”‚
â”‚ â”‚    - Job Title âš ï¸ Required                          â”‚   â”‚
â”‚ â”‚    - Organization âš ï¸ Required                       â”‚   â”‚
â”‚ â”‚    - Industry Sector âš ï¸ Required                    â”‚   â”‚
â”‚ â”‚    - LinkedIn Profile (optional)                    â”‚   â”‚
â”‚ â”‚    - Biography âš ï¸ Required (textarea, 500 chars)    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 3. Topical Interests Section                        â”‚   â”‚
â”‚ â”‚    - Description text                               â”‚   â”‚
â”‚ â”‚    - Quick-add buttons (12 sample topics)           â”‚   â”‚
â”‚ â”‚    - Added interests list with:                     â”‚   â”‚
â”‚ â”‚      * Topic name                                   â”‚   â”‚
â”‚ â”‚      * Priority dropdown (High/Medium/Low)          â”‚   â”‚
â”‚ â”‚      * Delete button                                â”‚   â”‚
â”‚ â”‚    âš ï¸ At least 1 required                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 4. Geographical Interests Section                   â”‚   â”‚
â”‚ â”‚    - Description text                               â”‚   â”‚
â”‚ â”‚    - Quick-add buttons (10 sample regions)          â”‚   â”‚
â”‚ â”‚    - Added interests list with:                     â”‚   â”‚
â”‚ â”‚      * Region name                                  â”‚   â”‚
â”‚ â”‚      * Priority dropdown (High/Medium/Low)          â”‚   â”‚
â”‚ â”‚      * Delete button                                â”‚   â”‚
â”‚ â”‚    âš ï¸ At least 1 required                           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 5. Notification Preferences Section                 â”‚   â”‚
â”‚ â”‚    Toggles for:                                     â”‚   â”‚
â”‚ â”‚    - New Meeting Request (default: ON)             â”‚   â”‚
â”‚ â”‚    - Request Status Update (default: ON)           â”‚   â”‚
â”‚ â”‚    - New Chat Message (default: ON)                â”‚   â”‚
â”‚ â”‚    - Booking Confirmed (default: ON)               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ 6. Privacy Preferences Section                      â”‚   â”‚
â”‚ â”‚    - Hide Profile Toggle                            â”‚   â”‚
â”‚ â”‚      * Description of effect                        â”‚   â”‚
â”‚ â”‚      * Warning message when enabled                 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Save Button (bottom right)                          â”‚   â”‚
â”‚ â”‚ - Disabled if consent not given                     â”‚   â”‚
â”‚ â”‚ - Shows loading state when saving                   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Profile Completion Logic:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A profile is considered "complete" when:                    â”‚
â”‚                                                             â”‚
â”‚ 1. consent_given = true                                    â”‚
â”‚ 2. representation_type is set                              â”‚
â”‚ 3. country is set                                          â”‚
â”‚ 4. job_title is set                                        â”‚
â”‚ 5. organization is set                                     â”‚
â”‚ 6. industry_sector is set                                  â”‚
â”‚ 7. biography is set (not empty)                            â”‚
â”‚ 8. topical_interests has at least 1 item                   â”‚
â”‚ 9. geographical_interests has at least 1 item              â”‚
â”‚                                                             â”‚
â”‚ profile_completed is auto-calculated on save               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sample Topics (Quick Add):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ["Climate Policy", "Trade Relations", "Digital Governance",â”‚
â”‚  "Human Rights", "Economic Development", "Security",       â”‚
â”‚  "Health Policy", "Education", "Energy Transition",        â”‚
â”‚  "Migration", "Technology Transfer", "Cultural Exchange"]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sample Regions (Quick Add):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ["North America", "South America", "Europe", "Africa",     â”‚
â”‚  "Asia-Pacific", "Middle East", "Central Asia",            â”‚
â”‚  "Caribbean", "Nordic Countries", "ASEAN"]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

State Management:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const [currentUser, setCurrentUser] = useState(null);      â”‚
â”‚ const [formData, setFormData] = useState({});              â”‚
â”‚ const [consentGiven, setConsentGiven] = useState(false);   â”‚
â”‚ const [saving, setSaving] = useState(false);               â”‚
â”‚ const [loading, setLoading] = useState(true);              â”‚
â”‚                                                             â”‚
â”‚ // Form update handlers                                    â”‚
â”‚ const handleInputChange = (field, value) => {              â”‚
â”‚   setFormData(prev => ({ ...prev, [field]: value }));     â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ // Interest management                                     â”‚
â”‚ const addInterest = (type, item) => {                      â”‚
â”‚   const interests = formData[type] || [];                  â”‚
â”‚   if (!interests.find(i => i.topic === item)) {           â”‚
â”‚     const newInterest = type === 'topical_interests'       â”‚
â”‚       ? { topic: item, priority: 'medium' }               â”‚
â”‚       : { region: item, priority: 'medium' };             â”‚
â”‚     setFormData(prev => ({                                 â”‚
â”‚       ...prev,                                             â”‚
â”‚       [type]: [...interests, newInterest]                  â”‚
â”‚     }));                                                    â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ const removeInterest = (type, index) => {                  â”‚
â”‚   const interests = formData[type] || [];                  â”‚
â”‚   setFormData(prev => ({                                   â”‚
â”‚     ...prev,                                               â”‚
â”‚     [type]: interests.filter((_, i) => i !== index)        â”‚
â”‚   }));                                                      â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ const updateInterestPriority = (type, index, priority) => {â”‚
â”‚   const interests = [...(formData[type] || [])];          â”‚
â”‚   interests[index].priority = priority;                    â”‚
â”‚   setFormData(prev => ({ ...prev, [type]: interests }));  â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ // Notification preference handler                         â”‚
â”‚ const handleNotificationChange = (key, value) => {         â”‚
â”‚   setFormData(prev => ({                                   â”‚
â”‚     ...prev,                                               â”‚
â”‚     notification_preferences: {                            â”‚
â”‚       ...prev.notification_preferences,                    â”‚
â”‚       [key]: value                                         â”‚
â”‚     }                                                       â”‚
â”‚   }));                                                      â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Save Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleSave = async () => {                           â”‚
â”‚   setSaving(true);                                         â”‚
â”‚   try {                                                     â”‚
â”‚     // Calculate if profile is complete                    â”‚
â”‚     const profileComplete = !!(                            â”‚
â”‚       formData.representation_type &&                      â”‚
â”‚       formData.country &&                                  â”‚
â”‚       formData.job_title &&                                â”‚
â”‚       formData.organization &&                             â”‚
â”‚       formData.industry_sector &&                          â”‚
â”‚       formData.biography &&                                â”‚
â”‚       formData.topical_interests?.length > 0 &&            â”‚
â”‚       formData.geographical_interests?.length > 0          â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     // Update user data                                    â”‚
â”‚     await User.updateMyUserData({                          â”‚
â”‚       ...formData,                                         â”‚
â”‚       consent_given: consentGiven,                         â”‚
â”‚       profile_completed: profileComplete                   â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Reload to reflect changes                           â”‚
â”‚     await loadUserData();                                  â”‚
â”‚                                                             â”‚
â”‚     // Show success message (future: toast notification)   â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error saving profile:", error);         â”‚
â”‚     // Show error message                                  â”‚
â”‚   }                                                         â”‚
â”‚   setSaving(false);                                        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Effects of Profile States:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ State: consent_given = false                               â”‚
â”‚   Effect: User cannot access:                              â”‚
â”‚     - Delegates directory                                  â”‚
â”‚     - Meeting request features                             â”‚
â”‚     - Chat                                                 â”‚
â”‚   Shows: Red warning banner on Dashboard                   â”‚
â”‚                                                             â”‚
â”‚ State: profile_completed = false                           â”‚
â”‚   Effect: User profile not visible in Delegates directory  â”‚
â”‚   Shows: Orange warning banner on Dashboard                â”‚
â”‚                                                             â”‚
â”‚ State: is_profile_hidden = true                            â”‚
â”‚   Effect: User profile not visible in Delegates directory  â”‚
â”‚   Shows: Blue info banner on Dashboard                     â”‚
â”‚   Note: User can still send/receive meeting requests       â”‚
â”‚                                                             â”‚
â”‚ State: Both consent + profile complete + not hidden        â”‚
â”‚   Effect: Full access to all features                      â”‚
â”‚   Shows: Green "Profile Complete" badge                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.2 Delegate Directory & Discovery
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            DELEGATE DIRECTORY FUNCTIONALITY                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

File: pages/Delegates.js

Page Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Delegates Directory Page                                    â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Header                                              â”‚   â”‚
â”‚ â”‚ - Title: "User Directory"                          â”‚   â”‚
â”‚ â”‚ - Subtitle: "Connect with verified professionals"  â”‚   â”‚
â”‚ â”‚ - User count badge                                 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Search & Filter Bar                                 â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚ â”‚ â”‚ [ğŸ”] Search box         â”‚ [Filter] Dropdown  â”‚  â”‚   â”‚
â”‚ â”‚ â”‚ "Search by name, org..."â”‚ Representation Type â”‚  â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ User Cards Grid (3 columns on desktop)              â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚ â”‚ â”‚ User 1  â”‚ â”‚ User 2  â”‚ â”‚ User 3  â”‚               â”‚   â”‚
â”‚ â”‚ â”‚ Card    â”‚ â”‚ Card    â”‚ â”‚ Card    â”‚               â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚   â”‚
â”‚ â”‚ â”‚ User 4  â”‚ â”‚ User 5  â”‚ â”‚ User 6  â”‚               â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â”‚
â”‚ â”‚ ...                                                 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Card Design:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”                            [LinkedIn Icon]    â”‚  â”‚
â”‚ â”‚ â”‚ JS â”‚  John Smith                                    â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”˜  Director of Climate Policy                   â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ ğŸ¢ Department of State                                â”‚  â”‚
â”‚ â”‚ ğŸŒ United States                                      â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ [government] [Environmental Policy]                   â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Professional with 15 years experience in climate...  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Key Interests:                                        â”‚  â”‚
â”‚ â”‚ [Climate Finance] [Carbon Markets] [+2 more]         â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚ â”‚ â”‚        [âœ‰ï¸ Request Meeting]                      â”‚ â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Filtering Logic:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Load all users                                     â”‚
â”‚   const allUsers = await User.list();                      â”‚
â”‚                                                             â”‚
â”‚ Step 2: Filter for visibility                              â”‚
â”‚   const availableUsers = allUsers.filter(u =>              â”‚
â”‚     u.id !== currentUser.id &&              // Not self    â”‚
â”‚     u.profile_completed &&                  // Complete    â”‚
â”‚     u.consent_given &&                      // Consented   â”‚
â”‚     !u.is_profile_hidden                    // Not hidden  â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚ Step 3: Apply search term                                  â”‚
â”‚   if (searchTerm) {                                        â”‚
â”‚     filtered = filtered.filter(user =>                     â”‚
â”‚       user.full_name?.toLowerCase().includes(searchTerm) ||â”‚
â”‚       user.organization?.toLowerCase().includes(search) || â”‚
â”‚       user.country?.toLowerCase().includes(searchTerm) ||  â”‚
â”‚       user.job_title?.toLowerCase().includes(searchTerm)   â”‚
â”‚     );                                                      â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚ Step 4: Apply type filter                                  â”‚
â”‚   if (typeFilter !== 'all') {                              â”‚
â”‚     filtered = filtered.filter(user =>                     â”‚
â”‚       user.representation_type === typeFilter              â”‚
â”‚     );                                                      â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚ Step 5: Sort (optional - alphabetical by name)             â”‚
â”‚   filtered.sort((a, b) =>                                  â”‚
â”‚     a.full_name.localeCompare(b.full_name)                 â”‚
â”‚   );                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Meeting Request Dialog:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  Request Meeting with John Smith                     â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Proposed Topic *                                     â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ e.g., Climate Policy Coordination              â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Duration (minutes)                                   â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [v] 45 minutes                                 â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     30 minutes                                 â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     60 minutes                                 â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     90 minutes                                 â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Personal Message                                     â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ Introduce yourself and explain why you'd      â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ like to meet...                                â”‚  â”‚  â”‚
â”‚ â”‚  â”‚                                                â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  [Cancel]                        [Send Request]       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Send Meeting Request Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Request Meeting" on a card                 â”‚
â”‚    â†“                                                        â”‚
â”‚ 2. Dialog opens with pre-filled recipient                  â”‚
â”‚    - selectedUser is set                                   â”‚
â”‚    â†“                                                        â”‚
â”‚ 3. User fills form:                                        â”‚
â”‚    - proposed_topic (required)                             â”‚
â”‚    - proposed_duration (default: 45)                       â”‚
â”‚    - personal_message (optional)                           â”‚
â”‚    â†“                                                        â”‚
â”‚ 4. User clicks "Send Request"                              â”‚
â”‚    â†“                                                        â”‚
â”‚ 5. Frontend validation:                                    â”‚
â”‚    - Topic not empty                                       â”‚
â”‚    - Duration selected                                     â”‚
â”‚    â†“                                                        â”‚
â”‚ 6. Generate unique meeting code:                           â”‚
â”‚    const meetingCode =                                     â”‚
â”‚      Math.random().toString(36)                            â”‚
â”‚        .substring(2, 10).toUpperCase();                    â”‚
â”‚    // Example: "X7K9M2N4"                                  â”‚
â”‚    â†“                                                        â”‚
â”‚ 7. Create meeting request:                                 â”‚
â”‚    const newRequest = await MeetingRequest.create({       â”‚
â”‚      requester_id: currentUser.id,                         â”‚
â”‚      recipient_ids: [selectedUser.id],                     â”‚
â”‚      meeting_type: 'single',                               â”‚
â”‚      personal_message: formData.personal_message,          â”‚
â”‚      proposed_topic: formData.proposed_topic,              â”‚
â”‚      proposed_duration: formData.proposed_duration,        â”‚
â”‚      meeting_code: meetingCode,                            â”‚
â”‚      status: 'pending'                                     â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 8. Create notification for recipient:                      â”‚
â”‚    const recipient = await User.get(selectedUser.id);      â”‚
â”‚    if (recipient.notification_preferences                  â”‚
â”‚         ?.new_meeting_request !== false) {                 â”‚
â”‚      await Notification.create({                           â”‚
â”‚        user_id: selectedUser.id,                           â”‚
â”‚        type: 'new_meeting_request',                        â”‚
â”‚        title: 'New Meeting Request',                       â”‚
â”‚        body: `You have received a new meeting request     â”‚
â”‚               from ${currentUser.full_name}.               â”‚
â”‚               Meeting Code: ${meetingCode}`,               â”‚
â”‚        link: '/meetings',                                  â”‚
â”‚        related_entity_id: newRequest.id                    â”‚
â”‚      });                                                    â”‚
â”‚    }                                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 9. Close dialog and show success message                   â”‚
â”‚    â†“                                                        â”‚
â”‚ 10. Reset form state                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Access Control:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Can Access Delegates Directory:                            â”‚
â”‚   âœ… User with consent_given = true                        â”‚
â”‚   âœ… User with profile_completed = true                    â”‚
â”‚   âœ… Admin users (always)                                  â”‚
â”‚                                                             â”‚
â”‚ Cannot Access:                                              â”‚
â”‚   âŒ User without consent                                  â”‚
â”‚   âŒ User with incomplete profile                          â”‚
â”‚                                                             â”‚
â”‚ If user tries to access without permission:                â”‚
â”‚   - Show orange alert banner                               â”‚
â”‚   - Message: "Please complete your consent process         â”‚
â”‚              and profile to browse users"                  â”‚
â”‚   - Link to Profile page                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Empty States:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ No Users Found (after filtering):                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              [ğŸ‘¥ Icon]                           â”‚    â”‚
â”‚   â”‚                                                   â”‚    â”‚
â”‚   â”‚         No users found                           â”‚    â”‚
â”‚   â”‚                                                   â”‚    â”‚
â”‚   â”‚  Try adjusting your search filters or           â”‚    â”‚
â”‚   â”‚  check back later                                â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚ Access Restricted:                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚              [ğŸ”’ Icon]                           â”‚    â”‚
â”‚   â”‚                                                   â”‚    â”‚
â”‚   â”‚      Access Restricted                           â”‚    â”‚
â”‚   â”‚                                                   â”‚    â”‚
â”‚   â”‚  Please complete your consent process and        â”‚    â”‚
â”‚   â”‚  profile to browse users.                        â”‚    â”‚
â”‚   â”‚                                                   â”‚    â”‚
â”‚   â”‚  [Complete Profile â†’]                            â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.3 Meeting Management System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             MEETING MANAGEMENT FUNCTIONALITY                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

File: pages/Meetings.js

Page Structure with Tabs:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Meetings Page                                               â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Header                                              â”‚   â”‚
â”‚ â”‚ - Title: "Meeting Management"                      â”‚   â”‚
â”‚ â”‚ - Pending badge (if any pending)                   â”‚   â”‚
â”‚ â”‚ - [+ Request Meeting] button                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Tabs Navigation                                     â”‚   â”‚
â”‚ â”‚ [Pending Approval (3)] [Request History] [Accepted] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ Tab Content Area (changes based on selected tab)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAB 1: Pending Approval
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Purpose: Show meeting requests awaiting user's response    â”‚
â”‚ Filter: recipient_ids includes currentUser.id AND          â”‚
â”‚         status = 'pending'                                 â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ âš ï¸ Action Required Banner                            â”‚  â”‚
â”‚ â”‚ "You have 3 meeting requests awaiting your response" â”‚  â”‚
â”‚ â”‚ "Please review and approve or decline each request"  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Meeting Request Card (Detailed):                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”                                                â”‚  â”‚
â”‚ â”‚ â”‚ JS â”‚  Meeting Request from John Smith              â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”˜  Director at Department of State              â”‚  â”‚
â”‚ â”‚         United States                                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Received: January 15, 2025 at 10:30 AM              â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ ğŸ“… Proposed Topic                              â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ Bilateral Trade Agreement Discussion           â”‚  â”‚  â”‚
â”‚ â”‚  â”‚                                                 â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ â±ï¸ Duration: 45 minutes                         â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ ğŸ’¬ Personal Message                            â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ "I'd like to discuss potential cooperation on  â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ renewable energy trade..."                     â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  [Decline Request]        [Accept Meeting âœ“]         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Empty State (if no pending):                               â”‚
â”‚   [âœ“ Icon] All caught up!                                 â”‚
â”‚   You don't have any pending meeting requests             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Accept Meeting Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Accept Meeting" button                     â”‚
â”‚    â†“                                                        â”‚
â”‚ 2. Update meeting request status:                          â”‚
â”‚    await MeetingRequest.update(requestId, {                â”‚
â”‚      status: 'accepted'                                    â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 3. Create notification for requester:                      â”‚
â”‚    const request = await MeetingRequest.get(requestId);    â”‚
â”‚    const requester = await User.get(request.requester_id); â”‚
â”‚    if (requester.notification_preferences                  â”‚
â”‚         ?.request_status_update !== false) {               â”‚
â”‚      await Notification.create({                           â”‚
â”‚        user_id: request.requester_id,                      â”‚
â”‚        type: 'request_accepted',                           â”‚
â”‚        title: 'Meeting Request Accepted',                  â”‚
â”‚        body: `${currentUser.full_name} accepted your      â”‚
â”‚               meeting request regarding                    â”‚
â”‚               "${request.proposed_topic}".`,               â”‚
â”‚        link: '/meetings',                                  â”‚
â”‚        related_entity_id: requestId                        â”‚
â”‚      });                                                    â”‚
â”‚    }                                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 4. Reload page data to reflect changes                     â”‚
â”‚    â†“                                                        â”‚
â”‚ 5. Request moves from "Pending" to "Accepted" tab          â”‚
â”‚    â†“                                                        â”‚
â”‚ 6. Show success message (future: toast)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Decline Meeting Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Decline Request" button                    â”‚
â”‚    â†“                                                        â”‚
â”‚ 2. Update meeting request status:                          â”‚
â”‚    await MeetingRequest.update(requestId, {                â”‚
â”‚      status: 'declined'                                    â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 3. Create notification for requester:                      â”‚
â”‚    await Notification.create({                             â”‚
â”‚      user_id: request.requester_id,                        â”‚
â”‚      type: 'request_declined',                             â”‚
â”‚      title: 'Meeting Request Declined',                    â”‚
â”‚      body: `${currentUser.full_name} declined your        â”‚
â”‚             meeting request.`,                             â”‚
â”‚      link: '/meetings'                                     â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 4. Reload page data                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 5. Request moves to "Request History" tab                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAB 2: Request History
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Purpose: Show all non-accepted requests (sent/received)    â”‚
â”‚ Filter: (requester_id = currentUser.id OR                  â”‚
â”‚          recipient_ids includes currentUser.id) AND        â”‚
â”‚         status NOT IN ('accepted', 'pending-incoming')     â”‚
â”‚                                                             â”‚
â”‚ Includes:                                                   â”‚
â”‚   - Sent requests (any status except accepted)             â”‚
â”‚   - Declined requests (received)                           â”‚
â”‚   - Cancelled requests                                     â”‚
â”‚                                                             â”‚
â”‚ Card Design (Compact):                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”                                                â”‚  â”‚
â”‚ â”‚ â”‚ MS â”‚  To: Maria Silva                   [declined] â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”˜  Climate Policy Analyst                       â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  ğŸ“… Bilateral Trade Agreement Discussion             â”‚  â”‚
â”‚ â”‚  â±ï¸ 45 minutes â€¢ Sent Jan 15, 2025                   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Status Badge Colors:                                       â”‚
â”‚   - pending: Orange                                        â”‚
â”‚   - declined: Red                                          â”‚
â”‚   - cancelled: Gray                                        â”‚
â”‚                                                             â”‚
â”‚ Empty State:                                               â”‚
â”‚   [ğŸ“… Icon] No request history                            â”‚
â”‚   Sent, declined, and cancelled requests will appear here â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAB 3: Accepted Meetings
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Purpose: Show confirmed meetings with action buttons        â”‚
â”‚ Filter: (requester_id = currentUser.id OR                  â”‚
â”‚          recipient_ids includes currentUser.id) AND        â”‚
â”‚         status = 'accepted'                                â”‚
â”‚                                                             â”‚
â”‚ Card Design (With Actions):                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”                                                â”‚  â”‚
â”‚ â”‚ â”‚ MS â”‚  Meeting with Maria Silva                     â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”˜  Climate Policy Analyst at UN                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  ğŸ“… Bilateral Trade Agreement Discussion             â”‚  â”‚
â”‚ â”‚      Code: X7K9M2N4                                   â”‚  â”‚
â”‚ â”‚  â±ï¸ 45 minutes â€¢ Confirmed Jan 15, 2025              â”‚  â”‚
â”‚ â”‚  ğŸ“ Booked: Conference Room A at 10:00 AM            â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  [Modify] [ğŸ’¬ Chat] [ğŸ“ Book Venue] [Cancel]         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Action Buttons:                                            â”‚
â”‚   1. Modify - Opens dialog to change details              â”‚
â”‚   2. Chat - Opens 1-on-1 chat (single meetings only)      â”‚
â”‚   3. Book Venue - Opens booking dialog                    â”‚
â”‚   4. Cancel - Opens cancellation confirmation             â”‚
â”‚                                                             â”‚
â”‚ Empty State:                                               â”‚
â”‚   [âœ“ Icon] No accepted meetings                           â”‚
â”‚   Accepted meeting requests will appear here              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Modify Meeting Dialog:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  Modify Meeting Details                              â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Meeting Code: X7K9M2N4                              â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  âš ï¸ Note: Changing duration will clear venue booking â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Proposed Topic *                                     â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ Bilateral Trade Agreement Discussion          â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Duration (minutes)                                   â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [v] 45 minutes                                 â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Personal Message (Optional)                          â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ Additional notes...                            â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  [Cancel]                        [Save Changes]       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Modify Meeting Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Modify" button                             â”‚
â”‚    â†“                                                        â”‚
â”‚ 2. Dialog opens with current values                        â”‚
â”‚    - proposed_topic                                        â”‚
â”‚    - proposed_duration                                     â”‚
â”‚    - personal_message                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 3. User makes changes                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 4. User clicks "Save Changes"                              â”‚
â”‚    â†“                                                        â”‚
â”‚ 5. Check if duration changed:                              â”‚
â”‚    const durationChanged =                                 â”‚
â”‚      originalDuration !== newDuration;                     â”‚
â”‚    â†“                                                        â”‚
â”‚ 6. If duration changed, find and cancel venue booking:     â”‚
â”‚    if (durationChanged) {                                  â”‚
â”‚      const booking = bookings.find(b =>                    â”‚
â”‚        b.meeting_request_id === meetingId &&               â”‚
â”‚        b.status === 'active'                               â”‚
â”‚      );                                                     â”‚
â”‚      if (booking) {                                        â”‚
â”‚        await VenueBooking.update(booking.id, {             â”‚
â”‚          status: 'cancelled'                               â”‚
â”‚        });                                                  â”‚
â”‚      }                                                      â”‚
â”‚    }                                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 7. Update meeting request:                                 â”‚
â”‚    await MeetingRequest.update(meetingId, {                â”‚
â”‚      proposed_topic: newTopic,                             â”‚
â”‚      proposed_duration: newDuration,                       â”‚
â”‚      personal_message: newMessage,                         â”‚
â”‚      ...(durationChanged && { venue_booking_id: null })    â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 8. Notify other participants:                              â”‚
â”‚    const participants = [                                  â”‚
â”‚      meeting.requester_id,                                 â”‚
â”‚      ...meeting.recipient_ids                              â”‚
â”‚    ].filter(id => id !== currentUser.id);                  â”‚
â”‚                                                             â”‚
â”‚    for (const participantId of participants) {             â”‚
â”‚      await Notification.create({                           â”‚
â”‚        user_id: participantId,                             â”‚
â”‚        type: 'meeting_updated',                            â”‚
â”‚        title: 'Meeting Details Updated',                   â”‚
â”‚        body: `${currentUser.full_name} updated meeting    â”‚
â”‚               "${newTopic}".                               â”‚
â”‚               ${venueCleared ?                             â”‚
â”‚                 'Venue cleared, re-booking required.' : ''}â”‚
â”‚               `,                                            â”‚
â”‚        link: '/meetings'                                   â”‚
â”‚      });                                                    â”‚
â”‚    }                                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 9. Close dialog and reload data                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cancel Meeting Dialog:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  âš ï¸ Cancel Meeting                                    â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Are you sure you want to cancel this meeting?        â”‚  â”‚
â”‚ â”‚  This action cannot be undone.                        â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ Meeting: Bilateral Trade Agreement Discussion â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ With: Maria Silva                             â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ Code: X7K9M2N4                                â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  âš ï¸ This will also cancel venue booking for           â”‚  â”‚
â”‚ â”‚     Conference Room A                                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  â„¹ï¸ All participants will be notified                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  [Keep Meeting]              [Cancel Meeting]         â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cancel Meeting Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Cancel" button on meeting card             â”‚
â”‚    â†“                                                        â”‚
â”‚ 2. Confirmation dialog opens                               â”‚
â”‚    â†“                                                        â”‚
â”‚ 3. User confirms cancellation                              â”‚
â”‚    â†“                                                        â”‚
â”‚ 4. Update meeting status:                                  â”‚
â”‚    await MeetingRequest.update(meetingId, {                â”‚
â”‚      status: 'cancelled'                                   â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 5. Cancel associated venue booking (if exists):            â”‚
â”‚    const booking = bookings.find(b =>                      â”‚
â”‚      b.meeting_request_id === meetingId &&                 â”‚
â”‚      b.status === 'active'                                 â”‚
â”‚    );                                                       â”‚
â”‚    if (booking) {                                          â”‚
â”‚      await VenueBooking.update(booking.id, {               â”‚
â”‚        status: 'cancelled'                                 â”‚
â”‚      });                                                    â”‚
â”‚    }                                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 6. Notify other participants:                              â”‚
â”‚    for (const participantId of otherParticipants) {        â”‚
â”‚      await Notification.create({                           â”‚
â”‚        user_id: participantId,                             â”‚
â”‚        type: 'meeting_cancelled',                          â”‚
â”‚        title: 'Meeting Cancelled',                         â”‚
â”‚        body: `${currentUser.full_name} cancelled meeting  â”‚
â”‚               "${meeting.proposed_topic}"                  â”‚
â”‚               (Code: ${meeting.meeting_code})`,            â”‚
â”‚        link: '/meetings'                                   â”‚
â”‚      });                                                    â”‚
â”‚    }                                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 7. Close dialog and reload data                            â”‚
â”‚    â†“                                                        â”‚
â”‚ 8. Meeting moves to "Request History" tab                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Request New Meeting Button (Header):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Opens: RequestMeetingDialog component                      â”‚
â”‚                                                             â”‚
â”‚ Component: components/meetings/RequestMeetingDialog.jsx    â”‚
â”‚                                                             â”‚
â”‚ Features:                                                   â”‚
â”‚   - Meeting type selector (Single / Multi-delegate)        â”‚
â”‚   - User selector (search & select delegates)              â”‚
â”‚   - Topic input                                            â”‚
â”‚   - Duration picker                                        â”‚
â”‚   - Personal message textarea                              â”‚
â”‚                                                             â”‚
â”‚ See detailed dialog structure in next section              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.4 Venue Booking System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VENUE BOOKING FUNCTIONALITY                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Components Involved:
1. pages/Venues.js - Public venue schedule view
2. components/meetings/BookingDialog.jsx - User booking dialog
3. components/venues/ScheduleView.jsx - Time-slot grid
4. components/venues/PrivateBookingDialog.jsx - Admin bookings

VENUE SCHEDULE PAGE (pages/Venues.js):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Header                                                â”‚  â”‚
â”‚ â”‚ [ğŸ“… Venue Schedule]         [â—€ Jan 15] [â–¶] [Refresh] â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Time-Slot Grid (ScheduleView Component)              â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚        08:00  09:00  10:00  11:00  12:00  13:00      â”‚  â”‚
â”‚ â”‚ Rm A   [    ][â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ][    ][â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]...       â”‚  â”‚
â”‚ â”‚ Rm B   [    ][    ][â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]...         â”‚  â”‚
â”‚ â”‚ Rm C   [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ][    ][    ]...         â”‚  â”‚
â”‚ â”‚ ...                                                   â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Legend: [    ] = Available  [â–ˆâ–ˆâ–ˆâ–ˆ] = Booked           â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ScheduleView Component Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File: components/venues/ScheduleView.jsx                    â”‚
â”‚                                                             â”‚
â”‚ Props:                                                      â”‚
â”‚   - rooms: Array of VenueRoom objects                      â”‚
â”‚   - bookings: Array of VenueBooking objects                â”‚
â”‚   - selectedDate: String (YYYY-MM-DD)                      â”‚
â”‚   - users: Object mapping user IDs to User objects         â”‚
â”‚   - currentUser: Current user object                       â”‚
â”‚   - acceptedMeetings: User's accepted meetings             â”‚
â”‚   - onTimeSlotClick: Function (for bookable version)       â”‚
â”‚   - isRoomAvailable: Function (for bookable version)       â”‚
â”‚                                                             â”‚
â”‚ Time Slots Configuration:                                  â”‚
â”‚   START_HOUR = 8 (8:00 AM)                                 â”‚
â”‚   END_HOUR = 20 (8:00 PM)                                  â”‚
â”‚   SLOT_DURATION = 30 (minutes)                             â”‚
â”‚   Total slots per day = 24 slots (12 hours Ã— 2)           â”‚
â”‚                                                             â”‚
â”‚ Grid Layout:                                               â”‚
â”‚   - Vertical axis: Rooms                                   â”‚
â”‚   - Horizontal axis: Time slots                            â”‚
â”‚   - Each cell = 30-minute slot                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Time Slot Calculation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ // Generate time slots                                     â”‚
â”‚ const timeSlots = [];                                      â”‚
â”‚ for (let hour = START_HOUR; hour < END_HOUR; hour++) {     â”‚
â”‚   for (let minute of [0, 30]) {                            â”‚
â”‚     const time = `${hour.toString().padStart(2, '0')}:     â”‚
â”‚                  ${minute.toString().padStart(2, '0')}`;   â”‚
â”‚     timeSlots.push(time);                                  â”‚
â”‚   }                                                         â”‚
â”‚ }                                                           â”‚
â”‚ // Result: ['08:00', '08:30', '09:00', ..., '19:30']      â”‚
â”‚                                                             â”‚
â”‚ // Check if time slot is booked                            â”‚
â”‚ const isSlotBooked = (room, slotTime) => {                 â”‚
â”‚   const slotStart = new Date(                              â”‚
â”‚     `${selectedDate}T${slotTime}:00`                       â”‚
â”‚   );                                                        â”‚
â”‚   const slotEnd = new Date(                                â”‚
â”‚     slotStart.getTime() + 30 * 60 * 1000                   â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   return bookings.some(booking => {                        â”‚
â”‚     if (booking.room_id !== room.id) return false;         â”‚
â”‚     if (booking.status !== 'active') return false;         â”‚
â”‚                                                             â”‚
â”‚     const bookingStart = new Date(booking.start_time);     â”‚
â”‚     const bookingEnd = new Date(booking.end_time);         â”‚
â”‚                                                             â”‚
â”‚     // Check for overlap                                   â”‚
â”‚     return (                                               â”‚
â”‚       (slotStart >= bookingStart && slotStart < bookingEnd)â”‚
â”‚       || (slotEnd > bookingStart && slotEnd <= bookingEnd) â”‚
â”‚       || (slotStart <= bookingStart && slotEnd >= bookingEnd)â”‚
â”‚     );                                                      â”‚
â”‚   });                                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Booking Block Rendering:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ // Find booking that spans multiple slots                  â”‚
â”‚ const getBookingForSlot = (room, slotTime) => {            â”‚
â”‚   const slotStart = new Date(`${selectedDate}T${slotTime}`);â”‚
â”‚   return bookings.find(booking => {                        â”‚
â”‚     if (booking.room_id !== room.id) return false;         â”‚
â”‚     const bookingStart = new Date(booking.start_time);     â”‚
â”‚     const bookingEnd = new Date(booking.end_time);         â”‚
â”‚     return slotStart >= bookingStart && slotStart < bookingEnd;â”‚
â”‚   });                                                       â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ // Calculate booking span width                            â”‚
â”‚ const getBookingSpan = (booking) => {                      â”‚
â”‚   const start = new Date(booking.start_time);              â”‚
â”‚   const end = new Date(booking.end_time);                  â”‚
â”‚   const durationMinutes = (end - start) / (1000 * 60);     â”‚
â”‚   const slots = Math.ceil(durationMinutes / 30);           â”‚
â”‚   return slots;  // Number of 30-min slots to span         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ // Render booking block                                    â”‚
â”‚ <div                                                        â”‚
â”‚   className="booking-block"                                â”‚
â”‚   style={{                                                 â”‚
â”‚     gridColumn: `span ${getBookingSpan(booking)}`,         â”‚
â”‚     background: 'linear-gradient(135deg, #667eea, #764ba2)'â”‚
â”‚   }}                                                        â”‚
â”‚   onClick={() => showBookingDetails(booking)}              â”‚
â”‚ >                                                           â”‚
â”‚   <div className="booking-info">                           â”‚
â”‚     <span className="meeting-topic">                       â”‚
â”‚       {booking.private_meeting_topic ||                    â”‚
â”‚        getMeetingTopic(booking.meeting_request_id)}        â”‚
â”‚     </span>                                                 â”‚
â”‚     <span className="booked-by">                           â”‚
â”‚       {users[booking.booked_by]?.full_name}                â”‚
â”‚     </span>                                                 â”‚
â”‚     <span className="time-range">                          â”‚
â”‚       {format(new Date(booking.start_time), 'HH:mm')} -    â”‚
â”‚       {format(new Date(booking.end_time), 'HH:mm')}        â”‚
â”‚     </span>                                                 â”‚
â”‚   </div>                                                    â”‚
â”‚ </div>                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER BOOKING DIALOG (components/meetings/BookingDialog.jsx):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Triggered from: Accepted Meetings tab, "Book Venue" button â”‚
â”‚                                                             â”‚
â”‚ Dialog Structure:                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  Book Venue for Meeting                              â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Meeting: Bilateral Trade Agreement Discussion       â”‚  â”‚
â”‚ â”‚  Duration: 45 minutes                                 â”‚  â”‚
â”‚ â”‚  Code: X7K9M2N4                                       â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Select Date                                          â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [<] January 15, 2025 [>]                       â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Select Start Time                                    â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [v] 10:00 AM                                   â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     10:30 AM                                   â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     11:00 AM                                   â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     ...                                        â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Available Rooms                                      â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [o] Conference Room A (Floor 2)                â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     Capacity: 15 | Equipment: Wifi, Projector â”‚  â”‚  â”‚
â”‚ â”‚  â”‚                                                 â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ [ ] Conference Room B (Floor 3)                â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     âš ï¸ Already booked at this time             â”‚  â”‚  â”‚
â”‚ â”‚  â”‚                                                 â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ [o] Meeting Room C (Floor 2)                   â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     Capacity: 8 | Equipment: Wifi             â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  [Cancel]                        [Confirm Booking]    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Booking Availability Check:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const checkRoomAvailability = (                            â”‚
â”‚   room,                                                     â”‚
â”‚   date,                                                     â”‚
â”‚   startTime,                                               â”‚
â”‚   duration                                                  â”‚
â”‚ ) => {                                                      â”‚
â”‚   // Calculate time range                                  â”‚
â”‚   const bookingStart = new Date(`${date}T${startTime}`);   â”‚
â”‚   const bookingEnd = new Date(                             â”‚
â”‚     bookingStart.getTime() + duration * 60 * 1000          â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   // Check for conflicts                                   â”‚
â”‚   const hasConflict = bookings.some(booking => {           â”‚
â”‚     if (booking.room_id !== room.id) return false;         â”‚
â”‚     if (booking.status !== 'active') return false;         â”‚
â”‚                                                             â”‚
â”‚     const existingStart = new Date(booking.start_time);    â”‚
â”‚     const existingEnd = new Date(booking.end_time);        â”‚
â”‚                                                             â”‚
â”‚     // Check for overlap                                   â”‚
â”‚     return (                                               â”‚
â”‚       (bookingStart >= existingStart &&                    â”‚
â”‚        bookingStart < existingEnd) ||                      â”‚
â”‚       (bookingEnd > existingStart &&                       â”‚
â”‚        bookingEnd <= existingEnd) ||                       â”‚
â”‚       (bookingStart <= existingStart &&                    â”‚
â”‚        bookingEnd >= existingEnd)                          â”‚
â”‚     );                                                      â”‚
â”‚   });                                                       â”‚
â”‚                                                             â”‚
â”‚   return !hasConflict;  // Available if no conflict        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Booking Creation Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User opens BookingDialog from accepted meeting          â”‚
â”‚    â†“                                                        â”‚
â”‚ 2. Dialog shows meeting details (topic, duration, code)    â”‚
â”‚    â†“                                                        â”‚
â”‚ 3. User selects:                                           â”‚
â”‚    - Date (default: today)                                 â”‚
â”‚    - Start time (dropdown: 08:00 - 19:30 in 30min slots)  â”‚
â”‚    - Room (from available rooms list)                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 4. System filters rooms by availability:                   â”‚
â”‚    const availableRooms = rooms.filter(room => {           â”‚
â”‚      return checkRoomAvailability(                         â”‚
â”‚        room,                                               â”‚
â”‚        selectedDate,                                       â”‚
â”‚        selectedTime,                                       â”‚
â”‚        meeting.proposed_duration                           â”‚
â”‚      );                                                     â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 5. Display rooms:                                          â”‚
â”‚    - Available: Selectable with green checkmark            â”‚
â”‚    - Unavailable: Grayed out with warning                  â”‚
â”‚    â†“                                                        â”‚
â”‚ 6. User selects a room and clicks "Confirm Booking"        â”‚
â”‚    â†“                                                        â”‚
â”‚ 7. Double-check availability (race condition protection):  â”‚
â”‚    if (!checkRoomAvailability(...)) {                      â”‚
â”‚      alert("Room no longer available");                    â”‚
â”‚      return;                                               â”‚
â”‚    }                                                        â”‚
â”‚    â†“                                                        â”‚
â”‚ 8. Calculate exact times:                                  â”‚
â”‚    const startDateTime = new Date(                         â”‚
â”‚      `${selectedDate}T${selectedTime}:00`                  â”‚
â”‚    );                                                       â”‚
â”‚    const endDateTime = new Date(                           â”‚
â”‚      startDateTime.getTime() +                             â”‚
â”‚      meeting.proposed_duration * 60 * 1000                 â”‚
â”‚    );                                                       â”‚
â”‚    â†“                                                        â”‚
â”‚ 9. Create booking:                                         â”‚
â”‚    const booking = await VenueBooking.create({             â”‚
â”‚      room_id: selectedRoom.id,                             â”‚
â”‚      room_name: selectedRoom.name,                         â”‚
â”‚      room_type: selectedRoom.type,                         â”‚
â”‚      capacity: selectedRoom.capacity,                      â”‚
â”‚      floor_level: selectedRoom.floor,                      â”‚
â”‚      equipment: selectedRoom.equipment,                    â”‚
â”‚      booked_by: currentUser.id,                            â”‚
â”‚      booking_type: 'meeting',                              â”‚
â”‚      meeting_request_id: meeting.id,                       â”‚
â”‚      start_time: startDateTime.toISOString(),              â”‚
â”‚      end_time: endDateTime.toISOString(),                  â”‚
â”‚      status: 'active'                                      â”‚
â”‚    });                                                      â”‚
â”‚    â†“                                                        â”‚
â”‚ 10. Update meeting with booking reference:                 â”‚
â”‚     await MeetingRequest.update(meeting.id, {              â”‚
â”‚       venue_booking_id: booking.id                         â”‚
â”‚     });                                                     â”‚
â”‚    â†“                                                        â”‚
â”‚ 11. Notify meeting participants:                           â”‚
â”‚     const participants = [                                 â”‚
â”‚       meeting.requester_id,                                â”‚
â”‚       ...meeting.recipient_ids                             â”‚
â”‚     ].filter(id => id !== currentUser.id);                 â”‚
â”‚                                                             â”‚
â”‚     for (const participantId of participants) {            â”‚
â”‚       const participant = await User.get(participantId);   â”‚
â”‚       if (participant.notification_preferences             â”‚
â”‚            ?.booking_confirmed !== false) {                â”‚
â”‚         await Notification.create({                        â”‚
â”‚           user_id: participantId,                          â”‚
â”‚           type: 'booking_confirmed',                       â”‚
â”‚           title: 'Venue Confirmed',                        â”‚
â”‚           body: `${selectedRoom.name} has been booked for â”‚
â”‚                  your meeting "${meeting.proposed_topic}" â”‚
â”‚                  at ${format(startDateTime, 'MMM d, HH:mm')}`,â”‚
â”‚           link: '/schedule',                               â”‚
â”‚           related_entity_id: booking.id                    â”‚
â”‚         });                                                 â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚    â†“                                                        â”‚
â”‚ 12. Close dialog and show success message                  â”‚
â”‚    â†“                                                        â”‚
â”‚ 13. Reload meeting data to show booking info               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ADMIN PRIVATE BOOKING (components/venues/PrivateBookingDialog):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Available only to admin users                              â”‚
â”‚ Accessed from: Rooms page or Venues page                   â”‚
â”‚                                                             â”‚
â”‚ Dialog Structure:                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  Create Private Booking (Admin)                      â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Meeting Topic *                                      â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ VIP Bilateral Summit                           â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Room                                                 â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [v] Conference Room A                          â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Date                                                 â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [ğŸ“…] 2025-01-15                                â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Start Time                    End Time               â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚ â”‚  â”‚ [v] 10:00        â”‚  â”‚ [v] 11:30            â”‚     â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  [Cancel]                        [Create Booking]     â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Private Booking Process:                                   â”‚
â”‚   1. Admin enters meeting topic (freeform text)            â”‚
â”‚   2. Selects room from dropdown                            â”‚
â”‚   3. Picks date using date picker                          â”‚
â”‚   4. Selects start and end times                           â”‚
â”‚   5. System checks availability                            â”‚
â”‚   6. Creates booking with booking_type='private'           â”‚
â”‚   7. No MeetingRequest association                         â”‚
â”‚   8. No participant notifications                          â”‚
â”‚   9. Shows in venue schedule                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Booking Display Rules:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Public Venue Schedule (all users):                         â”‚
â”‚   - Shows all active bookings                              â”‚
â”‚   - Meeting bookings display:                              â”‚
â”‚     * Meeting topic (from MeetingRequest)                  â”‚
â”‚     * Booked by name                                       â”‚
â”‚     * Time range                                           â”‚
â”‚   - Private bookings display:                              â”‚
â”‚     * Custom topic from admin                              â”‚
â”‚     * "Private Booking" label                              â”‚
â”‚     * Time range                                           â”‚
â”‚   - Click booking â†’ Show details popover                   â”‚
â”‚                                                             â”‚
â”‚ User Schedule (My Schedule page):                          â”‚
â”‚   - Shows only user's own bookings                         â”‚
â”‚   - Bookings for meetings they're part of                  â”‚
â”‚   - Can click to view meeting details                      â”‚
â”‚   - Can modify or cancel (if booking owner)                â”‚
â”‚                                                             â”‚
â”‚ Admin View:                                                 â”‚
â”‚   - Can see all bookings (meeting + private)               â”‚
â”‚   - Can edit/cancel any booking                            â”‚
â”‚   - Can create private bookings                            â”‚
â”‚   - Access to booking analytics                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Booking Modification/Cancellation:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Users can cancel their bookings through:                   â”‚
â”‚   1. Meeting page â†’ Cancel meeting (cancels booking too)   â”‚
â”‚   2. Schedule page â†’ Click booking â†’ Cancel button         â”‚
â”‚                                                             â”‚
â”‚ When booking is cancelled:                                 â”‚
â”‚   - Status changed to 'cancelled'                          â”‚
â”‚   - Room becomes available                                 â”‚
â”‚   - Participants notified (if meeting booking)             â”‚
â”‚   - MeetingRequest.venue_booking_id cleared                â”‚
â”‚                                                             â”‚
â”‚ Admins can:                                                 â”‚
â”‚   - Cancel any booking                                     â”‚
â”‚   - Modify booking times (via cancel + recreate)           â”‚
â”‚   - Override availability checks                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.5 Chat & Messaging System
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CHAT & MESSAGING FUNCTIONALITY                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

File: pages/Chat.js

Chat System Overview:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Features:                                                   â”‚
â”‚   - 1-on-1 messaging only (single-user meetings)           â”‚
â”‚   - Available for accepted meetings only                   â”‚
â”‚   - Real-time message delivery (3-second polling)          â”‚
â”‚   - Read status tracking                                   â”‚
â”‚   - Auto-scroll to new messages                            â”‚
â”‚   - Direct link support (URL parameter)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Page Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat Page (Split View)                                      â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Header                                              â”‚   â”‚
â”‚ â”‚ [â† Back to Meetings] Secure Messaging               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚          â”‚                                           â”‚  â”‚
â”‚ â”‚          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚          â”‚ â”‚ Chat Header                       â”‚   â”‚  â”‚
â”‚ â”‚          â”‚ â”‚ [Avatar] John Smith               â”‚   â”‚  â”‚
â”‚ â”‚ Conver-  â”‚ â”‚ Director â€¢ Bilateral Trade...    â”‚   â”‚  â”‚
â”‚ â”‚ sation   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â”‚ List     â”‚                                           â”‚  â”‚
â”‚ â”‚          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚ Active   â”‚ â”‚                                   â”‚   â”‚  â”‚
â”‚ â”‚ Meeting  â”‚ â”‚                                   â”‚   â”‚  â”‚
â”‚ â”‚ 1        â”‚ â”‚   Message Thread Area             â”‚   â”‚  â”‚
â”‚ â”‚          â”‚ â”‚                                   â”‚   â”‚  â”‚
â”‚ â”‚ Active   â”‚ â”‚                                   â”‚   â”‚  â”‚
â”‚ â”‚ Meeting  â”‚ â”‚                                   â”‚   â”‚  â”‚
â”‚ â”‚ 2        â”‚ â”‚                                   â”‚   â”‚  â”‚
â”‚ â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â”‚ ...      â”‚                                           â”‚  â”‚
â”‚ â”‚          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚          â”‚ â”‚ Message Input                     â”‚   â”‚  â”‚
â”‚ â”‚          â”‚ â”‚ [Type message...] [Send]          â”‚   â”‚  â”‚
â”‚ â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â”‚          â”‚                                           â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   Sidebar          Main Chat Area                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Conversation List (Sidebar):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shows all accepted single-user meetings                    â”‚
â”‚                                                             â”‚
â”‚ Each conversation item displays:                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”                                                â”‚  â”‚
â”‚ â”‚ â”‚ JS â”‚  John Smith                                    â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”˜  Bilateral Trade Agreement...                  â”‚  â”‚
â”‚ â”‚         â€¢ unread indicator if has unread messages     â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Sorted by: Most recent activity                            â”‚
â”‚ Highlighted: Currently selected conversation               â”‚
â”‚ Click: Switch to that conversation                         â”‚
â”‚                                                             â”‚
â”‚ Empty State (if no conversations):                         â”‚
â”‚   [ğŸ’¬ Icon] No active conversations                        â”‚
â”‚   Accept 1-on-1 meeting requests to start chatting.       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Message Thread Area:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Displays all messages for selected meeting                 â”‚
â”‚                                                             â”‚
â”‚ Message Layout:                                            â”‚
â”‚                                                             â”‚
â”‚ Sender's messages (right-aligned):                         â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                         â”‚ Looking forward to our   â”‚       â”‚
â”‚                         â”‚ meeting tomorrow!        â”‚       â”‚
â”‚                         â”‚                  10:30 â”€â”€â”˜       â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                             â”‚
â”‚ Recipient's messages (left-aligned):                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚ â”‚ Me too! I've prepared    â”‚                               â”‚
â”‚ â”‚ the documents.           â”‚                               â”‚
â”‚ â”‚ 10:32 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                               â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                             â”‚
â”‚ Message Colors:                                            â”‚
â”‚   - Current user: Blue (#3B82F6)                           â”‚
â”‚   - Other user: Gray (#F1F5F9)                             â”‚
â”‚                                                             â”‚
â”‚ Message Metadata:                                          â”‚
â”‚   - Timestamp (HH:mm format)                               â”‚
â”‚   - Read status (for sent messages)                        â”‚
â”‚                                                             â”‚
â”‚ Empty State (no messages yet):                             â”‚
â”‚   [ğŸ’¬ Icon] Start your conversation                        â”‚
â”‚   Send a message to begin chatting with [Name]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Message Input Area:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ [Type your message...]              [Send Button â†’]  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Features:                                                   â”‚
â”‚   - Multi-line textarea (expands as needed)                â”‚
â”‚   - Enter key to send (Shift+Enter for new line)          â”‚
â”‚   - Character limit: 2000 characters                       â”‚
â”‚   - Send button disabled if empty                          â”‚
â”‚   - Shows loading state when sending                       â”‚
â”‚   - Auto-clears after successful send                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Loading Conversations:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const loadData = async () => {                             â”‚
â”‚   const user = await User.me();                            â”‚
â”‚   setCurrentUser(user);                                    â”‚
â”‚                                                             â”‚
â”‚   // Load all users for name lookup                        â”‚
â”‚   const allUsers = await User.list();                      â”‚
â”‚   const userLookup = {};                                   â”‚
â”‚   allUsers.forEach(u => userLookup[u.id] = u);             â”‚
â”‚   setUsers(userLookup);                                    â”‚
â”‚                                                             â”‚
â”‚   // Load accepted single meetings                         â”‚
â”‚   const allRequests = await MeetingRequest.list(           â”‚
â”‚     '-updated_date'                                        â”‚
â”‚   );                                                        â”‚
â”‚   const accepted = allRequests.filter(req =>               â”‚
â”‚     ((req.recipient_ids || []).includes(user.id) ||        â”‚
â”‚      req.requester_id === user.id) &&                      â”‚
â”‚     req.status === 'accepted' &&                           â”‚
â”‚     req.meeting_type === 'single'  // â† Only single       â”‚
â”‚   );                                                        â”‚
â”‚   setAcceptedMeetings(accepted);                           â”‚
â”‚                                                             â”‚
â”‚   // Check for direct link                                 â”‚
â”‚   const urlParams = new URLSearchParams(                   â”‚
â”‚     window.location.search                                 â”‚
â”‚   );                                                        â”‚
â”‚   const requestId = urlParams.get('request');              â”‚
â”‚   if (requestId) {                                         â”‚
â”‚     setSelectedMeetingId(requestId);                       â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Loading Messages (with Polling):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const loadMessages = async () => {                         â”‚
â”‚   if (!selectedMeetingId) return;                          â”‚
â”‚                                                             â”‚
â”‚   // Fetch messages for selected meeting                   â”‚
â”‚   const chatMessages = await ChatMessage.filter(           â”‚
â”‚     { meeting_request_id: selectedMeetingId },             â”‚
â”‚     'created_date'  // Oldest first                        â”‚
â”‚   );                                                        â”‚
â”‚   setMessages(chatMessages);                               â”‚
â”‚                                                             â”‚
â”‚   // Mark unread messages as read                          â”‚
â”‚   const unreadMessages = chatMessages.filter(              â”‚
â”‚     msg => msg.recipient_id === currentUser?.id &&         â”‚
â”‚            !msg.read_status                                â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   for (const msg of unreadMessages) {                      â”‚
â”‚     await ChatMessage.update(msg.id, {                     â”‚
â”‚       read_status: true                                    â”‚
â”‚     });                                                     â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ // Auto-refresh every 3 seconds                            â”‚
â”‚ useEffect(() => {                                          â”‚
â”‚   if (selectedMeetingId) {                                 â”‚
â”‚     loadMessages();                                        â”‚
â”‚     const interval = setInterval(loadMessages, 3000);      â”‚
â”‚     return () => clearInterval(interval);                  â”‚
â”‚   }                                                         â”‚
â”‚ }, [selectedMeetingId, currentUser?.id]);                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sending Message:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const sendMessage = async () => {                          â”‚
â”‚   if (!newMessage.trim() || !selectedMeetingId) return;    â”‚
â”‚                                                             â”‚
â”‚   setSending(true);                                        â”‚
â”‚   try {                                                     â”‚
â”‚     // Find recipient                                      â”‚
â”‚     const selectedMeeting = acceptedMeetings.find(         â”‚
â”‚       m => m.id === selectedMeetingId                      â”‚
â”‚     );                                                      â”‚
â”‚     const recipientId =                                    â”‚
â”‚       selectedMeeting.requester_id === currentUser.id      â”‚
â”‚         ? (selectedMeeting.recipient_ids || [])[0]         â”‚
â”‚         : selectedMeeting.requester_id;                    â”‚
â”‚                                                             â”‚
â”‚     // Create message                                      â”‚
â”‚     const newMsg = await ChatMessage.create({              â”‚
â”‚       meeting_request_id: selectedMeetingId,               â”‚
â”‚       sender_id: currentUser.id,                           â”‚
â”‚       recipient_id: recipientId,                           â”‚
â”‚       message: newMessage,                                 â”‚
â”‚       message_type: 'text'                                 â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Create notification for recipient                   â”‚
â”‚     const recipient = await User.get(recipientId);         â”‚
â”‚     if (recipient.notification_preferences                 â”‚
â”‚          ?.new_message !== false) {                        â”‚
â”‚       await Notification.create({                          â”‚
â”‚         user_id: recipientId,                              â”‚
â”‚         type: 'new_message',                               â”‚
â”‚         title: 'New Message',                              â”‚
â”‚         body: `You have a new message from                â”‚
â”‚                ${currentUser.full_name}.`,                 â”‚
â”‚         link: `/chat?request=${selectedMeetingId}`,        â”‚
â”‚         related_entity_id: newMsg.id                       â”‚
â”‚       });                                                   â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Clear input and reload                              â”‚
â”‚     setNewMessage('');                                     â”‚
â”‚     loadMessages();                                        â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error sending message:", error);        â”‚
â”‚   }                                                         â”‚
â”‚   setSending(false);                                       â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ // Handle Enter key                                        â”‚
â”‚ const handleKeyPress = (e) => {                            â”‚
â”‚   if (e.key === 'Enter' && !e.shiftKey) {                  â”‚
â”‚     e.preventDefault();                                    â”‚
â”‚     sendMessage();                                         â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Auto-Scroll to Bottom:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const messagesEndRef = useRef(null);                       â”‚
â”‚                                                             â”‚
â”‚ const scrollToBottom = () => {                             â”‚
â”‚   messagesEndRef.current?.scrollIntoView({                 â”‚
â”‚     behavior: "smooth"                                     â”‚
â”‚   });                                                       â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ // Scroll when messages change                             â”‚
â”‚ useEffect(() => {                                          â”‚
â”‚   scrollToBottom();                                        â”‚
â”‚ }, [messages]);                                            â”‚
â”‚                                                             â”‚
â”‚ // In message thread:                                      â”‚
â”‚ <div className="messages-container">                       â”‚
â”‚   {messages.map(message => (                               â”‚
â”‚     <MessageBubble key={message.id} message={message} />   â”‚
â”‚   ))}                                                       â”‚
â”‚   <div ref__={messagesEndRef} />  {/* Scroll anchor */}     â”‚
â”‚ </div>                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Access Control:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat is available only when:                               â”‚
â”‚   âœ… Meeting status = 'accepted'                           â”‚
â”‚   âœ… Meeting type = 'single' (not multi-delegate)          â”‚
â”‚   âœ… User is a participant (requester or recipient)        â”‚
â”‚                                                             â”‚
â”‚ Multi-delegate meetings:                                   â”‚
â”‚   - No chat available                                      â”‚
â”‚   - Communication via email or external channels           â”‚
â”‚   - Future: Group chat feature                             â”‚
â”‚                                                             â”‚
â”‚ Security:                                                   â”‚
â”‚   - RLS ensures users only see their messages              â”‚
â”‚   - Messages encrypted in transit (HTTPS)                  â”‚
â”‚   - No message editing or deletion (immutable)             â”‚
â”‚   - Read-only for non-participants                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Direct Link Support:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ URL Format: /chat?request={meeting_request_id}            â”‚
â”‚                                                             â”‚
â”‚ Usage:                                                      â”‚
â”‚   - From meeting card "Chat" button                        â”‚
â”‚   - From notifications (new message)                       â”‚
â”‚   - From schedule view                                     â”‚
â”‚                                                             â”‚
â”‚ Behavior:                                                   â”‚
â”‚   1. Load chat page                                        â”‚
â”‚   2. Parse URL parameter                                   â”‚
â”‚   3. Auto-select that conversation                         â”‚
â”‚   4. Load messages for that meeting                        â”‚
â”‚   5. Mark messages as read                                 â”‚
â”‚   6. Scroll to bottom                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Empty States:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ No Conversations:                                           â”‚
â”‚   [ğŸ’¬ Icon] No active conversations                        â”‚
â”‚   Accept 1-on-1 meeting requests to start chatting.       â”‚
â”‚                                                             â”‚
â”‚ No Conversation Selected:                                   â”‚
â”‚   [ğŸ’¬ Icon] Select a conversation                          â”‚
â”‚   Choose a meeting from the sidebar to start chatting     â”‚
â”‚                                                             â”‚
â”‚ No Messages Yet:                                            â”‚
â”‚   [ğŸ’¬ Icon] Start your conversation                        â”‚
â”‚   Send a message to begin chatting with [Name]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Due to response length limits, I'll continue with the remaining sections. Would you like me to continue with:

Section 8: Complete User Flows (Step-by-step journeys) Section 9: Admin Functionalities Sections 10-16: Remaining sections

Let me know and I'll provide the next sections with the same comprehensive detail!

41 minutes ago
Base44 AI
Base44

Thought for 1s
UNIConnect - Complete Project Documentation (Continued)
7. Core Functionalities
7.1 User Profile Management
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             PROFILE MANAGEMENT COMPLETE FLOW                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Page: /profile (Profile.js)

Initial State on Page Load:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Component mounts                                         â”‚
â”‚         â†“                                                   â”‚
â”‚ 2. useEffect triggers loadUserData()                        â”‚
â”‚         â†“                                                   â”‚
â”‚ 3. Fetch current user:                                     â”‚
â”‚    const user = await User.me();                           â”‚
â”‚         â†“                                                   â”‚
â”‚ 4. Set state:                                              â”‚
â”‚    setCurrentUser(user);                                   â”‚
â”‚    setFormData(user);  // Pre-populate form                â”‚
â”‚    setConsentGiven(user.consent_given || false);           â”‚
â”‚         â†“                                                   â”‚
â”‚ 5. Display loading indicator while fetching                â”‚
â”‚         â†“                                                   â”‚
â”‚ 6. Render form with user data                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Profile Sections:

Section 1: Consent & Data Protection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UI Elements:                                                â”‚
â”‚   - Privacy Notice (blue info box)                         â”‚
â”‚     * Explains data usage                                  â”‚
â”‚     * Lists what data is collected                         â”‚
â”‚     * Security measures                                    â”‚
â”‚   - Checkbox: "I consent to data processing"               â”‚
â”‚     * Required to use platform                             â”‚
â”‚     * Cannot save without consent                          â”‚
â”‚                                                             â”‚
â”‚ State:                                                      â”‚
â”‚   const [consentGiven, setConsentGiven] = useState(false); â”‚
â”‚                                                             â”‚
â”‚ Validation:                                                 â”‚
â”‚   - Must be checked before saving                          â”‚
â”‚   - Shows warning if unchecked                             â”‚
â”‚                                                             â”‚
â”‚ Alert Display:                                              â”‚
â”‚   {!consentGiven && (                                      â”‚
â”‚     <Alert variant="warning">                              â”‚
â”‚       Consent is required to access platform features      â”‚
â”‚     </Alert>                                               â”‚
â”‚   )}                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Section 2: Basic Information
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fields (2-column grid):                                     â”‚
â”‚                                                             â”‚
â”‚ Row 1:                                                      â”‚
â”‚   [Full Name]                [Email Address]               â”‚
â”‚   (Read-only, grayed)       (Read-only, grayed)           â”‚
â”‚   â†‘ From Google OAuth       â†‘ From Google OAuth           â”‚
â”‚                                                             â”‚
â”‚ Row 2:                                                      â”‚
â”‚   [Representation Type â–¼]   [Country/Entity]               â”‚
â”‚   Options:                   (Text input)                  â”‚
â”‚   - Government               Example: "United States"      â”‚
â”‚   - NGO                                                     â”‚
â”‚   - Private Sector                                         â”‚
â”‚   - Academic                                               â”‚
â”‚   - International Org                                      â”‚
â”‚   - Media                                                  â”‚
â”‚                                                             â”‚
â”‚ Row 3:                                                      â”‚
â”‚   [Job Title]               [Organization]                 â”‚
â”‚   Example:                   Example:                      â”‚
â”‚   "Director of Policy"      "Department of State"         â”‚
â”‚                                                             â”‚
â”‚ Row 4:                                                      â”‚
â”‚   [Industry Sector]         [LinkedIn Profile (Optional)]  â”‚
â”‚   Example:                   Format:                       â”‚
â”‚   "Climate Policy"          "https://linkedin.com/in/..."  â”‚
â”‚                                                             â”‚
â”‚ Row 5 (Full width):                                        â”‚
â”‚   [Professional Biography]                                 â”‚
â”‚   (Textarea, 500 chars max)                                â”‚
â”‚   Placeholder: "Brief description of your professional     â”‚
â”‚                 background and expertise..."               â”‚
â”‚                                                             â”‚
â”‚ State Management:                                           â”‚
â”‚   const [formData, setFormData] = useState({              â”‚
â”‚     representation_type: '',                               â”‚
â”‚     country: '',                                           â”‚
â”‚     job_title: '',                                         â”‚
â”‚     organization: '',                                      â”‚
â”‚     industry_sector: '',                                   â”‚
â”‚     biography: '',                                         â”‚
â”‚     linkedin_profile: ''                                   â”‚
â”‚   });                                                       â”‚
â”‚                                                             â”‚
â”‚   const handleInputChange = (field, value) => {            â”‚
â”‚     setFormData(prev => ({ ...prev, [field]: value }));   â”‚
â”‚   };                                                        â”‚
â”‚                                                             â”‚
â”‚ Validation Rules:                                           â”‚
â”‚   - All fields required except linkedin_profile            â”‚
â”‚   - biography max 500 characters                           â”‚
â”‚   - linkedin_profile must be valid URL format              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Section 3: Topical Interests
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Description:                                                â”‚
â”‚   "Select areas of professional interest with priority     â”‚
â”‚    levels"                                                  â”‚
â”‚                                                             â”‚
â”‚ UI Layout:                                                  â”‚
â”‚   1. Quick Add Buttons (top):                              â”‚
â”‚      [+Climate Policy] [+Trade Relations] [+Digital Gov]   â”‚
â”‚      [+Human Rights] [+Economic Dev] [+Security Coop]      â”‚
â”‚      [+Health Policy] [+Education] [+Energy Transition]    â”‚
â”‚      ... (12 predefined topics shown as buttons)           â”‚
â”‚                                                             â”‚
â”‚   2. Selected Interests List:                              â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚      â”‚ Climate Policy         [Priority â–¼]  [ğŸ—‘ï¸]   â”‚     â”‚
â”‚      â”‚                        â†’ High                â”‚     â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚      â”‚ Trade Relations        [Priority â–¼]  [ğŸ—‘ï¸]   â”‚     â”‚
â”‚      â”‚                        â†’ Medium              â”‚     â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚      â”‚ Energy Transition      [Priority â–¼]  [ğŸ—‘ï¸]   â”‚     â”‚
â”‚      â”‚                        â†’ Low                 â”‚     â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â”‚ Data Structure:                                             â”‚
â”‚   topical_interests: [                                     â”‚
â”‚     {                                                       â”‚
â”‚       topic: "Climate Policy",                             â”‚
â”‚       priority: "high"                                     â”‚
â”‚     },                                                      â”‚
â”‚     {                                                       â”‚
â”‚       topic: "Trade Relations",                            â”‚
â”‚       priority: "medium"                                   â”‚
â”‚     }                                                       â”‚
â”‚   ]                                                         â”‚
â”‚                                                             â”‚
â”‚ Functions:                                                  â”‚
â”‚   const addInterest = (type, item) => {                    â”‚
â”‚     const interests = formData[type] || [];                â”‚
â”‚     if (!interests.find(i => i.topic === item)) {          â”‚
â”‚       const newInterest = {                                â”‚
â”‚         topic: item,                                       â”‚
â”‚         priority: 'medium' // default                      â”‚
â”‚       };                                                    â”‚
â”‚       setFormData(prev => ({                               â”‚
â”‚         ...prev,                                           â”‚
â”‚         [type]: [...interests, newInterest]                â”‚
â”‚       }));                                                  â”‚
â”‚     }                                                       â”‚
â”‚   };                                                        â”‚
â”‚                                                             â”‚
â”‚   const removeInterest = (type, index) => {                â”‚
â”‚     const interests = formData[type] || [];                â”‚
â”‚     setFormData(prev => ({                                 â”‚
â”‚       ...prev,                                             â”‚
â”‚       [type]: interests.filter((_, i) => i !== index)      â”‚
â”‚     }));                                                    â”‚
â”‚   };                                                        â”‚
â”‚                                                             â”‚
â”‚   const updateInterestPriority = (type, index, priority) =>â”‚
â”‚     const interests = [...(formData[type] || [])];         â”‚
â”‚     interests[index].priority = priority;                  â”‚
â”‚     setFormData(prev => ({ ...prev, [type]: interests }));â”‚
â”‚   };                                                        â”‚
â”‚                                                             â”‚
â”‚ Validation:                                                 â”‚
â”‚   - Minimum 1 interest required                            â”‚
â”‚   - No duplicate topics allowed                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Section 4: Geographical Interests
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Description:                                                â”‚
â”‚   "Select regions of professional focus"                   â”‚
â”‚                                                             â”‚
â”‚ UI Layout (Same as Topical):                               â”‚
â”‚   1. Quick Add Buttons:                                    â”‚
â”‚      [+North America] [+South America] [+Europe]           â”‚
â”‚      [+Africa] [+Asia-Pacific] [+Middle East]              â”‚
â”‚      [+Central Asia] [+Caribbean] [+Nordic Countries]      â”‚
â”‚      [+ASEAN] ... (12 predefined regions)                  â”‚
â”‚                                                             â”‚
â”‚   2. Selected Regions List:                                â”‚
â”‚      Same format as topical interests                      â”‚
â”‚                                                             â”‚
â”‚ Data Structure:                                             â”‚
â”‚   geographical_interests: [                                â”‚
â”‚     {                                                       â”‚
â”‚       region: "Europe",                                    â”‚
â”‚       priority: "high"                                     â”‚
â”‚     },                                                      â”‚
â”‚     {                                                       â”‚
â”‚       region: "Africa",                                    â”‚
â”‚       priority: "medium"                                   â”‚
â”‚     }                                                       â”‚
â”‚   ]                                                         â”‚
â”‚                                                             â”‚
â”‚ Functions: (Same as topical interests functions)           â”‚
â”‚                                                             â”‚
â”‚ Validation:                                                 â”‚
â”‚   - Minimum 1 region required                              â”‚
â”‚   - No duplicate regions allowed                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Section 5: Notification Preferences
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Title: "Notification Preferences"                          â”‚
â”‚ Description: "Choose which platform notifications you      â”‚
â”‚               want to receive"                              â”‚
â”‚                                                             â”‚
â”‚ Settings (Switch toggles):                                 â”‚
â”‚                                                             â”‚
â”‚ 1. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ New Meeting Request                      â”‚           â”‚
â”‚    â”‚ Notify when user sends meeting request   â”‚           â”‚
â”‚    â”‚                              [Toggle ON] â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â”‚ 2. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ Request Status Update                    â”‚           â”‚
â”‚    â”‚ Notify when user accepts/declines        â”‚           â”‚
â”‚    â”‚                              [Toggle ON] â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â”‚ 3. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ New Chat Message                         â”‚           â”‚
â”‚    â”‚ Notify when receiving chat message       â”‚           â”‚
â”‚    â”‚                              [Toggle ON] â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â”‚ 4. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ Booking Confirmation                     â”‚           â”‚
â”‚    â”‚ Notify when venue is booked for meeting  â”‚           â”‚
â”‚    â”‚                              [Toggle ON] â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                             â”‚
â”‚ Data Structure:                                             â”‚
â”‚   notification_preferences: {                              â”‚
â”‚     new_meeting_request: true,                             â”‚
â”‚     request_status_update: true,                           â”‚
â”‚     new_message: true,                                     â”‚
â”‚     booking_confirmed: true                                â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚ Default Values:                                             â”‚
â”‚   All toggles default to ON (true) for new users          â”‚
â”‚                                                             â”‚
â”‚ Handler:                                                    â”‚
â”‚   const handleNotificationChange = (key, value) => {       â”‚
â”‚     setFormData(prev => ({                                 â”‚
â”‚       ...prev,                                             â”‚
â”‚       notification_preferences: {                          â”‚
â”‚         ...prev.notification_preferences,                  â”‚
â”‚         [key]: value                                       â”‚
â”‚       }                                                     â”‚
â”‚     }));                                                    â”‚
â”‚   };                                                        â”‚
â”‚                                                             â”‚
â”‚ Impact:                                                     â”‚
â”‚   - When creating notifications, system checks these       â”‚
â”‚     preferences before sending                             â”‚
â”‚   - If preference is OFF, notification is not created      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Section 6: Privacy Preferences
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Title: "Privacy Preferences"                               â”‚
â”‚ Description: "Control how your profile appears to others"  â”‚
â”‚                                                             â”‚
â”‚ Setting:                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ Hide Profile from Directory                  â”‚        â”‚
â”‚   â”‚ Make your profile invisible in directory     â”‚        â”‚
â”‚   â”‚ search                                        â”‚        â”‚
â”‚   â”‚                              [Toggle OFF]    â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚ When Enabled (Toggle ON):                                  â”‚
â”‚   âš ï¸ Alert shows:                                          â”‚
â”‚   "Note: While your profile is hidden, you can still      â”‚
â”‚    send meeting requests to others and receive requests   â”‚
â”‚    if someone has your direct information."               â”‚
â”‚                                                             â”‚
â”‚ Data Field:                                                 â”‚
â”‚   is_profile_hidden: boolean (default: false)              â”‚
â”‚                                                             â”‚
â”‚ Effect:                                                     â”‚
â”‚   - When TRUE: User does not appear in /delegates page    â”‚
â”‚   - User can still:                                        â”‚
â”‚     * Send meeting requests                               â”‚
â”‚     * Receive meeting requests                            â”‚
â”‚     * Use all other features                              â”‚
â”‚   - Other users cannot find them via search               â”‚
â”‚                                                             â”‚
â”‚ Handler:                                                    â”‚
â”‚   <Switch                                                  â”‚
â”‚     checked={formData.is_profile_hidden || false}          â”‚
â”‚     onCheckedChange={(checked) =>                          â”‚
â”‚       handleInputChange('is_profile_hidden', checked)      â”‚
â”‚     }                                                       â”‚
â”‚   />                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Save Profile Function:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleSave = async () => {                           â”‚
â”‚   setSaving(true);                                         â”‚
â”‚   try {                                                     â”‚
â”‚     // Calculate profile completion                        â”‚
â”‚     const profileComplete = !!(                            â”‚
â”‚       formData.representation_type &&                      â”‚
â”‚       formData.country &&                                  â”‚
â”‚       formData.job_title &&                                â”‚
â”‚       formData.organization &&                             â”‚
â”‚       formData.industry_sector &&                          â”‚
â”‚       formData.biography &&                                â”‚
â”‚       formData.topical_interests?.length > 0 &&            â”‚
â”‚       formData.geographical_interests?.length > 0          â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     // Update user data                                    â”‚
â”‚     await User.updateMyUserData({                          â”‚
â”‚       ...formData,                                         â”‚
â”‚       consent_given: consentGiven,                         â”‚
â”‚       profile_completed: profileComplete                   â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Reload user data to get updated values              â”‚
â”‚     await loadUserData();                                  â”‚
â”‚                                                             â”‚
â”‚     // Show success message (optional)                     â”‚
â”‚     // toast.success("Profile updated successfully");      â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error saving profile:", error);         â”‚
â”‚     // toast.error("Failed to update profile");            â”‚
â”‚   }                                                         â”‚
â”‚   setSaving(false);                                        â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ Save Button:                                                â”‚
â”‚   <Button                                                  â”‚
â”‚     onClick={handleSave}                                   â”‚
â”‚     disabled={saving || !consentGiven}                     â”‚
â”‚     className="bg-blue-600 hover:bg-blue-700 px-8"         â”‚
â”‚   >                                                         â”‚
â”‚     {saving ? (                                            â”‚
â”‚       <>                                                    â”‚
â”‚         <div className="animate-spin ... mr-2"></div>      â”‚
â”‚         Saving...                                          â”‚
â”‚       </>                                                   â”‚
â”‚     ) : (                                                   â”‚
â”‚       <>                                                    â”‚
â”‚         <Save className="w-4 h-4 mr-2" />                  â”‚
â”‚         Save Profile                                       â”‚
â”‚       </>                                                   â”‚
â”‚     )}                                                      â”‚
â”‚   </Button>                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Profile Completion Logic:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Requirements for profile_completed = true:                 â”‚
â”‚   âœ… representation_type filled                            â”‚
â”‚   âœ… country filled                                         â”‚
â”‚   âœ… job_title filled                                       â”‚
â”‚   âœ… organization filled                                    â”‚
â”‚   âœ… industry_sector filled                                 â”‚
â”‚   âœ… biography filled                                       â”‚
â”‚   âœ… topical_interests has at least 1 item                 â”‚
â”‚   âœ… geographical_interests has at least 1 item            â”‚
â”‚                                                             â”‚
â”‚ Optional fields (not required for completion):             â”‚
â”‚   - linkedin_profile                                       â”‚
â”‚                                                             â”‚
â”‚ Effects of profile_completed = true:                       â”‚
â”‚   âœ… Full access to platform features                      â”‚
â”‚   âœ… Profile visible in Delegates directory (if not hidden)â”‚
â”‚   âœ… Can send/receive meeting requests                     â”‚
â”‚   âœ… Green "Profile Complete" badge shows on dashboard     â”‚
â”‚                                                             â”‚
â”‚ Effects of profile_completed = false:                      â”‚
â”‚   âŒ Limited platform access                               â”‚
â”‚   âŒ Profile NOT visible in directory                      â”‚
â”‚   âŒ Warning shown on dashboard                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Profile Page States:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Loading State:                                          â”‚
â”‚    - Shows skeleton loaders                                â”‚
â”‚    - Animated pulse effect                                 â”‚
â”‚    - Displayed while fetching user data                    â”‚
â”‚                                                             â”‚
â”‚ 2. Loaded State:                                           â”‚
â”‚    - All fields populated with user data                   â”‚
â”‚    - Interactive form elements                             â”‚
â”‚    - Save button enabled (if consent given)                â”‚
â”‚                                                             â”‚
â”‚ 3. Saving State:                                           â”‚
â”‚    - Save button shows spinner                             â”‚
â”‚    - Button disabled                                       â”‚
â”‚    - "Saving..." text                                      â”‚
â”‚                                                             â”‚
â”‚ 4. Error State:                                            â”‚
â”‚    - Error message displayed (if fetch fails)              â”‚
â”‚    - Retry option available                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.2 User Directory & Networking
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DELEGATES DIRECTORY COMPLETE FLOW                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Page: /delegates (Delegates.js)

Data Loading Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Component mounts                                         â”‚
â”‚         â†“                                                   â”‚
â”‚ 2. useEffect triggers loadData()                            â”‚
â”‚         â†“                                                   â”‚
â”‚ 3. Parallel fetch:                                         â”‚
â”‚    const [user, allUsers] = await Promise.all([            â”‚
â”‚      User.me(),                                            â”‚
â”‚      User.list()                                           â”‚
â”‚    ]);                                                      â”‚
â”‚         â†“                                                   â”‚
â”‚ 4. Filter users:                                           â”‚
â”‚    const availableUsers = allUsers.filter(u =>             â”‚
â”‚      u.id !== user.id &&                                   â”‚
â”‚      u.profile_completed &&                                â”‚
â”‚      u.consent_given &&                                    â”‚
â”‚      !u.is_profile_hidden                                  â”‚
â”‚    );                                                       â”‚
â”‚         â†“                                                   â”‚
â”‚ 5. Set state:                                              â”‚
â”‚    setCurrentUser(user);                                   â”‚
â”‚    setUsers(availableUsers);                               â”‚
â”‚         â†“                                                   â”‚
â”‚ 6. Render user cards                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Access Control Check:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Before showing directory:                                   â”‚
â”‚   const canAccessUsers =                                    â”‚
â”‚     currentUser?.consent_given &&                           â”‚
â”‚     currentUser?.profile_completed;                         â”‚
â”‚                                                             â”‚
â”‚ If FALSE:                                                   â”‚
â”‚   Show Alert:                                              â”‚
â”‚   "Access Restricted: Please complete your consent         â”‚
â”‚    process and profile to browse users."                   â”‚
â”‚   [Link to Profile]                                        â”‚
â”‚                                                             â”‚
â”‚ If TRUE:                                                    â”‚
â”‚   Show full directory interface                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Search & Filter UI:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Search Bar:                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ ğŸ”  Search by name, organization, country...      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚ Filter Dropdown:                                            â”‚
â”‚   ğŸ›ï¸ [Filter by Type â–¼]                                   â”‚
â”‚      Options:                                              â”‚
â”‚      - All Types                                           â”‚
â”‚      - Government                                          â”‚
â”‚      - NGO                                                 â”‚
â”‚      - Private Sector                                      â”‚
â”‚      - Academic                                            â”‚
â”‚      - International Org                                   â”‚
â”‚      - Media                                               â”‚
â”‚                                                             â”‚
â”‚ Results Counter:                                            â”‚
â”‚   ğŸ‘¥ {filteredUsers.length} users available                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Filtering Logic:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const filterUsers = useCallback(() => {                    â”‚
â”‚   let filtered = users;                                    â”‚
â”‚                                                             â”‚
â”‚   // Search term filter                                    â”‚
â”‚   if (searchTerm) {                                        â”‚
â”‚     const term = searchTerm.toLowerCase();                 â”‚
â”‚     filtered = filtered.filter(user =>                     â”‚
â”‚       user.full_name?.toLowerCase().includes(term) ||      â”‚
â”‚       user.organization?.toLowerCase().includes(term) ||   â”‚
â”‚       user.country?.toLowerCase().includes(term) ||        â”‚
â”‚       user.job_title?.toLowerCase().includes(term)         â”‚
â”‚     );                                                      â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   // Representation type filter                            â”‚
â”‚   if (typeFilter !== 'all') {                              â”‚
â”‚     filtered = filtered.filter(user =>                     â”‚
â”‚       user.representation_type === typeFilter              â”‚
â”‚     );                                                      â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   setFilteredUsers(filtered);                              â”‚
â”‚ }, [users, searchTerm, typeFilter]);                       â”‚
â”‚                                                             â”‚
â”‚ useEffect(() => {                                          â”‚
â”‚   filterUsers();                                           â”‚
â”‚ }, [filterUsers]);                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Card Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Grid: 3 columns on large screens, responsive               â”‚
â”‚                                                             â”‚
â”‚ Single Card Structure:                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â”Œâ”€â”€â”                                          ğŸ”—    â”‚   â”‚
â”‚ â”‚ â”‚JSâ”‚  John Smith                          LinkedIn â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”˜  Director of Climate Policy                   â”‚   â”‚
â”‚ â”‚                                                     â”‚   â”‚
â”‚ â”‚ ğŸ¢ Department of State                             â”‚   â”‚
â”‚ â”‚ ğŸŒ United States                                   â”‚   â”‚
â”‚ â”‚                                                     â”‚   â”‚
â”‚ â”‚ [Government]  [Environmental Policy]               â”‚   â”‚
â”‚ â”‚                                                     â”‚   â”‚
â”‚ â”‚ "Experienced policy director specializing in..."   â”‚   â”‚
â”‚ â”‚                                                     â”‚   â”‚
â”‚ â”‚ Key Interests:                                     â”‚   â”‚
â”‚ â”‚ [Climate Finance] [Carbon Markets] [+2 more]       â”‚   â”‚
â”‚ â”‚                                                     â”‚   â”‚
â”‚ â”‚          [ğŸ“¤ Request Meeting]                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ Card Components:                                            â”‚
â”‚   - Avatar circle with initials                            â”‚
â”‚   - LinkedIn icon (if profile provided)                    â”‚
â”‚   - Name (bold, 18px)                                      â”‚
â”‚   - Job title (gray, 14px)                                 â”‚
â”‚   - Organization icon + name                               â”‚
â”‚   - Country/region icon + name                             â”‚
â”‚   - Representation type badge                              â”‚
â”‚   - Industry sector badge                                  â”‚
â”‚   - Biography (truncated to 3 lines)                       â”‚
â”‚   - Interest tags (show first 3, +N more)                  â”‚
â”‚   - Request Meeting button (blue, full width)              â”‚
â”‚                                                             â”‚
â”‚ Hover Effects:                                              â”‚
â”‚   - Card lifts slightly (transform: translateY(-4px))      â”‚
â”‚   - Shadow increases                                       â”‚
â”‚   - Button darkens                                         â”‚
â”‚                                                             â”‚
â”‚ Click Behavior:                                             â”‚
â”‚   - Click anywhere except button: View full profile        â”‚
â”‚   - Click button: Open meeting request dialog              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Meeting Request Dialog:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Trigger: Click "Request Meeting" on user card              â”‚
â”‚                                                             â”‚
â”‚ Dialog Content:                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  Request Meeting with John Smith                    â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Proposed Topic *                                   â”‚   â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚  â”‚ e.g., Climate Policy Coordination              â”‚ â”‚   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Duration (minutes)                                 â”‚   â”‚
â”‚ â”‚  [45 minutes â–¼]                                     â”‚   â”‚
â”‚ â”‚   Options: 30, 45, 60, 90                          â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Personal Message (Optional)                        â”‚   â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚  â”‚ Introduce yourself and explain why you'd       â”‚ â”‚   â”‚
â”‚ â”‚  â”‚ like to meet...                                 â”‚ â”‚   â”‚
â”‚ â”‚  â”‚                                                  â”‚ â”‚   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚              [Cancel]  [ğŸ“¤ Send Request]           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ State Management:                                           â”‚
â”‚   const [selectedUser, setSelectedUser] = useState(null);  â”‚
â”‚   const [meetingRequest, setMeetingRequest] = useState({   â”‚
â”‚     personal_message: '',                                  â”‚
â”‚     proposed_topic: '',                                    â”‚
â”‚     proposed_duration: 45                                  â”‚
â”‚   });                                                       â”‚
â”‚   const [sending, setSending] = useState(false);           â”‚
â”‚                                                             â”‚
â”‚ Validation:                                                 â”‚
â”‚   - proposed_topic required (min 5 chars)                  â”‚
â”‚   - duration must be selected                              â”‚
â”‚   - personal_message optional (max 500 chars)              â”‚
â”‚   - Send button disabled if validation fails               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Send Meeting Request Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const sendMeetingRequest = async () => {                   â”‚
â”‚   if (!selectedUser || !meetingRequest.proposed_topic) {   â”‚
â”‚     return; // Validation failed                           â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   setSending(true);                                        â”‚
â”‚   try {                                                     â”‚
â”‚     // 1. Generate unique meeting code                     â”‚
â”‚     const meetingCode =                                    â”‚
â”‚       Math.random()                                        â”‚
â”‚         .toString(36)                                      â”‚
â”‚         .substring(2, 10)                                  â”‚
â”‚         .toUpperCase();                                    â”‚
â”‚     // Example: "X7K9M2N4"                                 â”‚
â”‚                                                             â”‚
â”‚     // 2. Create meeting request                           â”‚
â”‚     const newRequest = await MeetingRequest.create({       â”‚
â”‚       requester_id: currentUser.id,                        â”‚
â”‚       recipient_ids: [selectedUser.id],                    â”‚
â”‚       meeting_type: 'single',                              â”‚
â”‚       personal_message: meetingRequest.personal_message,   â”‚
â”‚       proposed_topic: meetingRequest.proposed_topic,       â”‚
â”‚       proposed_duration: meetingRequest.proposed_duration, â”‚
â”‚       meeting_code: meetingCode,                           â”‚
â”‚       status: 'pending'                                    â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // 3. Create notification for recipient                â”‚
â”‚     const recipient = await User.get(selectedUser.id);     â”‚
â”‚                                                             â”‚
â”‚     // Check notification preferences                       â”‚
â”‚     if (recipient.notification_preferences                 â”‚
â”‚         ?.new_meeting_request !== false) {                 â”‚
â”‚                                                             â”‚
â”‚       await Notification.create({                          â”‚
â”‚         user_id: selectedUser.id,                          â”‚
â”‚         type: 'new_meeting_request',                       â”‚
â”‚         title: 'New Meeting Request',                      â”‚
â”‚         body: `You have received a new meeting request `+  â”‚
â”‚               `from ${currentUser.full_name}. `+           â”‚
â”‚               `Meeting Code: ${meetingCode}`,              â”‚
â”‚         link: createPageUrl("Meetings"),                   â”‚
â”‚         related_entity_id: newRequest.id,                  â”‚
â”‚         is_read: false                                     â”‚
â”‚       });                                                   â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // 4. Reset form and close dialog                      â”‚
â”‚     setSelectedUser(null);                                 â”‚
â”‚     setMeetingRequest({                                    â”‚
â”‚       personal_message: '',                                â”‚
â”‚       proposed_topic: '',                                  â”‚
â”‚       proposed_duration: 45                                â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // 5. Show success message (optional)                  â”‚
â”‚     // toast.success("Meeting request sent!");             â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error sending meeting request:", error);â”‚
â”‚     // toast.error("Failed to send request");              â”‚
â”‚   }                                                         â”‚
â”‚   setSending(false);                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Empty State:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ When filteredUsers.length === 0:                           â”‚
â”‚                                                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚                                     â”‚                â”‚
â”‚     â”‚          ğŸ‘¥ (large icon)            â”‚                â”‚
â”‚     â”‚                                     â”‚                â”‚
â”‚     â”‚      No users found                 â”‚                â”‚
â”‚     â”‚                                     â”‚                â”‚
â”‚     â”‚  Try adjusting your search          â”‚                â”‚
â”‚     â”‚  filters or check back later        â”‚                â”‚
â”‚     â”‚                                     â”‚                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Performance Optimizations:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Debounced Search:                                       â”‚
â”‚    - Wait 300ms after user stops typing before filtering  â”‚
â”‚    - Prevents excessive re-renders                         â”‚
â”‚                                                             â”‚
â”‚ 2. Memoized Filter Function:                               â”‚
â”‚    - useCallback for filterUsers                           â”‚
â”‚    - Only re-creates when dependencies change              â”‚
â”‚                                                             â”‚
â”‚ 3. Virtualized List (for large datasets):                 â”‚
â”‚    - Only render visible cards                             â”‚
â”‚    - Improves performance with 100+ users                  â”‚
â”‚                                                             â”‚
â”‚ 4. Image Lazy Loading:                                     â”‚
â”‚    - Profile images load only when in viewport            â”‚
â”‚    - Reduces initial page load time                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.3 Meeting Request Management
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MEETING MANAGEMENT COMPLETE FLOW                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Page: /meetings (Meetings.js)

Data Loading:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const loadData = async () => {                             â”‚
â”‚   setLoading(true);                                        â”‚
â”‚   try {                                                     â”‚
â”‚     // 1. Get current user                                 â”‚
â”‚     const user = await User.me();                          â”‚
â”‚     setCurrentUser(user);                                  â”‚
â”‚                                                             â”‚
â”‚     // 2. Fetch all data in parallel                       â”‚
â”‚     const [allUsers, allRequests, allBookings] =           â”‚
â”‚       await Promise.all([                                  â”‚
â”‚         User.list(),                                       â”‚
â”‚         MeetingRequest.list('-created_date'),              â”‚
â”‚         VenueBooking.list()                                â”‚
â”‚       ]);                                                   â”‚
â”‚                                                             â”‚
â”‚     // 3. Create user lookup map                           â”‚
â”‚     const userLookup = {};                                 â”‚
â”‚     allUsers.forEach(u => {                                â”‚
â”‚       userLookup[u.id] = u;                                â”‚
â”‚     });                                                     â”‚
â”‚     setUsers(userLookup);                                  â”‚
â”‚                                                             â”‚
â”‚     // 4. Categorize meeting requests                      â”‚
â”‚                                                             â”‚
â”‚     // Pending: Requests WHERE                             â”‚
â”‚     //   - I am a recipient                                â”‚
â”‚     //   - Status is 'pending'                             â”‚
â”‚     const pending = allRequests.filter(req =>              â”‚
â”‚       (req.recipient_ids || []).includes(user.id) &&       â”‚
â”‚       req.status === 'pending'                             â”‚
â”‚     );                                                      â”‚
â”‚     setPendingRequests(pending);                           â”‚
â”‚                                                             â”‚
â”‚     // History: Requests WHERE                             â”‚
â”‚     //   - I am involved (requester or recipient)          â”‚
â”‚     //   - Status is NOT 'accepted'                        â”‚
â”‚     //   - NOT a pending incoming request                  â”‚
â”‚     const history = allRequests.filter(req => {            â”‚
â”‚       const isMyRequest =                                  â”‚
â”‚         req.requester_id === user.id ||                    â”‚
â”‚         (req.recipient_ids || []).includes(user.id);       â”‚
â”‚       const isNotAccepted = req.status !== 'accepted';     â”‚
â”‚       const isNotPendingIncoming = !(                      â”‚
â”‚         (req.recipient_ids || []).includes(user.id) &&     â”‚
â”‚         req.status === 'pending'                           â”‚
â”‚       );                                                    â”‚
â”‚       return isMyRequest && isNotAccepted &&               â”‚
â”‚              isNotPendingIncoming;                         â”‚
â”‚     });                                                     â”‚
â”‚     setRequestHistory(history);                            â”‚
â”‚                                                             â”‚
â”‚     // Accepted: Requests WHERE                            â”‚
â”‚     //   - I am involved                                   â”‚
â”‚     //   - Status is 'accepted'                            â”‚
â”‚     const accepted = allRequests.filter(req =>             â”‚
â”‚       ((req.recipient_ids || []).includes(user.id) ||      â”‚
â”‚        req.requester_id === user.id) &&                    â”‚
â”‚       req.status === 'accepted'                            â”‚
â”‚     );                                                      â”‚
â”‚     setAcceptedMeetings(accepted);                         â”‚
â”‚                                                             â”‚
â”‚     setBookings(allBookings);                              â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error loading meetings:", error);       â”‚
â”‚   }                                                         â”‚
â”‚   setLoading(false);                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tab Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <Tabs defaultValue="pending">                              â”‚
â”‚   <TabsList>                                               â”‚
â”‚     <TabsTrigger value="pending">                          â”‚
â”‚       Pending Approval ({pendingRequests.length})          â”‚
â”‚       {pendingRequests.length > 0 && (                     â”‚
â”‚         <div className="animate-pulse red-dot" />          â”‚
â”‚       )}                                                    â”‚
â”‚     </TabsTrigger>                                         â”‚
â”‚                                                             â”‚
â”‚     <TabsTrigger value="history">                          â”‚
â”‚       Request History ({requestHistory.length})            â”‚
â”‚     </TabsTrigger>                                         â”‚
â”‚                                                             â”‚
â”‚     <TabsTrigger value="accepted">                         â”‚
â”‚       Accepted Meetings ({acceptedMeetings.length})        â”‚
â”‚     </TabsTrigger>                                         â”‚
â”‚   </TabsList>                                              â”‚
â”‚                                                             â”‚
â”‚   <TabsContent value="pending">                            â”‚
â”‚     {/* Pending requests content */}                       â”‚
â”‚   </TabsContent>                                           â”‚
â”‚                                                             â”‚
â”‚   <TabsContent value="history">                            â”‚
â”‚     {/* Request history content */}                        â”‚
â”‚   </TabsContent>                                           â”‚
â”‚                                                             â”‚
â”‚   <TabsContent value="accepted">                           â”‚
â”‚     {/* Accepted meetings content */}                      â”‚
â”‚   </TabsContent>                                           â”‚
â”‚ </Tabs>                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAB 1: Pending Approval
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header Alert (if requests exist):                          â”‚
â”‚   âš ï¸ Action Required                                       â”‚
â”‚   You have {count} meeting request(s) awaiting your       â”‚
â”‚   response. Please review and approve or decline each     â”‚
â”‚   request below.                                           â”‚
â”‚                                                             â”‚
â”‚ Meeting Request Card Layout:                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”                                                  â”‚  â”‚
â”‚ â”‚ â”‚JSâ”‚  Meeting Request from John Smith                â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”˜  Director of Policy at Department of State     â”‚  â”‚
â”‚ â”‚       ğŸŒ United States                               â”‚  â”‚
â”‚ â”‚       ğŸ“… Received Jan 15, 2025 at 10:30 AM          â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚ â”‚ ğŸ“‹ Proposed Topic                               â”‚  â”‚  â”‚
â”‚ â”‚ â”‚ Bilateral trade agreement discussion            â”‚  â”‚  â”‚
â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚ â”‚ â”‚ â±ï¸ Duration: 45 minutes                         â”‚  â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚ ğŸ’¬ Personal Message                                 â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚ â”‚ "I'd like to discuss potential collaboration    â”‚  â”‚  â”‚
â”‚ â”‚ â”‚  on renewable energy trade..."                  â”‚  â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚              [âœ–ï¸ Decline]  [âœ… Accept Meeting]      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Empty State (no pending requests):                         â”‚
â”‚   âœ… All caught up!                                        â”‚
â”‚   You don't have any pending meeting requests              â”‚
â”‚   New requests from other delegates will appear here       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Accept/Decline Actions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleRequestResponse = async (requestId, response) â”‚
â”‚   try {                                                     â”‚
â”‚     // 1. Get full request details                         â”‚
â”‚     const request = await MeetingRequest.get(requestId);   â”‚
â”‚                                                             â”‚
â”‚     // 2. Update request status                            â”‚
â”‚     await MeetingRequest.update(requestId, {               â”‚
â”‚       status: response  // 'accepted' or 'declined'        â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // 3. Create notification for requester                â”‚
â”‚     if (request && request.requester_id) {                 â”‚
â”‚       const requester =                                    â”‚
â”‚         users[request.requester_id] ||                     â”‚
â”‚         await User.get(request.requester_id);              â”‚
â”‚                                                             â”‚
â”‚       // Check notification preferences                     â”‚
â”‚       if (requester.notification_preferences               â”‚
â”‚           ?.request_status_update !== false) {             â”‚
â”‚                                                             â”‚
â”‚         await Notification.create({                        â”‚
â”‚           user_id: request.requester_id,                   â”‚
â”‚           type: response === 'accepted' ?                  â”‚
â”‚                 'request_accepted' :                       â”‚
â”‚                 'request_declined',                        â”‚
â”‚           title: `Meeting Request ${                       â”‚
â”‚             response === 'accepted' ?                      â”‚
â”‚             'Accepted' : 'Declined'                        â”‚
â”‚           }`,                                              â”‚
â”‚           body: `${currentUser.full_name} has ${response}`+â”‚
â”‚                 ` your meeting request regarding "`+       â”‚
â”‚                 `${request.proposed_topic}".`,             â”‚
â”‚           link: createPageUrl("Meetings"),                 â”‚
â”‚           related_entity_id: requestId,                    â”‚
â”‚           is_read: false                                   â”‚
â”‚         });                                                 â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // 4. Reload data to update UI                         â”‚
â”‚     await loadData();                                      â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error updating request:", error);       â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAB 2: Request History
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shows all meeting requests that are NOT:                   â”‚
â”‚   - Pending incoming requests (shown in Pending tab)       â”‚
â”‚   - Accepted requests (shown in Accepted tab)              â”‚
â”‚                                                             â”‚
â”‚ Includes:                                                   â”‚
â”‚   âœ… Sent requests (pending response)                      â”‚
â”‚   âœ… Declined requests (incoming or outgoing)              â”‚
â”‚   âœ… Cancelled meetings                                    â”‚
â”‚                                                             â”‚
â”‚ Card Layout:                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”                                                  â”‚  â”‚
â”‚ â”‚ â”‚MAâ”‚  To: Maria Anderson                             â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”˜  Climate Policy Director at UN                  â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚ ğŸ“‹ Bilateral trade agreement discussion              â”‚  â”‚
â”‚ â”‚ â±ï¸ 45 minutes â€¢ Sent Jan 15, 2025                   â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚                            [Status: Pending] ğŸŸ       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Status Badge Colors:                                       â”‚
â”‚   - pending: ğŸŸ  Orange                                     â”‚
â”‚   - declined: ğŸ”´ Red                                       â”‚
â”‚   - cancelled: âš« Gray                                     â”‚
â”‚                                                             â”‚
â”‚ Empty State:                                                â”‚
â”‚   ğŸ“… No request history                                    â”‚
â”‚   Sent, declined, and cancelled requests will appear here  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TAB 3: Accepted Meetings
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shows all accepted meeting requests                        â”‚
â”‚                                                             â”‚
â”‚ Card Layout:                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ â”Œâ”€â”€â”                                                  â”‚  â”‚
â”‚ â”‚ â”‚JDâ”‚  Meeting with John Doe                          â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”˜  Senior Advisor at World Bank                   â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚ ğŸ“‹ Climate Finance Strategy                          â”‚  â”‚
â”‚ â”‚ â±ï¸ 45 minutes â€¢ Code: X7K9M2N4                      â”‚  â”‚
â”‚ â”‚ âœ… Confirmed Jan 15, 2025                            â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚ ğŸ“ Booked: Conference Room A at 10:00 AM            â”‚  â”‚
â”‚ â”‚    (if venue booked)                                 â”‚  â”‚
â”‚ â”‚                                                      â”‚  â”‚
â”‚ â”‚ [âœï¸ Modify] [ğŸ’¬ Chat] [ğŸ“… Book Venue] [ğŸ—‘ï¸ Cancel]   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Action Buttons:                                             â”‚
â”‚                                                             â”‚
â”‚ 1. Modify Button:                                          â”‚
â”‚    - Opens dialog to edit meeting details                  â”‚
â”‚    - Can change: topic, duration, personal message         â”‚
â”‚    - Notifies other participants of changes                â”‚
â”‚    - If duration changes, clears venue booking             â”‚
â”‚                                                             â”‚
â”‚ 2. Chat Button:                                            â”‚
â”‚    - Only for single-user meetings                         â”‚
â”‚    - Links to: /chat?request={meeting_id}                 â”‚
â”‚    - Opens chat interface                                  â”‚
â”‚                                                             â”‚
â”‚ 3. Book Venue Button:                                      â”‚
â”‚    - Opens booking dialog                                  â”‚
â”‚    - Shows available rooms and time slots                  â”‚
â”‚    - Creates venue booking                                 â”‚
â”‚    - Changes to "View Booking" if already booked           â”‚
â”‚                                                             â”‚
â”‚ 4. Cancel Button:                                          â”‚
â”‚    - Opens confirmation dialog                             â”‚
â”‚    - Explains consequences (venue cancellation)            â”‚
â”‚    - Updates meeting status to 'cancelled'                 â”‚
â”‚    - Cancels any associated venue booking                  â”‚
â”‚    - Notifies all participants                             â”‚
â”‚                                                             â”‚
â”‚ Empty State:                                                â”‚
â”‚   âœ“ No accepted meetings                                   â”‚
â”‚   Accepted meeting requests will appear here               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Modify Meeting Dialog:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Trigger: Click "Modify" on accepted meeting card           â”‚
â”‚                                                             â”‚
â”‚ Dialog Content:                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  Modify Meeting Details                             â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Meeting Code: X7K9M2N4                             â”‚   â”‚
â”‚ â”‚  (blue info box, read-only)                         â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  âš ï¸ Alert:                                           â”‚   â”‚
â”‚ â”‚  Changing the duration will cancel any existing     â”‚   â”‚
â”‚ â”‚  venue booking for this meeting.                    â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Meeting Topic *                                    â”‚   â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚  â”‚ Climate Finance Strategy                       â”‚ â”‚   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Duration (minutes)                                 â”‚   â”‚
â”‚ â”‚  [45 minutes â–¼]                                     â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Personal Message (Optional)                        â”‚   â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚  â”‚ Additional notes about the meeting...          â”‚ â”‚   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚              [Cancel]  [Save Changes]               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ State:                                                      â”‚
â”‚   const [editingMeeting, setEditingMeeting] =              â”‚
â”‚     useState(null);                                        â”‚
â”‚   const [modifyForm, setModifyForm] = useState({           â”‚
â”‚     proposed_topic: '',                                    â”‚
â”‚     proposed_duration: 45,                                 â”‚
â”‚     personal_message: ''                                   â”‚
â”‚   });                                                       â”‚
â”‚   const [saving, setSaving] = useState(false);             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Save Modification Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleSaveModification = async () => {               â”‚
â”‚   if (!editingMeeting || !modifyForm.proposed_topic) {     â”‚
â”‚     return;                                                â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   setSaving(true);                                         â”‚
â”‚   try {                                                     â”‚
â”‚     const originalDuration =                               â”‚
â”‚       editingMeeting.proposed_duration;                    â”‚
â”‚     const newDuration = modifyForm.proposed_duration;      â”‚
â”‚     const durationChanged = originalDuration !== newDuration;â”‚
â”‚                                                             â”‚
â”‚     let venueCleared = false;                              â”‚
â”‚     let associatedBooking = null;                          â”‚
â”‚                                                             â”‚
â”‚     // If duration changing, find and cancel venue booking â”‚
â”‚     if (durationChanged) {                                 â”‚
â”‚       associatedBooking = bookings.find(booking =>         â”‚
â”‚         booking.meeting_request_id === editingMeeting.id &&â”‚
â”‚         booking.status === 'active'                        â”‚
â”‚       );                                                    â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Update meeting request                              â”‚
â”‚     await MeetingRequest.update(editingMeeting.id, {       â”‚
â”‚       proposed_topic: modifyForm.proposed_topic,           â”‚
â”‚       proposed_duration: newDuration,                      â”‚
â”‚       personal_message: modifyForm.personal_message,       â”‚
â”‚       ...(durationChanged && {                             â”‚
â”‚         venue_booking_id: null  // Clear if duration changedâ”‚
â”‚       })                                                    â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Cancel associated booking if duration changed        â”‚
â”‚     if (associatedBooking) {                               â”‚
â”‚       await VenueBooking.update(associatedBooking.id, {    â”‚
â”‚         status: 'cancelled'                                â”‚
â”‚       });                                                   â”‚
â”‚       venueCleared = true;                                 â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Notify participants                                 â”‚
â”‚     const participantsToNotify = [                         â”‚
â”‚       editingMeeting.requester_id,                         â”‚
â”‚       ...(editingMeeting.recipient_ids || [])              â”‚
â”‚     ].filter(id => id !== currentUser.id);                 â”‚
â”‚                                                             â”‚
â”‚     for (const participantId of participantsToNotify) {    â”‚
â”‚       const otherUser =                                    â”‚
â”‚         users[participantId] ||                            â”‚
â”‚         await User.get(participantId);                     â”‚
â”‚                                                             â”‚
â”‚       if (otherUser?.notification_preferences              â”‚
â”‚           ?.request_status_update !== false) {             â”‚
â”‚                                                             â”‚
â”‚         await Notification.create({                        â”‚
â”‚           user_id: participantId,                          â”‚
â”‚           type: 'meeting_updated',                         â”‚
â”‚           title: 'Meeting Details Updated',                â”‚
â”‚           body: `${currentUser.full_name} has updated `+   â”‚
â”‚                 `the details for your meeting "`+          â”‚
â”‚                 `${modifyForm.proposed_topic}". `+         â”‚
â”‚                 (venueCleared ?                            â”‚
â”‚                   'The venue has been cleared and needs '+ â”‚
â”‚                   'to be re-booked.' : ''),                â”‚
â”‚           link: createPageUrl("Meetings"),                 â”‚
â”‚           related_entity_id: editingMeeting.id             â”‚
â”‚         });                                                 â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Close dialog and reload data                        â”‚
â”‚     setEditingMeeting(null);                               â”‚
â”‚     await loadData();                                      â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error updating meeting:", error);       â”‚
â”‚   }                                                         â”‚
â”‚   setSaving(false);                                        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cancel Meeting Dialog:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Trigger: Click "Cancel" button on accepted meeting         â”‚
â”‚                                                             â”‚
â”‚ Confirmation Dialog:                                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  ğŸ—‘ï¸ Cancel Meeting                                   â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Are you sure you want to cancel this meeting?      â”‚   â”‚
â”‚ â”‚  This action cannot be undone.                      â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Meeting Details:                                   â”‚   â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚ â”‚  â”‚ Meeting: Climate Finance Strategy             â”‚ â”‚   â”‚
â”‚ â”‚  â”‚ With: John Doe                                 â”‚ â”‚   â”‚
â”‚ â”‚  â”‚ Code: X7K9M2N4                                 â”‚ â”‚   â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  âš ï¸ Warning (if venue booked):                      â”‚   â”‚
â”‚ â”‚  This will also cancel the venue booking for       â”‚   â”‚
â”‚ â”‚  Conference Room A.                                â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  â„¹ï¸ Note:                                            â”‚   â”‚
â”‚ â”‚  All participants will be notified about the       â”‚   â”‚
â”‚ â”‚  cancellation.                                      â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚        [Keep Meeting]  [ğŸ—‘ï¸ Cancel Meeting]         â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚ State:                                                      â”‚
â”‚   const [cancellingMeeting, setCancellingMeeting] =        â”‚
â”‚     useState(null);                                        â”‚
â”‚   const [cancelling, setCancelling] = useState(false);     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cancel Meeting Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleCancelMeeting = async (meeting) => {           â”‚
â”‚   setCancelling(true);                                     â”‚
â”‚   try {                                                     â”‚
â”‚     // 1. Update meeting status to cancelled               â”‚
â”‚     await MeetingRequest.update(meeting.id, {              â”‚
â”‚       status: 'cancelled'                                  â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // 2. Cancel any associated venue booking              â”‚
â”‚     const associatedBooking = bookings.find(booking =>     â”‚
â”‚       booking.meeting_request_id === meeting.id &&         â”‚
â”‚       booking.status === 'active'                          â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     if (associatedBooking) {                               â”‚
â”‚       await VenueBooking.update(associatedBooking.id, {    â”‚
â”‚         status: 'cancelled'                                â”‚
â”‚       });                                                   â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // 3. Notify all participants                          â”‚
â”‚     const participantsToNotify = [                         â”‚
â”‚       meeting.requester_id,                                â”‚
â”‚       ...(meeting.recipient_ids || [])                     â”‚
â”‚     ].filter(id => id !== currentUser.id);                 â”‚
â”‚                                                             â”‚
â”‚     for (const participantId of participantsToNotify) {    â”‚
â”‚       const otherUser =                                    â”‚
â”‚         users[participantId] ||                            â”‚
â”‚         await User.get(participantId);                     â”‚
â”‚                                                             â”‚
â”‚       if (otherUser?.notification_preferences              â”‚
â”‚           ?.request_status_update !== false) {             â”‚
â”‚                                                             â”‚
â”‚         await Notification.create({                        â”‚
â”‚           user_id: participantId,                          â”‚
â”‚           type: 'request_status_update',                   â”‚
â”‚           title: 'Meeting Cancelled',                      â”‚
â”‚           body: `${currentUser.full_name} has cancelled `+ â”‚
â”‚                 `your meeting "${meeting.proposed_topic}"`+â”‚
â”‚                 ` (Code: ${meeting.meeting_code}).`,       â”‚
â”‚           link: createPageUrl("Meetings"),                 â”‚
â”‚           related_entity_id: meeting.id                    â”‚
â”‚         });                                                 â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // 4. Close dialog and reload data                     â”‚
â”‚     setCancellingMeeting(null);                            â”‚
â”‚     await loadData();                                      â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error cancelling meeting:", error);     â”‚
â”‚   }                                                         â”‚
â”‚   setCancelling(false);                                    â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Request Meeting Dialog (from Meetings page):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: RequestMeetingDialog                            â”‚
â”‚ Location: components/meetings/RequestMeetingDialog.jsx     â”‚
â”‚                                                             â”‚
â”‚ Trigger: "Request Meeting" button in page header           â”‚
â”‚                                                             â”‚
â”‚ Features:                                                   â”‚
â”‚   - Choose meeting type (single or multi)                  â”‚
â”‚   - Select one or multiple participants                    â”‚
â”‚   - Enter topic and duration                               â”‚
â”‚   - Add personal message                                   â”‚
â”‚   - Send to all recipients at once                         â”‚
â”‚                                                             â”‚
â”‚ See detailed component specification in Section 7.4        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Due to length constraints, shall I continue with:

Section 7.4: Venue Booking System (complete workflow)
Section 7.5: Chat/Messaging System
Section 7.6: Notification System
Section 7.7: Schedule Management
Or would you like me to jump to a specific section like Admin Functionalities, UI/UX Specifications, or User Flows?

37 minutes ago
please complete the description

35 minutes ago
â€¢
see context
Revert this
Base44 AI
Base44

Thought for 3s
UNIConnect - Complete Project Documentation (Continued Part 2)
7.4 Venue Booking System (Complete)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VENUE BOOKING SYSTEM COMPLETE FLOW              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Overview:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ The venue booking system allows users to:                  â”‚
â”‚   1. View all available meeting rooms                      â”‚
â”‚   2. See real-time availability in time-slot grid          â”‚
â”‚   3. Book rooms for accepted meetings                      â”‚
â”‚   4. View their schedule of bookings                       â”‚
â”‚                                                             â”‚
â”‚ Admin-specific features:                                    â”‚
â”‚   - Manage rooms (create, edit, delete)                    â”‚
â”‚   - Create private bookings (non-meeting related)          â”‚
â”‚   - View all bookings across all users                     â”‚
â”‚   - Generate usage analytics                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATABASE ENTITIES:

VenueRoom Entity:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                                                           â”‚
â”‚   "name": "string",              // e.g., "Conference Room A"â”‚
â”‚   "type": "small" | "large",     // Room size category    â”‚
â”‚   "capacity": number,            // Max occupancy          â”‚
â”‚   "floor": number,               // Floor level            â”‚
â”‚   "location": "string",          // Optional: Wing/Section â”‚
â”‚   "contact": "string",           // Optional: Contact info â”‚
â”‚   "description": "string",       // Optional: Details      â”‚
â”‚   "equipment": ["string"],       // ["Wifi", "Projector"]  â”‚
â”‚   "is_active": boolean           // Available for booking? â”‚
â”‚ }                                                           â”‚
â”‚                                                             â”‚
â”‚ Built-in fields (automatic):                               â”‚
â”‚   - id                                                      â”‚
â”‚   - created_date                                            â”‚
â”‚   - updated_date                                            â”‚
â”‚   - created_by                                              â”‚
â”‚                                                             â”‚
â”‚ RLS Rules: Anyone can read, only admins can write          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VenueBooking Entity:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                                                           â”‚
â”‚   "room_id": "string",           // ID of VenueRoom        â”‚
â”‚   "room_name": "string",         // Snapshot of room name  â”‚
â”‚   "room_type": "small"|"large",  // Snapshot of room type  â”‚
â”‚   "capacity": number,            // Snapshot of capacity   â”‚
â”‚   "floor_level": number,         // Snapshot of floor      â”‚
â”‚   "equipment": ["string"],       // Snapshot of equipment  â”‚
â”‚   "booked_by": "string",         // User ID who booked     â”‚
â”‚   "booking_type": "meeting"|"private", // Type of booking  â”‚
â”‚   "meeting_request_id": "string",// Associated meeting ID  â”‚
â”‚   "private_meeting_topic": "string", // Topic (if private) â”‚
â”‚   "start_time": "datetime",      // Booking start          â”‚
â”‚   "end_time": "datetime",        // Booking end            â”‚
â”‚   "status": "active"|"completed"|"cancelled" // Status     â”‚
â”‚ }                                                           â”‚
â”‚                                                             â”‚
â”‚ RLS Rules:                                                  â”‚
â”‚   - Users can read their own bookings                      â”‚
â”‚   - Users can read bookings for their meetings             â”‚
â”‚   - Admins can read all bookings                           â”‚
â”‚   - Only booker or admin can cancel                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PAGE 1: VENUES SCHEDULE (Public View)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File: pages/Venues.js                                       â”‚
â”‚ Route: /venues                                              â”‚
â”‚ Access: All authenticated users                            â”‚
â”‚                                                             â”‚
â”‚ Purpose:                                                    â”‚
â”‚   - View all venue bookings in calendar format             â”‚
â”‚   - See room availability                                  â”‚
â”‚   - Quick access to book venues for meetings               â”‚
â”‚   - Filter by date                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Venues Page Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Header                                                â”‚  â”‚
â”‚ â”‚ ğŸ“… Venue Schedule                                     â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ [â—€ Previous Day] January 15, 2025 [Next Day â–¶]      â”‚  â”‚
â”‚ â”‚                                        [ğŸ”„ Refresh]   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ScheduleView Component (Time-slot Grid)              â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Time â†’  08:00  08:30  09:00  09:30  10:00  10:30    â”‚  â”‚
â”‚ â”‚ â†“ Room                                                â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Conf A  [Available][â–ˆâ–ˆâ–ˆâ–ˆ Booked â–ˆâ–ˆâ–ˆâ–ˆ][Available]     â”‚  â”‚
â”‚ â”‚         John Doe - Climate Policy                     â”‚  â”‚
â”‚ â”‚         09:00 - 10:30                                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Conf B  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Booked â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ][Available]        â”‚  â”‚
â”‚ â”‚         Maria Silva - Trade Discussion                â”‚  â”‚
â”‚ â”‚         08:00 - 10:00                                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Meet C  [Available][Available][Available]            â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ ...     (More rooms)                                  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Legend:                                               â”‚  â”‚
â”‚ â”‚ [     ] Available  [â–ˆâ–ˆâ–ˆâ–ˆ] Booked  [////] Your Bookingâ”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Data Loading (Venues Page):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const loadData = async () => {                             â”‚
â”‚   setLoading(true);                                        â”‚
â”‚   try {                                                     â”‚
â”‚     const user = await User.me();                          â”‚
â”‚     setCurrentUser(user);                                  â”‚
â”‚                                                             â”‚
â”‚     // Fetch all necessary data                            â”‚
â”‚     const [allUsers, allRooms, allBookings, allMeetings] = â”‚
â”‚       await Promise.all([                                  â”‚
â”‚         User.list(),                                       â”‚
â”‚         VenueRoom.list(),                                  â”‚
â”‚         VenueBooking.list('-created_date'),                â”‚
â”‚         MeetingRequest.filter({status: 'accepted'})        â”‚
â”‚       ]);                                                   â”‚
â”‚                                                             â”‚
â”‚     // Create user lookup                                  â”‚
â”‚     const userLookup = {};                                 â”‚
â”‚     allUsers.forEach(u => userLookup[u.id] = u);           â”‚
â”‚     setUsers(userLookup);                                  â”‚
â”‚                                                             â”‚
â”‚     // Filter active rooms only                            â”‚
â”‚     const activeRooms = allRooms.filter(r => r.is_active); â”‚
â”‚     setRooms(activeRooms);                                 â”‚
â”‚                                                             â”‚
â”‚     setBookings(allBookings);                              â”‚
â”‚     setAcceptedMeetings(allMeetings);                      â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error loading venues:", error);         â”‚
â”‚   }                                                         â”‚
â”‚   setLoading(false);                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ScheduleView Component (Detailed):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File: components/venues/ScheduleView.jsx                    â”‚
â”‚                                                             â”‚
â”‚ Props:                                                      â”‚
â”‚   - rooms: VenueRoom[]                                     â”‚
â”‚   - bookings: VenueBooking[]                               â”‚
â”‚   - selectedDate: string (YYYY-MM-DD)                      â”‚
â”‚   - users: Record<string, User>                            â”‚
â”‚   - currentUser: User                                      â”‚
â”‚   - acceptedMeetings?: MeetingRequest[]                    â”‚
â”‚   - onTimeSlotClick?: (room, time) => void                 â”‚
â”‚   - isRoomAvailable?: (room, time) => boolean              â”‚
â”‚   - mode?: 'view' | 'book'                                 â”‚
â”‚                                                             â”‚
â”‚ Configuration:                                              â”‚
â”‚   START_HOUR = 8   // 8:00 AM                              â”‚
â”‚   END_HOUR = 20    // 8:00 PM                              â”‚
â”‚   SLOT_DURATION = 30  // minutes                           â”‚
â”‚   TOTAL_SLOTS = 24 // (12 hours Ã— 2)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Generate Time Slots:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const generateTimeSlots = () => {                          â”‚
â”‚   const slots = [];                                        â”‚
â”‚   for (let hour = START_HOUR; hour < END_HOUR; hour++) {   â”‚
â”‚     for (let minute of [0, 30]) {                          â”‚
â”‚       const timeString = `${hour.toString()                â”‚
â”‚         .padStart(2, '0')}:${minute.toString()             â”‚
â”‚         .padStart(2, '0')}`;                               â”‚
â”‚       slots.push({                                         â”‚
â”‚         time: timeString,                                  â”‚
â”‚         display: format(                                   â”‚
â”‚           new Date(`2000-01-01T${timeString}`),            â”‚
â”‚           'h:mm a'                                         â”‚
â”‚         )                                                   â”‚
â”‚       });                                                   â”‚
â”‚     }                                                       â”‚
â”‚   }                                                         â”‚
â”‚   return slots;                                            â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ Result: [                                                   â”‚
â”‚   {time: '08:00', display: '8:00 AM'},                     â”‚
â”‚   {time: '08:30', display: '8:30 AM'},                     â”‚
â”‚   {time: '09:00', display: '9:00 AM'},                     â”‚
â”‚   ...                                                       â”‚
â”‚   {time: '19:30', display: '7:30 PM'}                      â”‚
â”‚ ]                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Check Slot Availability:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const isSlotBooked = (room, slotTime) => {                 â”‚
â”‚   // Convert slot time to datetime                         â”‚
â”‚   const slotStart = new Date(                              â”‚
â”‚     `${selectedDate}T${slotTime}:00`                       â”‚
â”‚   );                                                        â”‚
â”‚   const slotEnd = new Date(                                â”‚
â”‚     slotStart.getTime() + SLOT_DURATION * 60 * 1000        â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   // Check if any booking overlaps this slot               â”‚
â”‚   return bookings.some(booking => {                        â”‚
â”‚     // Filter by room and active status                    â”‚
â”‚     if (booking.room_id !== room.id) return false;         â”‚
â”‚     if (booking.status !== 'active') return false;         â”‚
â”‚                                                             â”‚
â”‚     const bookingStart = new Date(booking.start_time);     â”‚
â”‚     const bookingEnd = new Date(booking.end_time);         â”‚
â”‚                                                             â”‚
â”‚     // Check for time overlap                              â”‚
â”‚     const startsInSlot =                                   â”‚
â”‚       bookingStart >= slotStart && bookingStart < slotEnd; â”‚
â”‚     const endsInSlot =                                     â”‚
â”‚       bookingEnd > slotStart && bookingEnd <= slotEnd;     â”‚
â”‚     const spansSlot =                                      â”‚
â”‚       bookingStart <= slotStart && bookingEnd >= slotEnd;  â”‚
â”‚                                                             â”‚
â”‚     return startsInSlot || endsInSlot || spansSlot;        â”‚
â”‚   });                                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Get Booking for Slot:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const getBookingForSlot = (room, slotTime) => {            â”‚
â”‚   const slotStart = new Date(                              â”‚
â”‚     `${selectedDate}T${slotTime}:00`                       â”‚
â”‚   );                                                        â”‚
â”‚   const slotEnd = new Date(                                â”‚
â”‚     slotStart.getTime() + SLOT_DURATION * 60 * 1000        â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   return bookings.find(booking => {                        â”‚
â”‚     if (booking.room_id !== room.id) return false;         â”‚
â”‚     if (booking.status !== 'active') return false;         â”‚
â”‚                                                             â”‚
â”‚     const bookingStart = new Date(booking.start_time);     â”‚
â”‚     const bookingEnd = new Date(booking.end_time);         â”‚
â”‚                                                             â”‚
â”‚     // Return booking if slot falls within its timerange   â”‚
â”‚     return slotStart >= bookingStart &&                    â”‚
â”‚            slotStart < bookingEnd;                         â”‚
â”‚   });                                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Calculate Booking Span:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const calculateBookingSpan = (booking) => {                â”‚
â”‚   const start = new Date(booking.start_time);              â”‚
â”‚   const end = new Date(booking.end_time);                  â”‚
â”‚                                                             â”‚
â”‚   // Calculate duration in minutes                         â”‚
â”‚   const durationMinutes = (end - start) / (1000 * 60);     â”‚
â”‚                                                             â”‚
â”‚   // Convert to number of slots                            â”‚
â”‚   const numSlots = Math.ceil(durationMinutes / SLOT_DURATION);â”‚
â”‚                                                             â”‚
â”‚   return numSlots;                                         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ Example:                                                    â”‚
â”‚   Booking: 09:00 - 10:30 (90 minutes)                      â”‚
â”‚   Result: Math.ceil(90 / 30) = 3 slots                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Grid Rendering Logic:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <div className="schedule-grid">                            â”‚
â”‚   {/* Header Row - Time Labels */}                         â”‚
â”‚   <div className="time-header">                            â”‚
â”‚     <div className="room-label-cell">Rooms</div>           â”‚
â”‚     {timeSlots.map(slot => (                               â”‚
â”‚       <div key={slot.time} className="time-cell">          â”‚
â”‚         {slot.display}                                     â”‚
â”‚       </div>                                               â”‚
â”‚     ))}                                                     â”‚
â”‚   </div>                                                    â”‚
â”‚                                                             â”‚
â”‚   {/* Room Rows */}                                        â”‚
â”‚   {rooms.map(room => {                                     â”‚
â”‚     // Track which slots are already rendered              â”‚
â”‚     const renderedSlots = new Set();                       â”‚
â”‚                                                             â”‚
â”‚     return (                                               â”‚
â”‚       <div key={room.id} className="room-row">            â”‚
â”‚         {/* Room Label */}                                 â”‚
â”‚         <div className="room-label">                       â”‚
â”‚           <div className="room-name">{room.name}</div>     â”‚
â”‚           <div className="room-info">                      â”‚
â”‚             Floor {room.floor} â€¢ {room.capacity} seats     â”‚
â”‚           </div>                                           â”‚
â”‚         </div>                                             â”‚
â”‚                                                             â”‚
â”‚         {/* Time Slots */}                                 â”‚
â”‚         <div className="slots-container">                  â”‚
â”‚           {timeSlots.map(slot => {                         â”‚
â”‚             // Skip if already rendered as part of span    â”‚
â”‚             if (renderedSlots.has(slot.time)) {            â”‚
â”‚               return null;                                 â”‚
â”‚             }                                               â”‚
â”‚                                                             â”‚
â”‚             const booking = getBookingForSlot(             â”‚
â”‚               room,                                        â”‚
â”‚               slot.time                                    â”‚
â”‚             );                                              â”‚
â”‚                                                             â”‚
â”‚             if (booking) {                                 â”‚
â”‚               // Check if this is the start of booking     â”‚
â”‚               const bookingStart = format(                 â”‚
â”‚                 new Date(booking.start_time),              â”‚
â”‚                 'HH:mm'                                    â”‚
â”‚               );                                            â”‚
â”‚                                                             â”‚
â”‚               if (bookingStart === slot.time) {            â”‚
â”‚                 // Render booking block                    â”‚
â”‚                 const span = calculateBookingSpan(booking);â”‚
â”‚                                                             â”‚
â”‚                 // Mark slots as rendered                  â”‚
â”‚                 for (let i = 0; i < span; i++) {           â”‚
â”‚                   const slotIndex =                        â”‚
â”‚                     timeSlots.findIndex(                   â”‚
â”‚                       s => s.time === slot.time            â”‚
â”‚                     ) + i;                                 â”‚
â”‚                   if (slotIndex < timeSlots.length) {      â”‚
â”‚                     renderedSlots.add(                     â”‚
â”‚                       timeSlots[slotIndex].time            â”‚
â”‚                     );                                      â”‚
â”‚                   }                                         â”‚
â”‚                 }                                           â”‚
â”‚                                                             â”‚
â”‚                 return (                                   â”‚
â”‚                   <BookingBlock                            â”‚
â”‚                     key={`${room.id}-${slot.time}`}        â”‚
â”‚                     booking={booking}                      â”‚
â”‚                     span={span}                            â”‚
â”‚                     user={users[booking.booked_by]}        â”‚
â”‚                     isOwnBooking={                         â”‚
â”‚                       booking.booked_by === currentUser?.idâ”‚
â”‚                     }                                       â”‚
â”‚                     onClick={() =>                         â”‚
â”‚                       handleBookingClick(booking)          â”‚
â”‚                     }                                       â”‚
â”‚                   />                                        â”‚
â”‚                 );                                          â”‚
â”‚               } else {                                     â”‚
â”‚                 // Part of existing booking, don't render  â”‚
â”‚                 return null;                               â”‚
â”‚               }                                             â”‚
â”‚             } else {                                       â”‚
â”‚               // Available slot                            â”‚
â”‚               return (                                     â”‚
â”‚                 <div                                       â”‚
â”‚                   key={`${room.id}-${slot.time}`}          â”‚
â”‚                   className="available-slot"               â”‚
â”‚                   onClick={() =>                           â”‚
â”‚                     onTimeSlotClick?.(room, slot.time)     â”‚
â”‚                   }                                         â”‚
â”‚                 >                                           â”‚
â”‚                   {/* Empty/clickable for booking */}      â”‚
â”‚                 </div>                                      â”‚
â”‚               );                                            â”‚
â”‚             }                                               â”‚
â”‚           })}                                               â”‚
â”‚         </div>                                              â”‚
â”‚       </div>                                                â”‚
â”‚     );                                                      â”‚
â”‚   })}                                                       â”‚
â”‚ </div>                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BookingBlock Component:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const BookingBlock = ({                                    â”‚
â”‚   booking,                                                  â”‚
â”‚   span,                                                     â”‚
â”‚   user,                                                     â”‚
â”‚   isOwnBooking,                                            â”‚
â”‚   onClick                                                   â”‚
â”‚ }) => {                                                     â”‚
â”‚   // Get meeting details if exists                         â”‚
â”‚   const meeting = booking.meeting_request_id ?             â”‚
â”‚     acceptedMeetings.find(                                 â”‚
â”‚       m => m.id === booking.meeting_request_id             â”‚
â”‚     ) : null;                                               â”‚
â”‚                                                             â”‚
â”‚   const displayTopic =                                     â”‚
â”‚     booking.booking_type === 'private' ?                   â”‚
â”‚       booking.private_meeting_topic :                      â”‚
â”‚       meeting?.proposed_topic || 'Meeting';                â”‚
â”‚                                                             â”‚
â”‚   return (                                                  â”‚
â”‚     <div                                                    â”‚
â”‚       className={`booking-block ${                         â”‚
â”‚         isOwnBooking ? 'own-booking' : ''                  â”‚
â”‚       }`}                                                   â”‚
â”‚       style={{                                             â”‚
â”‚         gridColumn: `span ${span}`,                        â”‚
â”‚         background: isOwnBooking ?                         â”‚
â”‚           'linear-gradient(135deg, #667eea, #764ba2)' :    â”‚
â”‚           'linear-gradient(135deg, #f093fb, #f5576c)'      â”‚
â”‚       }}                                                    â”‚
â”‚       onClick={onClick}                                    â”‚
â”‚     >                                                       â”‚
â”‚       <div className="booking-content">                    â”‚
â”‚         {booking.booking_type === 'private' && (           â”‚
â”‚           <Badge className="private-badge">Private</Badge> â”‚
â”‚         )}                                                  â”‚
â”‚         <div className="booking-topic">{displayTopic}</div>â”‚
â”‚         <div className="booking-user">                     â”‚
â”‚           {user?.full_name || 'Unknown User'}              â”‚
â”‚         </div>                                              â”‚
â”‚         <div className="booking-time">                     â”‚
â”‚           {format(new Date(booking.start_time), 'HH:mm')} -â”‚
â”‚           {format(new Date(booking.end_time), 'HH:mm')}    â”‚
â”‚         </div>                                              â”‚
â”‚       </div>                                                â”‚
â”‚     </div>                                                  â”‚
â”‚   );                                                        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Booking Details Popover:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ When user clicks a booking block:                          â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  ğŸ“… Booking Details                                  â”‚   â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Room: Conference Room A                            â”‚   â”‚
â”‚ â”‚  Floor: 2 â€¢ Capacity: 15                            â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Topic: Bilateral Trade Agreement Discussion        â”‚   â”‚
â”‚ â”‚  Type: Meeting Booking                              â”‚   â”‚
â”‚ â”‚  Code: X7K9M2N4                                     â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Booked by: John Doe                                â”‚   â”‚
â”‚ â”‚  Organization: Department of State                  â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Time: January 15, 2025                             â”‚   â”‚
â”‚ â”‚  From: 10:00 AM                                     â”‚   â”‚
â”‚ â”‚  To: 11:30 AM (90 minutes)                          â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  Equipment:                                         â”‚   â”‚
â”‚ â”‚  [Wifi] [Projector] [Whiteboard]                    â”‚   â”‚
â”‚ â”‚                                                      â”‚   â”‚
â”‚ â”‚  {if isOwnBooking}                                  â”‚   â”‚
â”‚ â”‚    [View Meeting Details] [Cancel Booking]          â”‚   â”‚
â”‚ â”‚  {else}                                             â”‚   â”‚
â”‚ â”‚    [Close]                                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER BOOKING FLOW:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: components/meetings/BookingDialog.jsx            â”‚
â”‚                                                             â”‚
â”‚ Trigger: "Book Venue" button on accepted meeting card      â”‚
â”‚                                                             â”‚
â”‚ Purpose: Book a room for an accepted meeting               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BookingDialog Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Props:                                                      â”‚
â”‚   - meeting: MeetingRequest (accepted meeting)             â”‚
â”‚   - currentUser: User                                      â”‚
â”‚   - onBookingSuccess: () => void                           â”‚
â”‚                                                             â”‚
â”‚ State:                                                      â”‚
â”‚   const [selectedDate, setSelectedDate] =                  â”‚
â”‚     useState(new Date().toISOString().split('T')[0]);      â”‚
â”‚   const [selectedTime, setSelectedTime] = useState('');    â”‚
â”‚   const [selectedRoom, setSelectedRoom] = useState(null);  â”‚
â”‚   const [availableRooms, setAvailableRooms] = useState([]); â”‚
â”‚   const [booking, setBooking] = useState(false);           â”‚
â”‚   const [rooms, setRooms] = useState([]);                  â”‚
â”‚   const [bookings, setBookings] = useState([]);            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dialog Content:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  ğŸ“… Book Venue for Meeting                            â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Meeting Information:                                 â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ Topic: Bilateral Trade Agreement Discussion   â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ Duration: 45 minutes                           â”‚  â”‚  â”‚
â”‚ â”‚  â”‚ Code: X7K9M2N4                                 â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Select Date                                          â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [<] January 15, 2025 [>]                       â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Select Start Time                                    â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [Dropdown â–¼]                                   â”‚  â”‚  â”‚
â”‚ â”‚  â”‚   08:00 AM                                     â”‚  â”‚  â”‚
â”‚ â”‚  â”‚   08:30 AM                                     â”‚  â”‚  â”‚
â”‚ â”‚  â”‚   09:00 AM                                     â”‚  â”‚  â”‚
â”‚ â”‚  â”‚   ... (all 30-min slots from 8 AM to 7:30 PM) â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Available Rooms                                      â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ (â€¢) Conference Room A                          â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     Floor 2 â€¢ Capacity: 15                     â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     Equipment: Wifi, Projector, Whiteboard     â”‚  â”‚  â”‚
â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚ â”‚  â”‚ ( ) Conference Room B                          â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     Floor 3 â€¢ Capacity: 20                     â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     âš ï¸ Already booked at this time             â”‚  â”‚  â”‚
â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚ â”‚  â”‚ (â€¢) Meeting Room C                             â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     Floor 2 â€¢ Capacity: 8                      â”‚  â”‚  â”‚
â”‚ â”‚  â”‚     Equipment: Wifi                            â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Booking Summary:                                     â”‚  â”‚
â”‚ â”‚  Conference Room A on Jan 15, 2025                    â”‚  â”‚
â”‚ â”‚  From 10:00 AM to 10:45 AM                            â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚                  [Cancel]  [Confirm Booking]          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Load Rooms and Check Availability:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useEffect(() => {                                          â”‚
â”‚   loadRoomsAndBookings();                                  â”‚
â”‚ }, []);                                                     â”‚
â”‚                                                             â”‚
â”‚ useEffect(() => {                                          â”‚
â”‚   if (selectedDate && selectedTime) {                      â”‚
â”‚     filterAvailableRooms();                                â”‚
â”‚   }                                                         â”‚
â”‚ }, [selectedDate, selectedTime, rooms, bookings]);         â”‚
â”‚                                                             â”‚
â”‚ const loadRoomsAndBookings = async () => {                 â”‚
â”‚   try {                                                     â”‚
â”‚     const [allRooms, allBookings] = await Promise.all([    â”‚
â”‚       VenueRoom.list(),                                    â”‚
â”‚       VenueBooking.list()                                  â”‚
â”‚     ]);                                                     â”‚
â”‚                                                             â”‚
â”‚     // Only active rooms                                   â”‚
â”‚     const activeRooms = allRooms.filter(r => r.is_active); â”‚
â”‚     setRooms(activeRooms);                                 â”‚
â”‚     setBookings(allBookings);                              â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error loading rooms:", error);          â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ const filterAvailableRooms = () => {                       â”‚
â”‚   const available = rooms.map(room => {                    â”‚
â”‚     const isAvailable = checkRoomAvailability(             â”‚
â”‚       room,                                                â”‚
â”‚       selectedDate,                                        â”‚
â”‚       selectedTime,                                        â”‚
â”‚       meeting.proposed_duration                            â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     return {                                               â”‚
â”‚       ...room,                                             â”‚
â”‚       available: isAvailable                               â”‚
â”‚     };                                                      â”‚
â”‚   });                                                       â”‚
â”‚                                                             â”‚
â”‚   setAvailableRooms(available);                            â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Check Room Availability Function:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const checkRoomAvailability = (                            â”‚
â”‚   room,                                                     â”‚
â”‚   date,                                                     â”‚
â”‚   startTime,                                               â”‚
â”‚   durationMinutes                                          â”‚
â”‚ ) => {                                                      â”‚
â”‚   // Calculate booking time range                          â”‚
â”‚   const bookingStart = new Date(`${date}T${startTime}:00`);â”‚
â”‚   const bookingEnd = new Date(                             â”‚
â”‚     bookingStart.getTime() + durationMinutes * 60 * 1000   â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   // Check for conflicts with existing bookings            â”‚
â”‚   const hasConflict = bookings.some(booking => {           â”‚
â”‚     if (booking.room_id !== room.id) return false;         â”‚
â”‚     if (booking.status !== 'active') return false;         â”‚
â”‚                                                             â”‚
â”‚     const existingStart = new Date(booking.start_time);    â”‚
â”‚     const existingEnd = new Date(booking.end_time);        â”‚
â”‚                                                             â”‚
â”‚     // Check all overlap scenarios                         â”‚
â”‚     const newStartsInExisting =                            â”‚
â”‚       bookingStart >= existingStart &&                     â”‚
â”‚       bookingStart < existingEnd;                          â”‚
â”‚                                                             â”‚
â”‚     const newEndsInExisting =                              â”‚
â”‚       bookingEnd > existingStart &&                        â”‚
â”‚       bookingEnd <= existingEnd;                           â”‚
â”‚                                                             â”‚
â”‚     const newSpansExisting =                               â”‚
â”‚       bookingStart <= existingStart &&                     â”‚
â”‚       bookingEnd >= existingEnd;                           â”‚
â”‚                                                             â”‚
â”‚     return newStartsInExisting ||                          â”‚
â”‚            newEndsInExisting ||                            â”‚
â”‚            newSpansExisting;                               â”‚
â”‚   });                                                       â”‚
â”‚                                                             â”‚
â”‚   return !hasConflict;                                     â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Create Booking Process:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleConfirmBooking = async () => {                 â”‚
â”‚   if (!selectedRoom || !selectedDate || !selectedTime) {   â”‚
â”‚     return;                                                â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   setBooking(true);                                        â”‚
â”‚   try {                                                     â”‚
â”‚     // Double-check availability (race condition protection)â”‚
â”‚     const stillAvailable = checkRoomAvailability(          â”‚
â”‚       selectedRoom,                                        â”‚
â”‚       selectedDate,                                        â”‚
â”‚       selectedTime,                                        â”‚
â”‚       meeting.proposed_duration                            â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     if (!stillAvailable) {                                 â”‚
â”‚       alert("This room is no longer available");           â”‚
â”‚       await loadRoomsAndBookings(); // Refresh             â”‚
â”‚       return;                                              â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Calculate exact start and end times                 â”‚
â”‚     const startDateTime = new Date(                        â”‚
â”‚       `${selectedDate}T${selectedTime}:00`                 â”‚
â”‚     );                                                      â”‚
â”‚     const endDateTime = new Date(                          â”‚
â”‚       startDateTime.getTime() +                            â”‚
â”‚       meeting.proposed_duration * 60 * 1000                â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     // Create booking                                      â”‚
â”‚     const newBooking = await VenueBooking.create({         â”‚
â”‚       room_id: selectedRoom.id,                            â”‚
â”‚       room_name: selectedRoom.name,                        â”‚
â”‚       room_type: selectedRoom.type,                        â”‚
â”‚       capacity: selectedRoom.capacity,                     â”‚
â”‚       floor_level: selectedRoom.floor,                     â”‚
â”‚       equipment: selectedRoom.equipment || [],             â”‚
â”‚       booked_by: currentUser.id,                           â”‚
â”‚       booking_type: 'meeting',                             â”‚
â”‚       meeting_request_id: meeting.id,                      â”‚
â”‚       start_time: startDateTime.toISOString(),             â”‚
â”‚       end_time: endDateTime.toISOString(),                 â”‚
â”‚       status: 'active'                                     â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Update meeting with booking reference                â”‚
â”‚     await MeetingRequest.update(meeting.id, {              â”‚
â”‚       venue_booking_id: newBooking.id                      â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Notify all meeting participants                     â”‚
â”‚     const participants = [                                 â”‚
â”‚       meeting.requester_id,                                â”‚
â”‚       ...(meeting.recipient_ids || [])                     â”‚
â”‚     ].filter(id => id !== currentUser.id);                 â”‚
â”‚                                                             â”‚
â”‚     for (const participantId of participants) {            â”‚
â”‚       const participant = await User.get(participantId);   â”‚
â”‚                                                             â”‚
â”‚       if (participant.notification_preferences             â”‚
â”‚           ?.booking_confirmed !== false) {                 â”‚
â”‚                                                             â”‚
â”‚         await Notification.create({                        â”‚
â”‚           user_id: participantId,                          â”‚
â”‚           type: 'booking_confirmed',                       â”‚
â”‚           title: 'Venue Confirmed',                        â”‚
â”‚           body: `${selectedRoom.name} has been booked for`+â”‚
â”‚                 ` your meeting "${meeting.proposed_topic}"`+â”‚
â”‚                 ` at ${format(startDateTime,               â”‚
â”‚                   'MMM d, h:mm a')}`,                      â”‚
â”‚           link: createPageUrl("Schedule"),                 â”‚
â”‚           related_entity_id: newBooking.id,                â”‚
â”‚           is_read: false                                   â”‚
â”‚         });                                                 â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Success callback                                    â”‚
â”‚     onBookingSuccess?.();                                  â”‚
â”‚                                                             â”‚
â”‚     // Close dialog                                        â”‚
â”‚     // Show success message                                â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error creating booking:", error);       â”‚
â”‚     alert("Failed to create booking. Please try again.");  â”‚
â”‚   }                                                         â”‚
â”‚   setBooking(false);                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ADMIN ROOM MANAGEMENT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page: pages/Rooms.js                                        â”‚
â”‚ Route: /rooms                                               â”‚
â”‚ Access: Admin users only                                   â”‚
â”‚                                                             â”‚
â”‚ Features:                                                   â”‚
â”‚   - View all rooms (grid view)                             â”‚
â”‚   - Create new rooms                                       â”‚
â”‚   - Edit room details                                      â”‚
â”‚   - Delete rooms                                           â”‚
â”‚   - Toggle room active status                              â”‚
â”‚   - Create private bookings                                â”‚
â”‚   - View general schedule                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Rooms Page Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Header                                                â”‚  â”‚
â”‚ â”‚ ğŸ¢ Room Management                                    â”‚  â”‚
â”‚ â”‚                         [ğŸ”„ Refresh]  [+ Add Room]   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Tabs                                                  â”‚  â”‚
â”‚ â”‚ [Manage Rooms (5)] [General Schedule]                â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ TAB 1: Manage Rooms                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚ â”‚ Room 1 â”‚ Room 2 â”‚ Room 3 â”‚  (3-column grid)             â”‚
â”‚ â”‚ Card   â”‚ Card   â”‚ Card   â”‚                              â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚ â”‚ Room 4 â”‚ Room 5 â”‚        â”‚                              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                             â”‚
â”‚ TAB 2: General Schedule                                    â”‚
â”‚   (Shows ScheduleView component)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Room Card Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Conference Room A                  [Active] [â‹® Menu] â”‚  â”‚
â”‚ â”‚ Large Conference Room                                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ ğŸ‘¥ 15 seats    ğŸ“ Floor 2    ğŸ¢ North Wing           â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Description:                                          â”‚  â”‚
â”‚ â”‚ Modern conference room with floor-to-ceiling          â”‚  â”‚
â”‚ â”‚ windows and natural lighting...                       â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Contact:                                              â”‚  â”‚
â”‚ â”‚ facilities@example.com | Ext. 2234                    â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Equipment:                                            â”‚  â”‚
â”‚ â”‚ [ğŸ“¡ Wifi] [ğŸ“½ï¸ Projector] [ğŸ–¥ï¸ Monitor] [â˜• Coffee]    â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚ â”‚ Room Active               [Toggle Switch ON]   â”‚   â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Menu (â‹®) Options:                                          â”‚
â”‚   - Edit Details                                           â”‚
â”‚   - Private Reserve                                        â”‚
â”‚   - Delete Room                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Room Form Dialog (Create/Edit):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: components/venues/RoomFormDialog.jsx             â”‚
â”‚                                                             â”‚
â”‚ Props:                                                      â”‚
â”‚   - room?: VenueRoom (for editing, null for creating)      â”‚
â”‚   - onSave: (roomData) => Promise<void>                    â”‚
â”‚                                                             â”‚
â”‚ State:                                                      â”‚
â”‚   const [formData, setFormData] = useState({               â”‚
â”‚     name: '',                                              â”‚
â”‚     type: 'small',                                         â”‚
â”‚     capacity: 0,                                           â”‚
â”‚     floor: 1,                                              â”‚
â”‚     location: '',                                          â”‚
â”‚     contact: '',                                           â”‚
â”‚     description: '',                                       â”‚
â”‚     equipment: [],                                         â”‚
â”‚     is_active: true                                        â”‚
â”‚   });                                                       â”‚
â”‚   const [saving, setSaving] = useState(false);             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Room Form Content:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  {room ? 'Edit Room' : 'Create New Room'}            â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Room Name *                                          â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ Conference Room A                              â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Room Type *              Capacity *                  â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚ â”‚  â”‚ [v] Small    â”‚  â”‚ 15           â”‚                  â”‚  â”‚
â”‚ â”‚  â”‚     Large    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Floor Level *            Location                    â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚ â”‚  â”‚ 2            â”‚  â”‚ North Wing   â”‚                  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Contact Information                                  â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ facilities@example.com | Ext. 2234             â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Description                                          â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ Modern conference room with...                 â”‚  â”‚  â”‚
â”‚ â”‚  â”‚                                                 â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Equipment                                            â”‚  â”‚
â”‚ â”‚  [x] Wifi        [x] Projector                        â”‚  â”‚
â”‚ â”‚  [x] Monitor     [ ] Whiteboard                       â”‚  â”‚
â”‚ â”‚  [ ] Coffee      [ ] Video Conference                 â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Active Status                                        â”‚  â”‚
â”‚ â”‚  [x] Room is available for booking                    â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚              [Cancel]  [Save Room]                    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Save Room Function:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleSaveRoom = async () => {                       â”‚
â”‚   // Validation                                            â”‚
â”‚   if (!formData.name || !formData.capacity || !formData.floor) {â”‚
â”‚     alert("Please fill required fields");                  â”‚
â”‚     return;                                                â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   setSaving(true);                                         â”‚
â”‚   try {                                                     â”‚
â”‚     if (room) {                                            â”‚
â”‚       // Update existing room                              â”‚
â”‚       await VenueRoom.update(room.id, formData);           â”‚
â”‚     } else {                                               â”‚
â”‚       // Create new room                                   â”‚
â”‚       await VenueRoom.create(formData);                    â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     onSave?.();  // Callback to parent                     â”‚
â”‚     // Close dialog                                        â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error saving room:", error);            â”‚
â”‚     alert("Failed to save room");                          â”‚
â”‚   }                                                         â”‚
â”‚   setSaving(false);                                        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Delete Room Function:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleDeleteRoom = async (roomId) => {               â”‚
â”‚   // Confirmation                                          â”‚
â”‚   if (!window.confirm(                                     â”‚
â”‚     "Are you sure you want to delete this room? " +        â”‚
â”‚     "This action cannot be undone."                        â”‚
â”‚   )) {                                                      â”‚
â”‚     return;                                                â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   try {                                                     â”‚
â”‚     await VenueRoom.delete(roomId);                        â”‚
â”‚     await loadData(); // Refresh list                      â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error deleting room:", error);          â”‚
â”‚     alert("Failed to delete room");                        â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ Note: Delete should check for active bookings first        â”‚
â”‚       and warn admin if bookings exist                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Toggle Room Active Status:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleToggleRoomActive = async (room) => {           â”‚
â”‚   try {                                                     â”‚
â”‚     await VenueRoom.update(room.id, {                      â”‚
â”‚       is_active: !room.is_active                           â”‚
â”‚     });                                                     â”‚
â”‚     await loadData(); // Refresh                           â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error toggling room status:", error);   â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ Effect:                                                     â”‚
â”‚   - When is_active = false:                                â”‚
â”‚     * Room disappears from user booking options            â”‚
â”‚     * Existing bookings remain valid                       â”‚
â”‚     * Admin can still see room in management               â”‚
â”‚     * Room shown with "Inactive" badge                     â”‚
â”‚   - When is_active = true:                                 â”‚
â”‚     * Room appears in booking options                      â”‚
â”‚     * Normal functionality                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Private Booking Dialog:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Component: components/venues/PrivateBookingDialog.jsx       â”‚
â”‚                                                             â”‚
â”‚ Props:                                                      â”‚
â”‚   - room: VenueRoom                                        â”‚
â”‚   - onSave: (room, start, end, topic) => Promise<void>     â”‚
â”‚                                                             â”‚
â”‚ Purpose: Allow admin to book room for non-meeting purposes â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Private Booking Form:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚  ğŸ”’ Create Private Booking (Admin)                    â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Room: Conference Room A                              â”‚  â”‚
â”‚ â”‚  (Read-only, pre-filled)                              â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Meeting Topic *                                      â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ VIP Bilateral Summit                           â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Date *                                               â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚  â”‚ [ğŸ“…] 2025-01-15                                â”‚  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Start Time *        End Time *                       â”‚  â”‚
â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚ â”‚  â”‚ [v] 10:00 AM â”‚  â”‚ [v] 11:30 AM â”‚                  â”‚  â”‚
â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  Duration: 90 minutes (auto-calculated)               â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚  â„¹ï¸ Note: This booking will not be linked to any      â”‚  â”‚
â”‚ â”‚  meeting request and will appear as "Private" in      â”‚  â”‚
â”‚ â”‚  the schedule.                                        â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚              [Cancel]  [Create Booking]               â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Create Private Booking:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handlePrivateBooking = async (                       â”‚
â”‚   room,                                                     â”‚
â”‚   startTime,                                               â”‚
â”‚   endTime,                                                  â”‚
â”‚   topic                                                     â”‚
â”‚ ) => {                                                      â”‚
â”‚   try {                                                     â”‚
â”‚     // Validate times                                      â”‚
â”‚     if (endTime <= startTime) {                            â”‚
â”‚       alert("End time must be after start time");          â”‚
â”‚       return;                                              â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Check availability                                  â”‚
â”‚     const duration =                                       â”‚
â”‚       (endTime - startTime) / (1000 * 60); // minutes      â”‚
â”‚                                                             â”‚
â”‚     const isAvailable = checkRoomAvailability(             â”‚
â”‚       room,                                                â”‚
â”‚       format(startTime, 'yyyy-MM-dd'),                     â”‚
â”‚       format(startTime, 'HH:mm'),                          â”‚
â”‚       duration                                             â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     if (!isAvailable) {                                    â”‚
â”‚       alert("Room not available at selected time");        â”‚
â”‚       return;                                              â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Create booking                                      â”‚
â”‚     await VenueBooking.create({                            â”‚
â”‚       room_id: room.id,                                    â”‚
â”‚       room_name: room.name,                                â”‚
â”‚       room_type: room.type,                                â”‚
â”‚       capacity: room.capacity,                             â”‚
â”‚       booked_by: currentUser.id,                           â”‚
â”‚       start_time: startTime.toISOString(),                 â”‚
â”‚       end_time: endTime.toISOString(),                     â”‚
â”‚       floor_level: room.floor,                             â”‚
â”‚       equipment: room.equipment || [],                     â”‚
â”‚       booking_type: 'private',                             â”‚
â”‚       private_meeting_topic: topic,                        â”‚
â”‚       status: 'active',                                    â”‚
â”‚       meeting_request_id: null  // No meeting link         â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     await loadData(); // Refresh                           â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error creating private booking:", error);â”‚
â”‚     alert("Failed to create booking");                     â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Booking Display Rules:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ In Schedule Grid:                                          â”‚
â”‚                                                             â”‚
â”‚ Meeting Booking (booking_type = 'meeting'):                â”‚
â”‚   Display:                                                 â”‚
â”‚     - Meeting topic from MeetingRequest                    â”‚
â”‚     - Booked by user's name                                â”‚
â”‚     - Time range                                           â”‚
â”‚     - Blue/purple gradient background                      â”‚
â”‚   Click: Show meeting details popover                      â”‚
â”‚                                                             â”‚
â”‚ Private Booking (booking_type = 'private'):                â”‚
â”‚   Display:                                                 â”‚
â”‚     - Custom topic from private_meeting_topic              â”‚
â”‚     - [Private] badge                                      â”‚
â”‚     - Booked by admin name                                 â”‚
â”‚     - Time range                                           â”‚
â”‚     - Red/pink gradient background                         â”‚
â”‚   Click: Show booking details (admin can cancel)           â”‚
â”‚                                                             â”‚
â”‚ User's Own Booking:                                        â”‚
â”‚   - Brighter color scheme                                  â”‚
â”‚   - Special highlight/glow effect                          â”‚
â”‚   - Show action buttons on hover                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MY SCHEDULE PAGE:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Page: pages/Schedule.js                                     â”‚
â”‚ Route: /schedule                                            â”‚
â”‚ Access: All authenticated users                            â”‚
â”‚                                                             â”‚
â”‚ Purpose: Show user's personal schedule of bookings         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Schedule Page Features:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - Calendar view of user's bookings only                    â”‚
â”‚ - Filter by date range                                     â”‚
â”‚ - List view and grid view options                          â”‚
â”‚ - Quick links to meeting details                           â”‚
â”‚ - Export to calendar (future feature)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Schedule Page Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Header                                                â”‚  â”‚
â”‚ â”‚ ğŸ“… My Schedule                                        â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ [Week View] [Month View]           [Today] [ğŸ”„]      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Week View:                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Mon 15   Tue 16   Wed 17   Thu 18   Fri 19          â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ 08:00                                                  â”‚  â”‚
â”‚ â”‚ 09:00    [â–ˆâ–ˆâ–ˆâ–ˆ]                                        â”‚  â”‚
â”‚ â”‚ 10:00    Meeting                 [â–ˆâ–ˆâ–ˆâ–ˆ]               â”‚  â”‚
â”‚ â”‚ 11:00    with John              Meeting               â”‚  â”‚
â”‚ â”‚ 12:00                            Room B               â”‚  â”‚
â”‚ â”‚ 13:00                                                  â”‚  â”‚
â”‚ â”‚ ...                                                    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ Upcoming Bookings List:                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Today, Jan 15                                         â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚ â”‚ 10:00 AM - 11:30 AM                            â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ Conference Room A (Floor 2)                    â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ Meeting: Bilateral Trade Discussion            â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ With: John Doe                                 â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ [View Details] [Cancel]                        â”‚   â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ Tomorrow, Jan 16                                      â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚ â”‚ 02:00 PM - 03:00 PM                            â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ Meeting Room C (Floor 3)                       â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ Meeting: Climate Finance Strategy              â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ With: Maria Silva                              â”‚   â”‚  â”‚
â”‚ â”‚ â”‚ [View Details] [Cancel]                        â”‚   â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Load User Schedule:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const loadUserSchedule = async () => {                     â”‚
â”‚   try {                                                     â”‚
â”‚     const user = await User.me();                          â”‚
â”‚     setCurrentUser(user);                                  â”‚
â”‚                                                             â”‚
â”‚     // Get user's accepted meetings                        â”‚
â”‚     const allMeetings = await MeetingRequest.filter(       â”‚
â”‚       { status: 'accepted' }                               â”‚
â”‚     );                                                      â”‚
â”‚     const userMeetings = allMeetings.filter(m =>           â”‚
â”‚       m.requester_id === user.id ||                        â”‚
â”‚       (m.recipient_ids || []).includes(user.id)            â”‚
â”‚     );                                                      â”‚
â”‚     setAcceptedMeetings(userMeetings);                     â”‚
â”‚                                                             â”‚
â”‚     // Get user's bookings                                 â”‚
â”‚     const allBookings = await VenueBooking.list();         â”‚
â”‚     const meetingIds = new Set(                            â”‚
â”‚       userMeetings.map(m => m.id)                          â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     const userBookings = allBookings.filter(booking =>     â”‚
â”‚       booking.booked_by === user.id ||                     â”‚
â”‚       (booking.meeting_request_id &&                       â”‚
â”‚        meetingIds.has(booking.meeting_request_id))         â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     // Filter future bookings only                         â”‚
â”‚     const now = new Date();                                â”‚
â”‚     const upcomingBookings = userBookings.filter(b =>      â”‚
â”‚       new Date(b.start_time) > now &&                      â”‚
â”‚       b.status === 'active'                                â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     // Sort by start time                                  â”‚
â”‚     upcomingBookings.sort((a, b) =>                        â”‚
â”‚       new Date(a.start_time) - new Date(b.start_time)      â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     setBookings(upcomingBookings);                         â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error loading schedule:", error);       â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cancel Booking from Schedule:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const handleCancelBooking = async (booking) => {           â”‚
â”‚   if (!window.confirm(                                     â”‚
â”‚     "Cancel this booking? The room will be available again."â”‚
â”‚   )) {                                                      â”‚
â”‚     return;                                                â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   try {                                                     â”‚
â”‚     // Update booking status                               â”‚
â”‚     await VenueBooking.update(booking.id, {                â”‚
â”‚       status: 'cancelled'                                  â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Clear booking reference from meeting                â”‚
â”‚     if (booking.meeting_request_id) {                      â”‚
â”‚       await MeetingRequest.update(                         â”‚
â”‚         booking.meeting_request_id,                        â”‚
â”‚         { venue_booking_id: null }                         â”‚
â”‚       );                                                    â”‚
â”‚                                                             â”‚
â”‚       // Notify meeting participants                       â”‚
â”‚       const meeting = acceptedMeetings.find(               â”‚
â”‚         m => m.id === booking.meeting_request_id           â”‚
â”‚       );                                                    â”‚
â”‚       if (meeting) {                                       â”‚
â”‚         const participants = [                             â”‚
â”‚           meeting.requester_id,                            â”‚
â”‚           ...(meeting.recipient_ids || [])                 â”‚
â”‚         ].filter(id => id !== currentUser.id);             â”‚
â”‚                                                             â”‚
â”‚         for (const participantId of participants) {        â”‚
â”‚           await Notification.create({                      â”‚
â”‚             user_id: participantId,                        â”‚
â”‚             type: 'booking_cancelled',                     â”‚
â”‚             title: 'Booking Cancelled',                    â”‚
â”‚             body: `The venue booking for your meeting "`+  â”‚
â”‚                   `${meeting.proposed_topic}" has been `+  â”‚
â”‚                   `cancelled.`,                            â”‚
â”‚             link: createPageUrl("Meetings")                â”‚
â”‚           });                                               â”‚
â”‚         }                                                   â”‚
â”‚       }                                                     â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     await loadUserSchedule(); // Refresh                   â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error cancelling booking:", error);     â”‚
â”‚     alert("Failed to cancel booking");                     â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.5 Chat & Messaging System (Complete)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            CHAT SYSTEM COMPLETE IMPLEMENTATION               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

System Overview:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Features:                                                   â”‚
â”‚   âœ… 1-on-1 messaging for accepted meetings                â”‚
â”‚   âœ… Real-time message delivery (polling)                  â”‚
â”‚   âœ… Read status tracking                                  â”‚
â”‚   âœ… Auto-scroll to latest message                         â”‚
â”‚   âœ… Direct link support via URL parameter                 â”‚
â”‚   âœ… Unread message counter                                â”‚
â”‚                                                             â”‚
â”‚ Limitations:                                                â”‚
â”‚   âŒ Only for single-user meetings (not multi-delegate)    â”‚
â”‚   âŒ No group chat                                         â”‚
â”‚   âŒ No file attachments (text only)                       â”‚
â”‚   âŒ No message editing or deletion                        â”‚
â”‚   âŒ No message search                                     â”‚
â”‚                                                             â”‚
â”‚ Security:                                                   â”‚
â”‚   - RLS enforces sender/recipient access only              â”‚
â”‚   - Messages encrypted in transit (HTTPS)                  â”‚
â”‚   - No third-party access                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Page Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File: pages/Chat.js                                         â”‚
â”‚ Route: /chat                                                â”‚
â”‚ Route with param: /chat?request={meeting_request_id}       â”‚
â”‚                                                             â”‚
â”‚ Layout: Split-view (sidebar + main chat)                   â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Header                                                â”‚  â”‚
â”‚ â”‚ [â† Back] Secure Messaging             ğŸ’¬             â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚         â”‚ Chat Header                              â”‚    â”‚
â”‚ â”‚         â”‚ â”Œâ”€â”€â” John Doe                            â”‚    â”‚
â”‚ â”‚         â”‚ â”‚JDâ”‚ Trade Policy Director                â”‚    â”‚
â”‚ â”‚         â”‚ â””â”€â”€â”˜                                     â”‚    â”‚
â”‚ â”‚Conver-  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚ â”‚sations  â”‚                                          â”‚    â”‚
â”‚ â”‚List     â”‚          Message Thread                  â”‚    â”‚
â”‚ â”‚         â”‚                                          â”‚    â”‚
â”‚ â”‚[Active] â”‚                                          â”‚    â”‚
â”‚ â”‚[Active] â”‚                                          â”‚    â”‚
â”‚ â”‚         â”‚                                          â”‚    â”‚
â”‚ â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚ â”‚         â”‚ Message Input                            â”‚    â”‚
â”‚ â”‚         â”‚ [Type message...] [Send]                 â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Data Loading:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useEffect(() => {                                          â”‚
â”‚   loadData();                                              â”‚
â”‚                                                             â”‚
â”‚   // Check for direct link                                 â”‚
â”‚   const urlParams = new URLSearchParams(                   â”‚
â”‚     window.location.search                                 â”‚
â”‚   );                                                        â”‚
â”‚   const requestId = urlParams.get('request');              â”‚
â”‚   if (requestId) {                                         â”‚
â”‚     setSelectedMeetingId(requestId);                       â”‚
â”‚   }                                                         â”‚
â”‚ }, []);                                                     â”‚
â”‚                                                             â”‚
â”‚ const loadData = async () => {                             â”‚
â”‚   try {                                                     â”‚
â”‚     const user = await User.me();                          â”‚
â”‚     setCurrentUser(user);                                  â”‚
â”‚                                                             â”‚
â”‚     // Load all users for lookup                           â”‚
â”‚     const allUsers = await User.list();                    â”‚
â”‚     const userLookup = {};                                 â”‚
â”‚     allUsers.forEach(u => {                                â”‚
â”‚       userLookup[u.id] = u;                                â”‚
â”‚     });                                                     â”‚
â”‚     setUsers(userLookup);                                  â”‚
â”‚                                                             â”‚
â”‚     // Load accepted single meetings                       â”‚
â”‚     const allRequests = await MeetingRequest.list(         â”‚
â”‚       '-updated_date'                                      â”‚
â”‚     );                                                      â”‚
â”‚     const accepted = allRequests.filter(req =>             â”‚
â”‚       ((req.recipient_ids || []).includes(user.id) ||      â”‚
â”‚        req.requester_id === user.id) &&                    â”‚
â”‚       req.status === 'accepted' &&                         â”‚
â”‚       req.meeting_type === 'single'  // â† Only single     â”‚
â”‚     );                                                      â”‚
â”‚     setAcceptedMeetings(accepted);                         â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error loading chat data:", error);      â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Conversation List (Sidebar):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const ConversationList = () => {                           â”‚
â”‚   if (acceptedMeetings.length === 0) {                     â”‚
â”‚     return (                                               â”‚
â”‚       <div className="empty-state">                        â”‚
â”‚         <MessageSquare className="icon-lg" />              â”‚
â”‚         <p>No active conversations</p>                     â”‚
â”‚         <p className="text-sm">                            â”‚
â”‚           Accept 1-on-1 meeting requests to start chatting â”‚
â”‚         </p>                                               â”‚
â”‚       </div>                                               â”‚
â”‚     );                                                      â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   return (                                                  â”‚
â”‚     <div className="conversation-list">                    â”‚
â”‚       {acceptedMeetings.map((meeting) => {                 â”‚
â”‚         const otherParty = meeting.requester_id ===        â”‚
â”‚           currentUser?.id ?                                â”‚
â”‚           users[(meeting.recipient_ids || [])[0]] :        â”‚
â”‚           users[meeting.requester_id];                     â”‚
â”‚                                                             â”‚
â”‚         const isSelected = selectedMeetingId === meeting.id;â”‚
â”‚                                                             â”‚
â”‚         return (                                           â”‚
â”‚           <div                                             â”‚
â”‚             key={meeting.id}                               â”‚
â”‚             className={`conversation-item ${               â”‚
â”‚               isSelected ? 'selected' : ''                 â”‚
â”‚             }`}                                            â”‚
â”‚             onClick={() => setSelectedMeetingId(meeting.id)}â”‚
â”‚           >                                                â”‚
â”‚             <div className="avatar">                       â”‚
â”‚               {otherParty?.full_name?.charAt(0)}           â”‚
â”‚             </div>                                         â”‚
â”‚             <div className="conversation-info">            â”‚
â”‚               <div className="name">                       â”‚
â”‚                 {otherParty?.full_name}                    â”‚
â”‚               </div>                                       â”‚
â”‚               <div className="topic truncate">             â”‚
â”‚                 {meeting.proposed_topic}                   â”‚
â”‚               </div>                                       â”‚
â”‚             </div>                                         â”‚
â”‚             {/* Unread indicator - future feature */}      â”‚
â”‚           </div>                                           â”‚
â”‚         );                                                  â”‚
â”‚       })}                                                   â”‚
â”‚     </div>                                                  â”‚
â”‚   );                                                        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Message Loading & Real-time Updates:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const loadMessages = useCallback(async () => {             â”‚
â”‚   if (!selectedMeetingId || !currentUser) return;          â”‚
â”‚                                                             â”‚
â”‚   try {                                                     â”‚
â”‚     // Fetch messages for selected meeting                 â”‚
â”‚     const chatMessages = await ChatMessage.filter(         â”‚
â”‚       { meeting_request_id: selectedMeetingId },           â”‚
â”‚       'created_date'  // Oldest first                      â”‚
â”‚     );                                                      â”‚
â”‚     setMessages(chatMessages);                             â”‚
â”‚                                                             â”‚
â”‚     // Mark unread messages as read                        â”‚
â”‚     const unreadMessages = chatMessages.filter(            â”‚
â”‚       msg => msg.recipient_id === currentUser.id &&        â”‚
â”‚                !msg.read_status                            â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     // Update read status (don't await - background task)  â”‚
â”‚     for (const msg of unreadMessages) {                    â”‚
â”‚       ChatMessage.update(msg.id, {                         â”‚
â”‚         read_status: true                                  â”‚
â”‚       }).catch(err =>                                      â”‚
â”‚         console.error("Error marking message read:", err)  â”‚
â”‚       );                                                    â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error loading messages:", error);       â”‚
â”‚   }                                                         â”‚
â”‚ }, [selectedMeetingId, currentUser]);                      â”‚
â”‚                                                             â”‚
â”‚ // Initial load                                            â”‚
â”‚ useEffect(() => {                                          â”‚
â”‚   if (selectedMeetingId) {                                 â”‚
â”‚     loadMessages();                                        â”‚
â”‚   }                                                         â”‚
â”‚ }, [selectedMeetingId, loadMessages]);                     â”‚
â”‚                                                             â”‚
â”‚ // Poll for new messages every 3 seconds                   â”‚
â”‚ useEffect(() => {                                          â”‚
â”‚   if (selectedMeetingId) {                                 â”‚
â”‚     const interval = setInterval(loadMessages, 3000);      â”‚
â”‚     return () => clearInterval(interval);                  â”‚
â”‚   }                                                         â”‚
â”‚ }, [selectedMeetingId, loadMessages]);                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Message Thread Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const MessageThread = () => {                              â”‚
â”‚   const messagesEndRef = useRef(null);                     â”‚
â”‚                                                             â”‚
â”‚   // Auto-scroll to bottom when messages change            â”‚
â”‚   useEffect(() => {                                        â”‚
â”‚     messagesEndRef.current?.scrollIntoView({               â”‚
â”‚       behavior: "smooth"                                   â”‚
â”‚     });                                                     â”‚
â”‚   }, [messages]);                                          â”‚
â”‚                                                             â”‚
â”‚   if (!selectedMeetingId) {                                â”‚
â”‚     return (                                               â”‚
â”‚       <div className="empty-state">                        â”‚
â”‚         <MessageSquare className="icon-lg" />              â”‚
â”‚         <p>Select a conversation</p>                       â”‚
â”‚         <p className="text-sm">                            â”‚
â”‚           Choose a meeting from the sidebar to start       â”‚
â”‚           chatting                                         â”‚
â”‚         </p>                                               â”‚
â”‚       </div>                                               â”‚
â”‚     );                                                      â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   if (messages.length === 0) {                             â”‚
â”‚     return (                                               â”‚
â”‚       <div className="empty-state">                        â”‚
â”‚         <MessageSquare className="icon-lg" />              â”‚
â”‚         <p>Start your conversation</p>                     â”‚
â”‚         <p className="text-sm">                            â”‚
â”‚           Send a message to begin chatting with            â”‚
â”‚           {chatPartner?.full_name}                         â”‚
â”‚         </p>                                               â”‚
â”‚       </div>                                               â”‚
â”‚     );                                                      â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   return (                                                  â”‚
â”‚     <div className="message-thread">                       â”‚
â”‚       {messages.map((message) => {                         â”‚
â”‚         const isCurrentUser =                              â”‚
â”‚           message.sender_id === currentUser?.id;           â”‚
â”‚                                                             â”‚
â”‚         return (                                           â”‚
â”‚           <div                                             â”‚
â”‚             key={message.id}                               â”‚
â”‚             className={`message-wrapper ${                 â”‚
â”‚               isCurrentUser ? 'sent' : 'received'          â”‚
â”‚             }`}                                            â”‚
â”‚           >                                                â”‚
â”‚             <div className={`message-bubble ${             â”‚
â”‚               isCurrentUser ? 'sent-bubble' : 'received-bubble'â”‚
â”‚             }`}>                                           â”‚
â”‚               <p className="message-text">                 â”‚
â”‚                 {message.message}                          â”‚
â”‚               </p>                                         â”‚
â”‚               <div className="message-time">               â”‚
â”‚                 {format(                                   â”‚
â”‚                   new Date(message.created_date),          â”‚
â”‚                   'HH:mm'                                  â”‚
â”‚                 )}                                         â”‚
â”‚               </div>                                       â”‚
â”‚             </div>                                         â”‚
â”‚           </div>                                           â”‚
â”‚         );                                                  â”‚
â”‚       })}                                                   â”‚
â”‚       <div ref__={messagesEndRef} />                         â”‚
â”‚     </div>                                                  â”‚
â”‚   );                                                        â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ Message Styling:                                            â”‚
â”‚   - Sent messages: Right-aligned, blue background          â”‚
â”‚   - Received messages: Left-aligned, gray background       â”‚
â”‚   - Max width: 60% of container                            â”‚
â”‚   - Rounded corners (bubble style)                         â”‚
â”‚   - Timestamp below message                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sending Messages:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const [newMessage, setNewMessage] = useState('');          â”‚
â”‚ const [sending, setSending] = useState(false);             â”‚
â”‚                                                             â”‚
â”‚ const sendMessage = async () => {                          â”‚
â”‚   // Validation                                            â”‚
â”‚   if (!newMessage.trim() || !selectedMeetingId) {          â”‚
â”‚     return;                                                â”‚
â”‚   }                                                         â”‚
â”‚                                                             â”‚
â”‚   setSending(true);                                        â”‚
â”‚   try {                                                     â”‚
â”‚     // Find recipient                                      â”‚
â”‚     const selectedMeeting = acceptedMeetings.find(         â”‚
â”‚       m => m.id === selectedMeetingId                      â”‚
â”‚     );                                                      â”‚
â”‚     const recipientId =                                    â”‚
â”‚       selectedMeeting.requester_id === currentUser.id      â”‚
â”‚         ? (selectedMeeting.recipient_ids || [])[0]         â”‚
â”‚         : selectedMeeting.requester_id;                    â”‚
â”‚                                                             â”‚
â”‚     // Create message                                      â”‚
â”‚     const newMsg = await ChatMessage.create({              â”‚
â”‚       meeting_request_id: selectedMeetingId,               â”‚
â”‚       sender_id: currentUser.id,                           â”‚
â”‚       recipient_id: recipientId,                           â”‚
â”‚       message: newMessage.trim(),                          â”‚
â”‚       message_type: 'text',                                â”‚
â”‚       read_status: false                                   â”‚
â”‚     });                                                     â”‚
â”‚                                                             â”‚
â”‚     // Create notification for recipient                   â”‚
â”‚     const recipient = await User.get(recipientId);         â”‚
â”‚                                                             â”‚
â”‚     // Check notification preferences                       â”‚
â”‚     if (recipient.notification_preferences                 â”‚
â”‚         ?.new_message !== false) {                         â”‚
â”‚                                                             â”‚
â”‚       await Notification.create({                          â”‚
â”‚         user_id: recipientId,                              â”‚
â”‚         type: 'new_message',                               â”‚
â”‚         title: 'New Message',                              â”‚
â”‚         body: `You have a new message from `+              â”‚
â”‚               `${currentUser.full_name}.`,                 â”‚
â”‚         link: createPageUrl(                               â”‚
â”‚           `Chat?request=${selectedMeetingId}`              â”‚
â”‚         ),                                                  â”‚
â”‚         related_entity_id: newMsg.id,                      â”‚
â”‚         is_read: false                                     â”‚
â”‚       });                                                   â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     // Clear input                                         â”‚
â”‚     setNewMessage('');                                     â”‚
â”‚                                                             â”‚
â”‚     // Reload messages                                     â”‚
â”‚     await loadMessages();                                  â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error sending message:", error);        â”‚
â”‚     alert("Failed to send message. Please try again.");    â”‚
â”‚   }                                                         â”‚
â”‚   setSending(false);                                       â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ const handleKeyPress = (e) => {                            â”‚
â”‚   if (e.key === 'Enter' && !e.shiftKey) {                  â”‚
â”‚     e.preventDefault();                                    â”‚
â”‚     sendMessage();                                         â”‚
â”‚   }                                                         â”‚
â”‚   // Shift+Enter for new line                              â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Message Input Component:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <div className="message-input-container">                  â”‚
â”‚   <Textarea                                                â”‚
â”‚     value={newMessage}                                     â”‚
â”‚     onChange={(e) => setNewMessage(e.target.value)}        â”‚
â”‚     onKeyPress={handleKeyPress}                            â”‚
â”‚     placeholder="Type your message..."                     â”‚
â”‚     className="message-input"                              â”‚
â”‚     rows={1}                                               â”‚
â”‚     maxLength={2000}                                       â”‚
â”‚     disabled={sending}                                     â”‚
â”‚   />                                                        â”‚
â”‚   <Button                                                  â”‚
â”‚     onClick={sendMessage}                                  â”‚
â”‚     disabled={sending || !newMessage.trim()}               â”‚
â”‚     className="send-button"                                â”‚
â”‚   >                                                         â”‚
â”‚     {sending ? (                                           â”‚
â”‚       <div className="spinner" />                          â”‚
â”‚     ) : (                                                   â”‚
â”‚       <Send className="w-4 h-4" />                         â”‚
â”‚     )}                                                      â”‚
â”‚   </Button>                                                â”‚
â”‚ </div>                                                      â”‚
â”‚                                                             â”‚
â”‚ Features:                                                   â”‚
â”‚   - Auto-resize textarea as user types                     â”‚
â”‚   - Character limit: 2000 characters                       â”‚
â”‚   - Enter key sends (Shift+Enter for new line)            â”‚
â”‚   - Send button disabled when empty or sending            â”‚
â”‚   - Shows loading state while sending                      â”‚
â”‚   - Clear input after successful send                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Chat Header:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const ChatHeader = () => {                                 â”‚
â”‚   if (!selectedMeetingId) return null;                     â”‚
â”‚                                                             â”‚
â”‚   const selectedMeeting = acceptedMeetings.find(           â”‚
â”‚     m => m.id === selectedMeetingId                        â”‚
â”‚   );                                                        â”‚
â”‚   const otherParty = selectedMeeting?.requester_id ===     â”‚
â”‚     currentUser?.id ?                                      â”‚
â”‚     users[(selectedMeeting.recipient_ids || [])[0]] :      â”‚
â”‚     users[selectedMeeting.requester_id];                   â”‚
â”‚                                                             â”‚
â”‚   return (                                                  â”‚
â”‚     <div className="chat-header">                          â”‚
â”‚       <div className="avatar-lg">                          â”‚
â”‚         {otherParty?.full_name?.charAt(0)}                 â”‚
â”‚       </div>                                               â”‚
â”‚       <div className="header-info">                        â”‚
â”‚         <div className="name">                             â”‚
â”‚           {otherParty?.full_name}                          â”‚
â”‚         </div>                                             â”‚
â”‚         <div className="subtitle">                         â”‚
â”‚           {otherParty?.job_title} â€¢                        â”‚
â”‚           {selectedMeeting?.proposed_topic}                â”‚
â”‚         </div>                                             â”‚
â”‚       </div>                                               â”‚
â”‚     </div>                                                  â”‚
â”‚   );                                                        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Access Control:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Chat access requirements:                                  â”‚
â”‚   âœ… User must be authenticated                            â”‚
â”‚   âœ… Meeting must be accepted                              â”‚
â”‚   âœ… Meeting must be single-user type                      â”‚
â”‚   âœ… User must be participant (requester or recipient)     â”‚
â”‚                                                             â”‚
â”‚ RLS (Row Level Security) enforces:                         â”‚
â”‚   - Users can only read messages where they are            â”‚
â”‚     sender OR recipient                                    â”‚
â”‚   - Users can only create messages where they are          â”‚
â”‚     the sender                                             â”‚
â”‚   - Admins can read all messages (for moderation)          â”‚
â”‚                                                             â”‚
â”‚ If user tries to access chat for:                          â”‚
â”‚   âŒ Multi-delegate meeting â†’ Show error message           â”‚
â”‚   âŒ Non-participant â†’ RLS blocks data access              â”‚
â”‚   âŒ Non-accepted meeting â†’ No messages exist              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Security Alert Banner:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <Alert className="info-alert">                             â”‚
â”‚   <AlertCircle className="h-4 w-4" />                      â”‚
â”‚   <AlertDescription>                                       â”‚
â”‚     <strong>Secure Messaging:</strong> All conversations   â”‚
â”‚     are encrypted and only visible to meeting participants.â”‚
â”‚     Chat is available for single-user meetings once they   â”‚
â”‚     are accepted.                                          â”‚
â”‚   </AlertDescription>                                      â”‚
â”‚ </Alert>                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Direct Link Support:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ URL Format: /chat?request={meeting_request_id}            â”‚
â”‚                                                             â”‚
â”‚ Usage Examples:                                             â”‚
â”‚   1. From meeting card "Chat" button:                      â”‚
â”‚      <Link to={createPageUrl(`Chat?request=${meeting.id}`)}>â”‚
â”‚        <Button>Chat</Button>                               â”‚
â”‚      </Link>                                               â”‚
â”‚                                                             â”‚
â”‚   2. From notification (new message):                      â”‚
â”‚      Notification.link = /chat?request=abc123             â”‚
â”‚                                                             â”‚
â”‚   3. From schedule view:                                   â”‚
â”‚      Click booking â†’ "Open Chat" button                    â”‚
â”‚                                                             â”‚
â”‚ Behavior on load:                                          â”‚
â”‚   1. Parse URL parameter                                   â”‚
â”‚   2. Set selectedMeetingId to that meeting                 â”‚
â”‚   3. Auto-load messages for that meeting                   â”‚
â”‚   4. Mark messages as read                                 â”‚
â”‚   5. Scroll to bottom                                      â”‚
â”‚   6. Focus message input                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Future Enhancements (Not Implemented):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ - File/image attachments                                   â”‚
â”‚ - Voice messages                                           â”‚
â”‚ - Message reactions (emoji)                                â”‚
â”‚ - Message search/filtering                                 â”‚
â”‚ - Typing indicators                                        â”‚
â”‚ - Online/offline status                                    â”‚
â”‚ - Message delivery receipts                                â”‚
â”‚ - Push notifications (mobile)                              â”‚
â”‚ - Group chat for multi-delegate meetings                   â”‚
â”‚ - Message threading/replies                                â”‚
â”‚ - Rich text formatting                                     â”‚
â”‚ - Code/link previews                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Due to character limit, I'll continue with Section 7.6 (Notification System) and beyond in the next response. Would you like me to continue?

30 minutes ago
continue

5 minutes ago
â€¢
see context
Revert this
Base44 AI
Base44

Thought for 4s
UNIConnect - Complete Project Documentation (Continued Part 3)
7.6 Notification System (Complete)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          NOTIFICATION SYSTEM COMPLETE IMPLEMENTATION         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

System Architecture:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notification Flow:                                         â”‚
â”‚                                                             â”‚
â”‚ User Action â†’ Creates Notification Record                  â”‚
â”‚      â†“                                                      â”‚
â”‚ Check recipient's notification preferences                 â”‚
â”‚      â†“                                                      â”‚
â”‚ If enabled â†’ Create notification in database               â”‚
â”‚      â†“                                                      â”‚
â”‚ NotificationBell component polls for updates               â”‚
â”‚      â†“                                                      â”‚
â”‚ Display unread count badge                                 â”‚
â”‚      â†“                                                      â”‚
â”‚ User clicks notification â†’ Navigate to relevant page       â”‚
â”‚      â†“                                                      â”‚
â”‚ Mark as read                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DATABASE ENTITY:

Notification Entity:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                                                           â”‚
â”‚   "user_id": "string",        // Recipient user ID         â”‚
â”‚   "type": "string",           // Notification type         â”‚
â”‚   "title": "string",          // Notification title        â”‚
â”‚   "body": "string",           // Message content           â”‚
â”‚   "link": "string",           // URL to navigate to        â”‚
â”‚   "is_read": boolean,         // Read status (default: false)â”‚
â”‚   "related_entity_id": "string" // Related record ID       â”‚
â”‚ }                                                           â”‚
â”‚                                                             â”‚
â”‚ Notification Types:                                         â”‚
â”‚   - new_meeting_request                                    â”‚
â”‚   - request_accepted                                       â”‚
â”‚   - request_declined                                       â”‚
â”‚   - request_status_update                                  â”‚
â”‚   - meeting_updated                                        â”‚
â”‚   - new_message                                            â”‚
â”‚   - booking_confirmed                                      â”‚
â”‚   - booking_cancelled                                      â”‚
â”‚                                                             â”‚
â”‚ RLS Rules:                                                  â”‚
â”‚   - Users can only read their own notifications            â”‚
â”‚   - Users can only mark their own notifications as read    â”‚
â”‚   - Admins can read all notifications                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTIFICATION BELL COMPONENT:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File: components/notifications/NotificationBell.jsx         â”‚
â”‚                                                             â”‚
â”‚ Location: Layout header (top-right corner)                 â”‚
â”‚                                                             â”‚
â”‚ Visual Representation:                                     â”‚
â”‚   ğŸ”” (with red badge if unread count > 0)                  â”‚
â”‚   Badge shows: "3" (number of unread notifications)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Component Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ import React, { useState, useEffect } from "react";        â”‚
â”‚ import { Notification } from "@/entities/Notification";     â”‚
â”‚ import { User } from "@/entities/User";                    â”‚
â”‚ import { Bell, Check, X } from "lucide-react";             â”‚
â”‚ import {                                                    â”‚
â”‚   Popover,                                                  â”‚
â”‚   PopoverContent,                                          â”‚
â”‚   PopoverTrigger,                                          â”‚
â”‚ } from "@/components/ui/popover";                          â”‚
â”‚ import { Button } from "@/components/ui/button";           â”‚
â”‚ import { Badge } from "@/components/ui/badge";             â”‚
â”‚ import { useNavigate } from "react-router-dom";            â”‚
â”‚ import { format } from "date-fns";                         â”‚
â”‚                                                             â”‚
â”‚ export default function NotificationBell() {               â”‚
â”‚   const navigate = useNavigate();                          â”‚
â”‚   const [notifications, setNotifications] = useState([]);  â”‚
â”‚   const [unreadCount, setUnreadCount] = useState(0);       â”‚
â”‚   const [open, setOpen] = useState(false);                 â”‚
â”‚   const [currentUser, setCurrentUser] = useState(null);    â”‚
â”‚                                                             â”‚
â”‚   // Load notifications on mount                           â”‚
â”‚   useEffect(() => {                                        â”‚
â”‚     loadNotifications();                                   â”‚
â”‚   }, []);                                                   â”‚
â”‚                                                             â”‚
â”‚   // Poll for new notifications every 10 seconds           â”‚
â”‚   useEffect(() => {                                        â”‚
â”‚     const interval = setInterval(loadNotifications, 10000);â”‚
â”‚     return () => clearInterval(interval);                  â”‚
â”‚   }, []);                                                   â”‚
â”‚                                                             â”‚
â”‚   const loadNotifications = async () => {                  â”‚
â”‚     try {                                                   â”‚
â”‚       const user = await User.me();                        â”‚
â”‚       setCurrentUser(user);                                â”‚
â”‚                                                             â”‚
â”‚       // Fetch user's notifications (last 50, newest first)â”‚
â”‚       const allNotifications = await Notification.filter(  â”‚
â”‚         { user_id: user.id },                              â”‚
â”‚         '-created_date',                                   â”‚
â”‚         50                                                  â”‚
â”‚       );                                                    â”‚
â”‚                                                             â”‚
â”‚       setNotifications(allNotifications);                  â”‚
â”‚                                                             â”‚
â”‚       // Count unread                                      â”‚
â”‚       const unread = allNotifications.filter(              â”‚
â”‚         n => !n.is_read                                    â”‚
â”‚       ).length;                                            â”‚
â”‚       setUnreadCount(unread);                              â”‚
â”‚                                                             â”‚
â”‚     } catch (error) {                                      â”‚
â”‚       console.error("Error loading notifications:", error);â”‚
â”‚     }                                                       â”‚
â”‚   };                                                        â”‚
â”‚                                                             â”‚
â”‚   // ... (continued below)                                 â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Handle Notification Click:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   const handleNotificationClick = async (notification) => {â”‚
â”‚     try {                                                   â”‚
â”‚       // Mark as read                                      â”‚
â”‚       if (!notification.is_read) {                         â”‚
â”‚         await Notification.update(notification.id, {       â”‚
â”‚           is_read: true                                    â”‚
â”‚         });                                                 â”‚
â”‚       }                                                     â”‚
â”‚                                                             â”‚
â”‚       // Navigate to link                                  â”‚
â”‚       if (notification.link) {                             â”‚
â”‚         // Remove domain if full URL                       â”‚
â”‚         const path = notification.link.replace(            â”‚
â”‚           window.location.origin, ''                       â”‚
â”‚         );                                                  â”‚
â”‚         navigate(path);                                    â”‚
â”‚       }                                                     â”‚
â”‚                                                             â”‚
â”‚       // Close popover                                     â”‚
â”‚       setOpen(false);                                      â”‚
â”‚                                                             â”‚
â”‚       // Reload notifications                              â”‚
â”‚       await loadNotifications();                           â”‚
â”‚                                                             â”‚
â”‚     } catch (error) {                                      â”‚
â”‚       console.error("Error handling notification:", error);â”‚
â”‚     }                                                       â”‚
â”‚   };                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mark All as Read:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   const handleMarkAllRead = async () => {                  â”‚
â”‚     try {                                                   â”‚
â”‚       const unreadNotifications = notifications.filter(    â”‚
â”‚         n => !n.is_read                                    â”‚
â”‚       );                                                    â”‚
â”‚                                                             â”‚
â”‚       // Update all unread notifications                   â”‚
â”‚       for (const notification of unreadNotifications) {    â”‚
â”‚         await Notification.update(notification.id, {       â”‚
â”‚           is_read: true                                    â”‚
â”‚         });                                                 â”‚
â”‚       }                                                     â”‚
â”‚                                                             â”‚
â”‚       // Reload                                            â”‚
â”‚       await loadNotifications();                           â”‚
â”‚                                                             â”‚
â”‚     } catch (error) {                                      â”‚
â”‚       console.error("Error marking all read:", error);     â”‚
â”‚     }                                                       â”‚
â”‚   };                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Clear All Notifications:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   const handleClearAll = async () => {                     â”‚
â”‚     if (!window.confirm(                                   â”‚
â”‚       "Delete all notifications? This cannot be undone."   â”‚
â”‚     )) {                                                    â”‚
â”‚       return;                                              â”‚
â”‚     }                                                       â”‚
â”‚                                                             â”‚
â”‚     try {                                                   â”‚
â”‚       // Delete all user's notifications                   â”‚
â”‚       for (const notification of notifications) {          â”‚
â”‚         await Notification.delete(notification.id);        â”‚
â”‚       }                                                     â”‚
â”‚                                                             â”‚
â”‚       // Reload                                            â”‚
â”‚       await loadNotifications();                           â”‚
â”‚                                                             â”‚
â”‚     } catch (error) {                                      â”‚
â”‚       console.error("Error clearing notifications:", error);â”‚
â”‚     }                                                       â”‚
â”‚   };                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Notification Icon Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const getNotificationIcon = (type) => {                    â”‚
â”‚   switch (type) {                                          â”‚
â”‚     case 'new_meeting_request':                            â”‚
â”‚       return <Calendar className="text-blue-500" />;       â”‚
â”‚     case 'request_accepted':                               â”‚
â”‚       return <CheckCircle2 className="text-green-500" />;  â”‚
â”‚     case 'request_declined':                               â”‚
â”‚       return <XCircle className="text-red-500" />;         â”‚
â”‚     case 'new_message':                                    â”‚
â”‚       return <MessageSquare className="text-blue-500" />;  â”‚
â”‚     case 'booking_confirmed':                              â”‚
â”‚       return <MapPin className="text-purple-500" />;       â”‚
â”‚     case 'booking_cancelled':                              â”‚
â”‚       return <AlertCircle className="text-orange-500" />;  â”‚
â”‚     default:                                               â”‚
â”‚       return <Bell className="text-gray-500" />;           â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Render Component:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   return (                                                  â”‚
â”‚     <Popover open={open} onOpenChange={setOpen}>           â”‚
â”‚       <PopoverTrigger asChild>                             â”‚
â”‚         <Button variant="ghost" size="icon" className="relative">â”‚
â”‚           <Bell className="h-5 w-5" />                     â”‚
â”‚           {unreadCount > 0 && (                            â”‚
â”‚             <span className="absolute -top-1 -right-1      â”‚
â”‚               bg-red-500 text-white text-xs rounded-full   â”‚
â”‚               w-5 h-5 flex items-center justify-center">   â”‚
â”‚               {unreadCount > 9 ? '9+' : unreadCount}       â”‚
â”‚             </span>                                         â”‚
â”‚           )}                                                â”‚
â”‚         </Button>                                          â”‚
â”‚       </PopoverTrigger>                                    â”‚
â”‚                                                             â”‚
â”‚       <PopoverContent                                      â”‚
â”‚         className="w-96 p-0"                               â”‚
â”‚         align="end"                                        â”‚
â”‚       >                                                     â”‚
â”‚         {/* Header */}                                     â”‚
â”‚         <div className="flex items-center justify-between  â”‚
â”‚           p-4 border-b">                                   â”‚
â”‚           <h3 className="font-semibold">Notifications</h3> â”‚
â”‚           <div className="flex gap-2">                     â”‚
â”‚             {unreadCount > 0 && (                          â”‚
â”‚               <Button                                      â”‚
â”‚                 variant="ghost"                            â”‚
â”‚                 size="sm"                                  â”‚
â”‚                 onClick={handleMarkAllRead}                â”‚
â”‚               >                                             â”‚
â”‚                 <Check className="w-4 h-4 mr-1" />         â”‚
â”‚                 Mark all read                              â”‚
â”‚               </Button>                                    â”‚
â”‚             )}                                              â”‚
â”‚             <Button                                        â”‚
â”‚               variant="ghost"                              â”‚
â”‚               size="sm"                                    â”‚
â”‚               onClick={handleClearAll}                     â”‚
â”‚             >                                               â”‚
â”‚               <X className="w-4 h-4 mr-1" />               â”‚
â”‚               Clear all                                    â”‚
â”‚             </Button>                                      â”‚
â”‚           </div>                                            â”‚
â”‚         </div>                                              â”‚
â”‚                                                             â”‚
â”‚         {/* Notifications List */}                         â”‚
â”‚         <div className="max-h-96 overflow-y-auto">         â”‚
â”‚           {notifications.length > 0 ? (                    â”‚
â”‚             notifications.map((notification) => (          â”‚
â”‚               <div                                         â”‚
â”‚                 key={notification.id}                      â”‚
â”‚                 className={`p-4 border-b cursor-pointer    â”‚
â”‚                   hover:bg-gray-50 transition ${           â”‚
â”‚                   !notification.is_read ? 'bg-blue-50' : ''â”‚
â”‚                 }`}                                         â”‚
â”‚                 onClick={() =>                             â”‚
â”‚                   handleNotificationClick(notification)    â”‚
â”‚                 }                                           â”‚
â”‚               >                                             â”‚
â”‚                 <div className="flex gap-3">               â”‚
â”‚                   <div className="flex-shrink-0 mt-1">     â”‚
â”‚                     {getNotificationIcon(notification.type)}â”‚
â”‚                   </div>                                    â”‚
â”‚                   <div className="flex-1 min-w-0">         â”‚
â”‚                     <div className="flex items-center      â”‚
â”‚                       justify-between">                    â”‚
â”‚                       <p className="font-medium text-sm    â”‚
â”‚                         text-gray-900 truncate">           â”‚
â”‚                         {notification.title}               â”‚
â”‚                       </p>                                  â”‚
â”‚                       {!notification.is_read && (          â”‚
â”‚                         <span className="w-2 h-2           â”‚
â”‚                           bg-blue-500 rounded-full         â”‚
â”‚                           flex-shrink-0 ml-2" />           â”‚
â”‚                       )}                                    â”‚
â”‚                     </div>                                  â”‚
â”‚                     <p className="text-sm text-gray-600    â”‚
â”‚                       mt-1 line-clamp-2">                  â”‚
â”‚                       {notification.body}                  â”‚
â”‚                     </p>                                    â”‚
â”‚                     <p className="text-xs text-gray-400 mt-1">â”‚
â”‚                       {format(                             â”‚
â”‚                         new Date(notification.created_date),â”‚
â”‚                         'MMM d, h:mm a'                    â”‚
â”‚                       )}                                    â”‚
â”‚                     </p>                                    â”‚
â”‚                   </div>                                    â”‚
â”‚                 </div>                                      â”‚
â”‚               </div>                                        â”‚
â”‚             ))                                              â”‚
â”‚           ) : (                                             â”‚
â”‚             <div className="p-8 text-center text-gray-500">â”‚
â”‚               <Bell className="w-12 h-12 mx-auto mb-3      â”‚
â”‚                 opacity-40" />                             â”‚
â”‚               <p>No notifications yet</p>                  â”‚
â”‚             </div>                                          â”‚
â”‚           )}                                                â”‚
â”‚         </div>                                              â”‚
â”‚       </PopoverContent>                                    â”‚
â”‚     </Popover>                                             â”‚
â”‚   );                                                        â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTIFICATION CREATION PATTERNS:

Pattern 1: New Meeting Request
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location: pages/Delegates.js (after creating meeting request)â”‚
â”‚                                                             â”‚
â”‚ Code:                                                       â”‚
â”‚ const recipient = await User.get(selectedUser.id);         â”‚
â”‚                                                             â”‚
â”‚ if (recipient.notification_preferences                     â”‚
â”‚     ?.new_meeting_request !== false) {                     â”‚
â”‚                                                             â”‚
â”‚   await Notification.create({                              â”‚
â”‚     user_id: selectedUser.id,                              â”‚
â”‚     type: 'new_meeting_request',                           â”‚
â”‚     title: 'New Meeting Request',                          â”‚
â”‚     body: `You have received a new meeting request from `+ â”‚
â”‚           `${currentUser.full_name}. Meeting Code: `+      â”‚
â”‚           `${meetingCode}`,                                â”‚
â”‚     link: createPageUrl("Meetings"),                       â”‚
â”‚     related_entity_id: newRequest.id,                      â”‚
â”‚     is_read: false                                         â”‚
â”‚   });                                                       â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pattern 2: Request Accepted
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location: pages/Meetings.js (after accepting request)      â”‚
â”‚                                                             â”‚
â”‚ Code:                                                       â”‚
â”‚ const requester = await User.get(request.requester_id);    â”‚
â”‚                                                             â”‚
â”‚ if (requester.notification_preferences                     â”‚
â”‚     ?.request_status_update !== false) {                   â”‚
â”‚                                                             â”‚
â”‚   await Notification.create({                              â”‚
â”‚     user_id: request.requester_id,                         â”‚
â”‚     type: 'request_accepted',                              â”‚
â”‚     title: 'Meeting Request Accepted',                     â”‚
â”‚     body: `${currentUser.full_name} has accepted your `+   â”‚
â”‚           `meeting request regarding "`+                   â”‚
â”‚           `${request.proposed_topic}".`,                   â”‚
â”‚     link: createPageUrl("Meetings"),                       â”‚
â”‚     related_entity_id: requestId,                          â”‚
â”‚     is_read: false                                         â”‚
â”‚   });                                                       â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pattern 3: Request Declined
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ // Similar to accepted, but with type: 'request_declined'  â”‚
â”‚ // and appropriate title/body                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pattern 4: New Message
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location: pages/Chat.js (after sending message)            â”‚
â”‚                                                             â”‚
â”‚ Code:                                                       â”‚
â”‚ const recipient = await User.get(recipientId);             â”‚
â”‚                                                             â”‚
â”‚ if (recipient.notification_preferences                     â”‚
â”‚     ?.new_message !== false) {                             â”‚
â”‚                                                             â”‚
â”‚   await Notification.create({                              â”‚
â”‚     user_id: recipientId,                                  â”‚
â”‚     type: 'new_message',                                   â”‚
â”‚     title: 'New Message',                                  â”‚
â”‚     body: `You have a new message from `+                  â”‚
â”‚           `${currentUser.full_name}.`,                     â”‚
â”‚     link: createPageUrl(`Chat?request=${selectedMeetingId}`),â”‚
â”‚     related_entity_id: newMsg.id,                          â”‚
â”‚     is_read: false                                         â”‚
â”‚   });                                                       â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pattern 5: Booking Confirmed
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location: components/meetings/BookingDialog.jsx            â”‚
â”‚                                                             â”‚
â”‚ Code (loop through participants):                          â”‚
â”‚ for (const participantId of participants) {                â”‚
â”‚   const participant = await User.get(participantId);       â”‚
â”‚                                                             â”‚
â”‚   if (participant.notification_preferences                 â”‚
â”‚       ?.booking_confirmed !== false) {                     â”‚
â”‚                                                             â”‚
â”‚     await Notification.create({                            â”‚
â”‚       user_id: participantId,                              â”‚
â”‚       type: 'booking_confirmed',                           â”‚
â”‚       title: 'Venue Confirmed',                            â”‚
â”‚       body: `${selectedRoom.name} has been booked for `+   â”‚
â”‚             `your meeting "${meeting.proposed_topic}" at `+â”‚
â”‚             `${format(startDateTime, 'MMM d, h:mm a')}`,   â”‚
â”‚       link: createPageUrl("Schedule"),                     â”‚
â”‚       related_entity_id: newBooking.id,                    â”‚
â”‚       is_read: false                                       â”‚
â”‚     });                                                     â”‚
â”‚   }                                                         â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pattern 6: Meeting Updated
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location: pages/Dashboard.js or pages/Meetings.js          â”‚
â”‚          (after modifying meeting details)                 â”‚
â”‚                                                             â”‚
â”‚ Code:                                                       â”‚
â”‚ for (const participantId of participantsToNotify) {        â”‚
â”‚   const otherUser = await User.get(participantId);         â”‚
â”‚                                                             â”‚
â”‚   if (otherUser.notification_preferences                   â”‚
â”‚       ?.request_status_update !== false) {                 â”‚
â”‚                                                             â”‚
â”‚     await Notification.create({                            â”‚
â”‚       user_id: participantId,                              â”‚
â”‚       type: 'meeting_updated',                             â”‚
â”‚       title: 'Meeting Details Updated',                    â”‚
â”‚       body: `${currentUser.full_name} has updated the `+   â”‚
â”‚             `details for your meeting "`+                  â”‚
â”‚             `${modifyForm.proposed_topic}". `+             â”‚
â”‚             `${venueCleared ? 'The venue has been '+       â”‚
â”‚             'cleared and needs to be re-booked.' : ''}`,   â”‚
â”‚       link: createPageUrl("Meetings"),                     â”‚
â”‚       related_entity_id: editingMeeting.id,                â”‚
â”‚       is_read: false                                       â”‚
â”‚     });                                                     â”‚
â”‚   }                                                         â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTIFICATION PREFERENCES:

User Preference Storage:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location: User entity, notification_preferences field      â”‚
â”‚                                                             â”‚
â”‚ Structure:                                                  â”‚
â”‚ {                                                           â”‚
â”‚   "notification_preferences": {                            â”‚
â”‚     "new_meeting_request": true,    // Default: enabled    â”‚
â”‚     "request_status_update": true,  // Default: enabled    â”‚
â”‚     "new_message": true,            // Default: enabled    â”‚
â”‚     "booking_confirmed": true       // Default: enabled    â”‚
â”‚   }                                                         â”‚
â”‚ }                                                           â”‚
â”‚                                                             â”‚
â”‚ Checking preferences:                                      â”‚
â”‚ if (user.notification_preferences?.new_meeting_request     â”‚
â”‚     !== false) {                                           â”‚
â”‚   // Send notification                                     â”‚
â”‚ }                                                           â”‚
â”‚                                                             â”‚
â”‚ Note: Uses !== false to handle:                            â”‚
â”‚   - undefined (not set) â†’ default true â†’ send notification â”‚
â”‚   - true â†’ send notification                               â”‚
â”‚   - false â†’ don't send notification                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Preference Management UI:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Location: pages/Profile.js                                 â”‚
â”‚          "Notification Preferences" section                â”‚
â”‚                                                             â”‚
â”‚ UI:                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ Notification Preferences                           â”‚    â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚ â”‚ [âœ“] New Meeting Request                            â”‚    â”‚
â”‚ â”‚     Notify me when a user sends me a meeting requestâ”‚    â”‚
â”‚ â”‚                                                     â”‚    â”‚
â”‚ â”‚ [âœ“] Request Status Update                          â”‚    â”‚
â”‚ â”‚     Notify me when a user accepts or declines      â”‚    â”‚
â”‚ â”‚     my request                                     â”‚    â”‚
â”‚ â”‚                                                     â”‚    â”‚
â”‚ â”‚ [âœ“] New Chat Message                               â”‚    â”‚
â”‚ â”‚     Notify me when I receive a new chat message    â”‚    â”‚
â”‚ â”‚                                                     â”‚    â”‚
â”‚ â”‚ [âœ“] Booking Confirmation                           â”‚    â”‚
â”‚ â”‚     Notify me when a venue is booked for my meetingâ”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚ Updates are saved when user clicks "Save Profile" button   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

NOTIFICATION DELIVERY FLOW:

Complete Flow Diagram:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User Action (e.g., send meeting request)               â”‚
â”‚         â†“                                                   â”‚
â”‚ 2. System checks recipient's notification preferences      â”‚
â”‚         â†“                                                   â”‚
â”‚ 3. If enabled: Create Notification record in database      â”‚
â”‚         â†“                                                   â”‚
â”‚ 4. Notification saved with:                                â”‚
â”‚    - user_id: recipient                                    â”‚
â”‚    - type: notification_type                               â”‚
â”‚    - title: short title                                    â”‚
â”‚    - body: detailed message                                â”‚
â”‚    - link: page URL to navigate                            â”‚
â”‚    - is_read: false                                        â”‚
â”‚    - related_entity_id: meeting/message/booking ID         â”‚
â”‚         â†“                                                   â”‚
â”‚ 5. NotificationBell component polls every 10 seconds       â”‚
â”‚         â†“                                                   â”‚
â”‚ 6. Fetches notifications for current user                  â”‚
â”‚         â†“                                                   â”‚
â”‚ 7. Counts unread (is_read = false)                         â”‚
â”‚         â†“                                                   â”‚
â”‚ 8. Updates badge count on bell icon                        â”‚
â”‚         â†“                                                   â”‚
â”‚ 9. User clicks bell â†’ Popover opens                        â”‚
â”‚         â†“                                                   â”‚
â”‚ 10. User clicks notification:                              â”‚
â”‚         â†“                                                   â”‚
â”‚ 11. Mark notification as read (is_read = true)             â”‚
â”‚         â†“                                                   â”‚
â”‚ 12. Navigate to notification.link                          â”‚
â”‚         â†“                                                   â”‚
â”‚ 13. User sees relevant page/content                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Error Handling:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notification creation errors are logged but NOT blocking:  â”‚
â”‚                                                             â”‚
â”‚ try {                                                       â”‚
â”‚   await Notification.create({...});                        â”‚
â”‚ } catch (error) {                                          â”‚
â”‚   console.error("Failed to create notification:", error);  â”‚
â”‚   // Continue execution - notification failure shouldn't   â”‚
â”‚   // block main action (e.g., meeting request creation)    â”‚
â”‚ }                                                           â”‚
â”‚                                                             â”‚
â”‚ This ensures:                                              â”‚
â”‚   - Meeting requests still work if notification fails      â”‚
â”‚   - Messages still send if notification fails              â”‚
â”‚   - Bookings still complete if notification fails          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Performance Considerations:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Polling Strategy:                                          â”‚
â”‚   - 10-second intervals (not 1 second)                     â”‚
â”‚   - Only fetch last 50 notifications                       â”‚
â”‚   - Use RLS to filter by user_id at database level         â”‚
â”‚   - Sorting done at database level                         â”‚
â”‚                                                             â”‚
â”‚ Optimizations:                                             â”‚
â”‚   - Don't fetch all notifications on every poll            â”‚
â”‚   - Only update UI if count changed                        â”‚
â”‚   - Use React.memo for notification items                  â”‚
â”‚   - Debounce mark-as-read operations                       â”‚
â”‚                                                             â”‚
â”‚ Future Improvements:                                       â”‚
â”‚   - WebSocket real-time push (instead of polling)          â”‚
â”‚   - Pagination for notification list                       â”‚
â”‚   - Background service worker for push notifications       â”‚
â”‚   - Email digests for important notifications              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
7.7 Dashboard Page (Complete)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DASHBOARD PAGE COMPLETE IMPLEMENTATION          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Overview:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File: pages/Dashboard.js                                    â”‚
â”‚ Route: /dashboard (default landing page after login)       â”‚
â”‚ Access: All authenticated users                            â”‚
â”‚                                                             â”‚
â”‚ Purpose:                                                    â”‚
â”‚   - Central hub for user activity                          â”‚
â”‚   - Show key statistics                                    â”‚
â”‚   - Display recent activity                                â”‚
â”‚   - Quick actions to main features                         â”‚
â”‚   - Show upcoming meetings/bookings                        â”‚
â”‚   - Alert users of incomplete profile/consent              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Dashboard Layout Structure:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Header Row                                            â”‚  â”‚
â”‚ â”‚ Welcome, John Doe                                     â”‚  â”‚
â”‚ â”‚ Manage your professional connections and meetings     â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ [1 request needs approval] [âœ“ Profile Complete]      â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Status Alerts (conditional)                           â”‚  â”‚
â”‚ â”‚ âš ï¸ Consent Required...                                â”‚  â”‚
â”‚ â”‚ âš ï¸ Profile Incomplete...                              â”‚  â”‚
â”‚ â”‚ â„¹ï¸ You are in Hidden Mode...                          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Quick Actions                                         â”‚  â”‚
â”‚ â”‚ [Browse Users] [View Meetings] [Messages] [Book Venue]â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚ â”‚ Stat 1 â”‚ Stat 2 â”‚ Stat 3 â”‚ Stat 4 â”‚  (4-column grid)   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ â”‚ Recent Activity    â”‚ Upcoming Schedule        â”‚         â”‚
â”‚ â”‚ (2/3 width)        â”‚ (1/3 width)              â”‚         â”‚
â”‚ â”‚                    â”‚                          â”‚         â”‚
â”‚ â”‚                    â”‚                          â”‚         â”‚
â”‚ â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚ â”‚                    â”‚ Popular Venues           â”‚         â”‚
â”‚ â”‚                    â”‚                          â”‚         â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Data Loading:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const loadDashboardData = async () => {                    â”‚
â”‚   try {                                                     â”‚
â”‚     const user = await User.me();                          â”‚
â”‚     setCurrentUser(user);                                  â”‚
â”‚                                                             â”‚
â”‚     // Load all data in parallel                           â”‚
â”‚     const [allUsers, allMeetingRequests,                   â”‚
â”‚            allMessages, allBookings] = await Promise.all([ â”‚
â”‚       User.list(),                                         â”‚
â”‚       MeetingRequest.list('-created_date'),                â”‚
â”‚       ChatMessage.list('-created_date'),                   â”‚
â”‚       VenueBooking.list('-created_date')                   â”‚
â”‚     ]);                                                     â”‚
â”‚                                                             â”‚
â”‚     // Create user lookup map                              â”‚
â”‚     const userLookup = {};                                 â”‚
â”‚     allUsers.forEach(u => {                                â”‚
â”‚       userLookup[u.id] = u;                                â”‚
â”‚     });                                                     â”‚
â”‚     setUsers(userLookup);                                  â”‚
â”‚                                                             â”‚
â”‚     // Filter data for current user                        â”‚
â”‚     const userMeetingRequests = allMeetingRequests.filter(â”‚
â”‚       req => req.requester_id === user.id ||               â”‚
â”‚              (req.recipient_ids || []).includes(user.id)   â”‚
â”‚     );                                                      â”‚
â”‚     setMeetingRequests(userMeetingRequests);               â”‚
â”‚                                                             â”‚
â”‚     const userMessages = allMessages.filter(msg =>         â”‚
â”‚       msg.sender_id === user.id ||                         â”‚
â”‚       msg.recipient_id === user.id                         â”‚
â”‚     );                                                      â”‚
â”‚                                                             â”‚
â”‚     // Calculate statistics                                â”‚
â”‚     calculateStatistics(user, userMeetingRequests,         â”‚
â”‚                        userMessages, allBookings);         â”‚
â”‚                                                             â”‚
â”‚     // Build activity feed                                 â”‚
â”‚     buildActivityFeed(user, userLookup,                    â”‚
â”‚       userMeetingRequests, userMessages, allBookings);     â”‚
â”‚                                                             â”‚
â”‚     // Get upcoming bookings                               â”‚
â”‚     getUpcomingBookings(user, userMeetingRequests,         â”‚
â”‚                        allBookings);                       â”‚
â”‚                                                             â”‚
â”‚     // Calculate venue statistics                          â”‚
â”‚     calculateVenueStats(allBookings);                      â”‚
â”‚                                                             â”‚
â”‚   } catch (error) {                                        â”‚
â”‚     console.error("Error loading dashboard data:", error); â”‚
â”‚   }                                                         â”‚
â”‚   setLoading(false);                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Calculate Statistics:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const calculateStatistics = (user, meetings,               â”‚
â”‚                              messages, allBookings) => {   â”‚
â”‚   // 1. Pending Requests (incoming only)                   â”‚
â”‚   const pendingRequests = meetings.filter(req =>           â”‚
â”‚     (req.recipient_ids || []).includes(user.id) &&         â”‚
â”‚     req.status === 'pending'                               â”‚
â”‚   ).length;                                                â”‚
â”‚                                                             â”‚
â”‚   // 2. Accepted Meetings                                  â”‚
â”‚   const acceptedMeetings = meetings.filter(req =>          â”‚
â”‚     req.status === 'accepted'                              â”‚
â”‚   ).length;                                                â”‚
â”‚                                                             â”‚
â”‚   // 3. Unread Messages                                    â”‚
â”‚   const unreadMessages = messages.filter(msg =>            â”‚
â”‚     msg.recipient_id === user.id &&                        â”‚
â”‚     !msg.read_status                                       â”‚
â”‚   ).length;                                                â”‚
â”‚                                                             â”‚
â”‚   // 4. Upcoming Bookings (future, active, user's meetings)â”‚
â”‚   const now = new Date();                                  â”‚
â”‚   const acceptedMeetingIds = new Set(                      â”‚
â”‚     meetings                                               â”‚
â”‚       .filter(req => req.status === 'accepted')            â”‚
â”‚       .map(req => req.id)                                  â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   const userUpcomingBookings = allBookings.filter(booking =>â”‚
â”‚     const bookingStart = new Date(booking.start_time);     â”‚
â”‚     return (                                               â”‚
â”‚       booking.status === 'active' &&                       â”‚
â”‚       bookingStart > now &&                                â”‚
â”‚       (booking.booked_by === user.id ||                    â”‚
â”‚        acceptedMeetingIds.has(booking.meeting_request_id)) â”‚
â”‚     );                                                      â”‚
â”‚   }).length;                                               â”‚
â”‚                                                             â”‚
â”‚   setStats({                                               â”‚
â”‚     pendingRequests,                                       â”‚
â”‚     acceptedMeetings,                                      â”‚
â”‚     unreadMessages,                                        â”‚
â”‚     activeBookings: userUpcomingBookings                   â”‚
â”‚   });                                                       â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Statistics Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <div className="grid grid-cols-1 md:grid-cols-2            â”‚
â”‚                 lg:grid-cols-4 gap-6">                     â”‚
â”‚                                                             â”‚
â”‚   {/* Stat Card 1: Pending Requests */}                    â”‚
â”‚   <Card className="stat-card orange">                      â”‚
â”‚     <CardHeader>                                           â”‚
â”‚       <div className="flex justify-between">               â”‚
â”‚         <span>Pending Requests</span>                      â”‚
â”‚         <Clock className="text-orange-500" />              â”‚
â”‚       </div>                                               â”‚
â”‚     </CardHeader>                                          â”‚
â”‚     <CardContent>                                          â”‚
â”‚       <div className="stat-number">                        â”‚
â”‚         {stats.pendingRequests}                            â”‚
â”‚       </div>                                               â”‚
â”‚       <p className="stat-label">Awaiting your response</p> â”‚
â”‚     </CardContent>                                         â”‚
â”‚   </Card>                                                   â”‚
â”‚                                                             â”‚
â”‚   {/* Stat Card 2: Accepted Meetings */}                   â”‚
â”‚   <Card className="stat-card green">                       â”‚
â”‚     <CardHeader>                                           â”‚
â”‚       <div className="flex justify-between">               â”‚
â”‚         <span>Accepted Meetings</span>                     â”‚
â”‚         <Calendar className="text-green-500" />            â”‚
â”‚       </div>                                               â”‚
â”‚     </CardHeader>                                          â”‚
â”‚     <CardContent>                                          â”‚
â”‚       <div className="stat-number">                        â”‚
â”‚         {stats.acceptedMeetings}                           â”‚
â”‚       </div>                                               â”‚
â”‚       <p className="stat-label">Confirmed connections</p>  â”‚
â”‚     </CardContent>                                         â”‚
â”‚   </Card>                                                   â”‚
â”‚                                                             â”‚
â”‚   {/* Stat Card 3: Unread Messages */}                     â”‚
â”‚   <Card className="stat-card blue">                        â”‚
â”‚     <CardHeader>                                           â”‚
â”‚       <div className="flex justify-between">               â”‚
â”‚         <span>Unread Messages</span>                       â”‚
â”‚         <MessageSquare className="text-blue-500" />        â”‚
â”‚       </div>                                               â”‚
â”‚     </CardHeader>                                          â”‚
â”‚     <CardContent>                                          â”‚
â”‚       <div className="stat-number">                        â”‚
â”‚         {stats.unreadMessages}                             â”‚
â”‚       </div>                                               â”‚
â”‚       <p className="stat-label">New communications</p>     â”‚
â”‚     </CardContent>                                         â”‚
â”‚   </Card>                                                   â”‚
â”‚                                                             â”‚
â”‚   {/* Stat Card 4: Upcoming Bookings */}                   â”‚
â”‚   <Card className="stat-card purple">                      â”‚
â”‚     <CardHeader>                                           â”‚
â”‚       <div className="flex justify-between">               â”‚
â”‚         <span>Upcoming Bookings</span>                     â”‚
â”‚         <MapPin className="text-purple-500" />             â”‚
â”‚       </div>                                               â”‚
â”‚     </CardHeader>                                          â”‚
â”‚     <CardContent>                                          â”‚
â”‚       <div className="stat-number">                        â”‚
â”‚         {stats.activeBookings}                             â”‚
â”‚       </div>                                               â”‚
â”‚       <p className="stat-label">Venue reservations</p>     â”‚
â”‚     </CardContent>                                         â”‚
â”‚   </Card>                                                   â”‚
â”‚ </div>                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Build Activity Feed:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const buildActivityFeed = (user, userLookup, meetings,     â”‚
â”‚                            messages, bookings) => {        â”‚
â”‚   const activities = [];                                   â”‚
â”‚   const now = new Date();                                  â”‚
â”‚                                                             â”‚
â”‚   // Add recent meeting requests (last 7 days)             â”‚
â”‚   const recentMeetings = meetings                          â”‚
â”‚     .filter(req => {                                       â”‚
â”‚       const daysSinceUpdate =                              â”‚
â”‚         (now - new Date(req.updated_date || req.created_date))â”‚
â”‚         / (1000 * 60 * 60 * 24);                          â”‚
â”‚       return daysSinceUpdate <= 7;                         â”‚
â”‚     })                                                      â”‚
â”‚     .sort((a, b) =>                                        â”‚
â”‚       new Date(b.updated_date || b.created_date) -         â”‚
â”‚       new Date(a.updated_date || a.created_date)           â”‚
â”‚     )                                                       â”‚
â”‚     .slice(0, 5);                                          â”‚
â”‚                                                             â”‚
â”‚   recentMeetings.forEach(meeting => {                      â”‚
â”‚     const isRequester = meeting.requester_id === user.id;  â”‚
â”‚     const otherParties = (meeting.recipient_ids || [])     â”‚
â”‚       .map(id => userLookup[id])                           â”‚
â”‚       .filter(Boolean);                                    â”‚
â”‚                                                             â”‚
â”‚     activities.push({                                      â”‚
â”‚       id: `meeting-${meeting.id}`,                         â”‚
â”‚       type: 'meeting_request',                             â”‚
â”‚       timestamp: meeting.updated_date || meeting.created_date,â”‚
â”‚       title: meeting.proposed_topic || 'Meeting Request',  â”‚
â”‚       description: isRequester                             â”‚
â”‚         ? `Request sent to ${otherParties.length > 1 ?     â”‚
â”‚            `${otherParties.length} users` :                â”‚
â”‚            otherParties[0]?.full_name}`                    â”‚
â”‚         : `Request from ${userLookup[meeting.requester_id] â”‚
â”‚            ?.full_name || 'user'}`,                        â”‚
â”‚       status: meeting.status,                              â”‚
â”‚       data: meeting                                        â”‚
â”‚     });                                                     â”‚
â”‚   });                                                       â”‚
â”‚                                                             â”‚
â”‚   // Add recent messages (last 5)                          â”‚
â”‚   const recentMessages = messages                          â”‚
â”‚     .sort((a, b) =>                                        â”‚
â”‚       new Date(b.created_date) - new Date(a.created_date)  â”‚
â”‚     )                                                       â”‚
â”‚     .slice(0, 5);                                          â”‚
â”‚                                                             â”‚
â”‚   recentMessages.forEach(message => {                      â”‚
â”‚     const isSender = message.sender_id === user.id;        â”‚
â”‚     const otherParty = userLookup[                         â”‚
â”‚       isSender ? message.recipient_id : message.sender_id  â”‚
â”‚     ];                                                      â”‚
â”‚                                                             â”‚
â”‚     activities.push({                                      â”‚
â”‚       id: `message-${message.id}`,                         â”‚
â”‚       type: 'message',                                     â”‚
â”‚       timestamp: message.created_date,                     â”‚
â”‚       title: isSender ? 'Message sent' : 'Message received',â”‚
â”‚       description: `${isSender ? 'To' : 'From'} `+         â”‚
â”‚                    `${otherParty?.full_name || 'user'}`,   â”‚
â”‚       status: message.read_status ? 'read' : 'unread',     â”‚
â”‚       data: message                                        â”‚
â”‚     });                                                     â”‚
â”‚   });                                                       â”‚
â”‚                                                             â”‚
â”‚   // Add recent bookings (top 3)                           â”‚
â”‚   const upcomingBookings = getUpcomingBookingsForFeed(     â”‚
â”‚     user, meetings, bookings                               â”‚
â”‚   ).slice(0, 3);                                           â”‚
â”‚                                                             â”‚
â”‚   upcomingBookings.forEach(booking => {                    â”‚
â”‚     const relatedMeeting = meetings.find(                  â”‚
â”‚       m => m.id === booking.meeting_request_id             â”‚
â”‚     );                                                      â”‚
â”‚     const bookedBy = userLookup[booking.booked_by];        â”‚
â”‚                                                             â”‚
â”‚     activities.push({                                      â”‚
â”‚       id: `booking-${booking.id}`,                         â”‚
â”‚       type: 'booking',                                     â”‚
â”‚       timestamp: booking.created_date,                     â”‚
â”‚       title: `${booking.room_name} booked`,                â”‚
â”‚       description: `By ${bookedBy?.full_name || 'user'} `+ â”‚
â”‚         `for ${format(new Date(booking.start_time), 'MMM d')}`,â”‚
â”‚       status: booking.status,                              â”‚
â”‚       data: booking,                                       â”‚
â”‚       relatedMeeting                                       â”‚
â”‚     });                                                     â”‚
â”‚   });                                                       â”‚
â”‚                                                             â”‚
â”‚   // Sort all activities by timestamp (newest first)       â”‚
â”‚   activities.sort((a, b) =>                                â”‚
â”‚     new Date(b.timestamp) - new Date(a.timestamp)          â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   // Take top 10                                           â”‚
â”‚   setRecentActivity(activities.slice(0, 10));              â”‚
â”‚ };                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Activity Feed Display:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const getActivityIcon = (activity) => {                    â”‚
â”‚   switch (activity.type) {                                 â”‚
â”‚     case 'meeting_request':                                â”‚
â”‚       return activity.status === 'accepted' ?              â”‚
â”‚         <CheckCircle2 className="text-green-500" /> :      â”‚
â”‚         activity.status === 'pending' ?                    â”‚
â”‚         <Clock className="text-orange-500" /> :            â”‚
â”‚         <Calendar />;                                      â”‚
â”‚     case 'booking':                                        â”‚
â”‚       return <MapPin className="text-purple-500" />;       â”‚
â”‚     case 'message':                                        â”‚
â”‚       return activity.status === 'unread' ?                â”‚
â”‚         <MessageSquare className="text-blue-500" /> :      â”‚
â”‚         <MessageSquare className="text-gray-400" />;       â”‚
â”‚     default:                                               â”‚
â”‚       return <Calendar />;                                 â”‚
â”‚   }                                                         â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ <div className="recent-activity-list">                     â”‚
â”‚   {recentActivity.length > 0 ? (                           â”‚
â”‚     recentActivity.map((activity) => (                     â”‚
â”‚       <div key={activity.id} className="activity-item">   â”‚
â”‚         <div className="activity-icon">                    â”‚
â”‚           {getActivityIcon(activity)}                      â”‚
â”‚         </div>                                             â”‚
â”‚         <div className="activity-content">                 â”‚
â”‚           <div className="activity-header">                â”‚
â”‚             <span className="activity-title">             â”‚
â”‚               {activity.title}                             â”‚
â”‚             </span>                                         â”‚
â”‚             {activity.status && (                          â”‚
â”‚               <Badge className={getStatusColor(            â”‚
â”‚                 activity.status                            â”‚
â”‚               )}>                                          â”‚
â”‚                 {activity.status}                          â”‚
â”‚               </Badge>                                     â”‚
â”‚             )}                                              â”‚
â”‚             <span className="activity-time">               â”‚
â”‚               {format(                                     â”‚
â”‚                 new Date(activity.timestamp),              â”‚
â”‚                 'MMM d, HH:mm'                             â”‚
â”‚               )}                                            â”‚
â”‚             </span>                                         â”‚
â”‚           </div>                                            â”‚
â”‚           <p className="activity-description">             â”‚
â”‚             {activity.description}                         â”‚
â”‚           </p>                                              â”‚
â”‚         </div>                                              â”‚
â”‚       </div>                                                â”‚
â”‚     ))                                                      â”‚
â”‚   ) : (                                                     â”‚
â”‚     <div className="empty-state">                          â”‚
â”‚       <Calendar className="icon-lg opacity-40" />          â”‚
â”‚       <p>No recent activity</p>                            â”‚
â”‚     </div>                                                  â”‚
â”‚   )}                                                        â”‚
â”‚ </div>                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Upcoming Schedule:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const getUpcomingBookings = (user, meetings, allBookings) =>â”‚
â”‚   const now = new Date();                                  â”‚
â”‚   const acceptedMeetingIds = new Set(                      â”‚
â”‚     meetings                                               â”‚
â”‚       .filter(req => req.status === 'accepted')            â”‚
â”‚       .map(req => req.id)                                  â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   const userUpcomingBookings = allBookings.filter(booking =>â”‚
â”‚     const bookingStart = new Date(booking.start_time);     â”‚
â”‚     return (                                               â”‚
â”‚       booking.status === 'active' &&                       â”‚
â”‚       bookingStart > now &&                                â”‚
â”‚       (booking.booked_by === user.id ||                    â”‚
â”‚        acceptedMeetingIds.has(booking.meeting_request_id)) â”‚
â”‚     );                                                      â”‚
â”‚   }).sort((a, b) =>                                        â”‚
â”‚     new Date(a.start_time) - new Date(b.start_time)        â”‚
â”‚   );                                                        â”‚
â”‚                                                             â”‚
â”‚   setUpcomingBookings(userUpcomingBookings);               â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ <Card className="upcoming-schedule-card">                  â”‚
â”‚   <CardHeader>                                             â”‚
â”‚     <CardTitle>My Upcoming Schedule</CardTitle>            â”‚
â”‚     <p className="text-sm">                                â”‚
â”‚       Your next meetings and bookings                      â”‚
â”‚       ({upcomingBookings.length})                          â”‚
â”‚     </p>                                                    â”‚
â”‚   </CardHeader>                                            â”‚
â”‚   <CardContent>                                            â”‚
â”‚     {upcomingBookings.length > 0 ? (                       â”‚
â”‚       <div className="schedule-list">                      â”‚
â”‚         {upcomingBookings.map((booking) => {               â”‚
â”‚           const relatedMeeting = meetingRequests.find(     â”‚
â”‚             m => m.id === booking.meeting_request_id       â”‚
â”‚           );                                               â”‚
â”‚           const durationMinutes =                          â”‚
â”‚             (new Date(booking.end_time) -                  â”‚
â”‚              new Date(booking.start_time)) / (1000 * 60);  â”‚
â”‚                                                             â”‚
â”‚           return (                                          â”‚
â”‚             <div key={booking.id} className="schedule-item">â”‚
â”‚               <div className="schedule-date">              â”‚
â”‚                 <span className="day">                     â”‚
â”‚                   {format(new Date(booking.start_time), 'd')}â”‚
â”‚                 </span>                                     â”‚
â”‚                 <span className="month">                   â”‚
â”‚                   {format(new Date(booking.start_time), 'MMM')}â”‚
â”‚                 </span>                                     â”‚
â”‚               </div>                                        â”‚
â”‚               <div className="schedule-details">           â”‚
â”‚                 <h4>{booking.room_name}</h4>               â”‚
â”‚                 <p className="time">                        â”‚
â”‚                   {format(new Date(booking.start_time), 'HH:mm')}â”‚
â”‚                   {' - '}                                   â”‚
â”‚                   {format(new Date(booking.end_time), 'HH:mm')}â”‚
â”‚                 </p>                                        â”‚
â”‚                 <p className="meta">                        â”‚
â”‚                   Floor {booking.floor_level} â€¢            â”‚
â”‚                   {durationMinutes}min                     â”‚
â”‚                 </p>                                        â”‚
â”‚               </div>                                        â”‚
â”‚             </div>                                          â”‚
â”‚           );                                                â”‚
â”‚         })}                                                 â”‚
â”‚       </div>                                                â”‚
â”‚     ) : (                                                   â”‚
â”‚       <div className="empty-state">                        â”‚
â”‚         <Calendar className="icon-lg opacity-40" />        â”‚
â”‚         <p>No upcoming bookings</p>                        â”‚
â”‚         <p className="text-sm">                            â”‚
â”‚           Book a venue for an accepted meeting             â”‚
â”‚         </p>                                                â”‚
â”‚       </div>                                                â”‚
â”‚     )}                                                      â”‚
â”‚   </CardContent>                                           â”‚
â”‚ </Card>                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Most Reserved Rooms:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const calculateVenueStats = (allBookings) => {             â”‚
â”‚   const roomCounts = allBookings                           â”‚
â”‚     .filter(b => b.status === 'active')                    â”‚
â”‚     .reduce((acc, booking) => {                            â”‚
â”‚       acc[booking.room_name] =                             â”‚
â”‚         (acc[booking.room_name] || 0) + 1;                 â”‚
â”‚       return acc;                                          â”‚
â”‚     }, {});                                                 â”‚
â”‚                                                             â”‚
â”‚   const sortedRooms = Object.entries(roomCounts)           â”‚
â”‚     .sort(([, a], [, b]) => b - a)                         â”‚
â”‚     .slice(0, 3);                                          â”‚
â”‚                                                             â”‚
â”‚   setMostReservedRooms(sortedRooms);                       â”‚
â”‚ };                                                          â”‚
â”‚                                                             â”‚
â”‚ <Card className="popular-venues-card">                     â”‚
â”‚   <CardHeader>                                             â”‚
â”‚     <CardTitle className="flex items-center gap-2">       â”‚
â”‚       <BarChart2 className="text-indigo-600" />            â”‚
â”‚       Popular Venues                                       â”‚
â”‚     </CardTitle>                                           â”‚
â”‚     <p className="text-sm">                                â”‚
â”‚       Most reserved rooms during the event                 â”‚
â”‚     </p>                                                    â”‚
â”‚   </CardHeader>                                            â”‚
â”‚   <CardContent>                                            â”‚
â”‚     {mostReservedRooms.length > 0 ? (                      â”‚
â”‚       <div className="venue-stats-list">                   â”‚
â”‚         {mostReservedRooms.map(([roomName, count], index) =>â”‚
â”‚           <div key={roomName} className="venue-stat-item">â”‚
â”‚             <div className="rank">{index + 1}</div>        â”‚
â”‚             <div className="venue-info">                   â”‚
â”‚               <p className="venue-name">{roomName}</p>     â”‚
â”‚               <div className="progress-bar">               â”‚
â”‚                 <div                                       â”‚
â”‚                   className="progress-fill"                â”‚
â”‚                   style={{                                 â”‚
â”‚                     width: `${(count /                     â”‚
â”‚                       (mostReservedRooms[0][1] || 1)) *    â”‚
â”‚                       100}%`                               â”‚
â”‚                   }}                                        â”‚
â”‚                 />                                          â”‚
â”‚               </div>                                        â”‚
â”‚             </div>                                          â”‚
â”‚             <div className="count">{count}</div>           â”‚
â”‚           </div>                                            â”‚
â”‚         )}                                                  â”‚
â”‚       </div>                                                â”‚
â”‚     ) : (                                                   â”‚
â”‚       <div className="empty-state">                        â”‚
â”‚         <MapPin className="icon-lg opacity-40" />          â”‚
â”‚         <p>No booking data yet</p>                         â”‚
â”‚       </div>                                                â”‚
â”‚     )}                                                      â”‚
â”‚   </CardContent>                                           â”‚
â”‚ </Card>                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Quick Actions:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <Card className="quick-actions-card">                      â”‚
â”‚   <CardHeader>                                             â”‚
â”‚     <CardTitle>Quick Actions</CardTitle>                   â”‚
â”‚     <p className="text-sm">                                â”‚
â”‚       Access key platform features quickly                 â”‚
â”‚     </p>                                                    â”‚
â”‚   </CardHeader>                                            â”‚
â”‚   <CardContent>                                            â”‚
â”‚     <div className="grid grid-cols-1 md:grid-cols-2       â”‚
â”‚                     lg:grid-cols-4 gap-4">                â”‚
â”‚                                                             â”‚
â”‚       <Link to={createPageUrl("Delegates")}>               â”‚
â”‚         <Button className="action-button">                 â”‚
â”‚           <Users className="icon" />                       â”‚
â”‚           <span>Browse Users</span>                        â”‚
â”‚         </Button>                                          â”‚
â”‚       </Link>                                              â”‚
â”‚                                                             â”‚
â”‚       <Link to={createPageUrl("Meetings")}>                â”‚
â”‚         <Button className="action-button relative">       â”‚
â”‚           <Calendar className="icon" />                    â”‚
â”‚           <span>View Meetings</span>                       â”‚
â”‚           {stats.pendingRequests > 0 && (                  â”‚
â”‚             <div className="notification-badge">           â”‚
â”‚               {stats.pendingRequests}                      â”‚
â”‚             </div>                                          â”‚
â”‚           )}                                                â”‚
â”‚         </Button>                                          â”‚
â”‚       </Link>                                              â”‚
â”‚                                                             â”‚
â”‚       <Link to={createPageUrl("Chat")}>                    â”‚
â”‚         <Button className="action-button relative">       â”‚
â”‚           <MessageSquare className="icon" />               â”‚
â”‚           <span>Messages</span>                            â”‚
â”‚           {stats.unreadMessages > 0 && (                   â”‚
â”‚             <div className="notification-badge">           â”‚
â”‚               {stats.unreadMessages}                       â”‚
â”‚             </div>                                          â”‚
â”‚           )}                                                â”‚
â”‚         </Button>                                          â”‚
â”‚       </Link>                                              â”‚
â”‚                                                             â”‚
â”‚       <Link to={createPageUrl("Venues")}>                  â”‚
â”‚         <Button className="action-button">                 â”‚
â”‚           <MapPin className="icon" />                      â”‚
â”‚           <span>Book Venue</span>                          â”‚
â”‚         </Button>                                          â”‚
â”‚       </Link>                                              â”‚
â”‚     </div>                                                  â”‚
â”‚   </CardContent>                                           â”‚
â”‚ </Card>                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status Alerts:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {/* Hidden Profile Alert */}                               â”‚
â”‚ {currentUser?.is_profile_hidden && (                       â”‚
â”‚   <Alert className="border-blue-200 bg-blue-50">          â”‚
â”‚     <EyeOff className="h-4 w-4 text-blue-600" />          â”‚
â”‚     <AlertDescription className="text-blue-800">          â”‚
â”‚       <strong>You are in Hidden Mode.</strong>             â”‚
â”‚       Your profile is not visible in the user directory.   â”‚
â”‚       You can change this in your profile settings.        â”‚
â”‚       <Link to={createPageUrl("Profile")}                  â”‚
â”‚         className="ml-2 underline font-semibold">          â”‚
â”‚         Update Privacy                                     â”‚
â”‚       </Link>                                              â”‚
â”‚     </AlertDescription>                                    â”‚
â”‚   </Alert>                                                  â”‚
â”‚ )}                                                          â”‚
â”‚                                                             â”‚
â”‚ {/* Consent Required Alert */}                             â”‚
â”‚ {!currentUser?.consent_given && (                          â”‚
â”‚   <Alert className="border-red-200 bg-red-50">            â”‚
â”‚     <AlertCircle className="h-4 w-4 text-red-600" />      â”‚
â”‚     <AlertDescription className="text-red-800">           â”‚
â”‚       <strong>Consent Required:</strong>                   â”‚
â”‚       Please complete the data protection consent          â”‚
â”‚       process to access platform features.                 â”‚
â”‚       <Link to={createPageUrl("Profile")}                  â”‚
â”‚         className="ml-2 underline">                        â”‚
â”‚         Complete Now â†’                                     â”‚
â”‚       </Link>                                              â”‚
â”‚     </AlertDescription>                                    â”‚
â”‚   </Alert>                                                  â”‚
â”‚ )}                                                          â”‚
â”‚                                                             â”‚
â”‚ {/* Profile Incomplete Alert */}                           â”‚
â”‚ {!currentUser?.profile_completed &&                        â”‚
â”‚  currentUser?.consent_given && (                           â”‚
â”‚   <Alert className="border-orange-200 bg-orange-50">      â”‚
â”‚     <AlertCircle className="h-4 w-4 text-orange-600" />   â”‚
â”‚     <AlertDescription className="text-orange-800">        â”‚
â”‚       <strong>Profile Incomplete:</strong>                 â”‚
â”‚       Complete your profile to access matchmaking features.â”‚
â”‚       <Link to={createPageUrl("Profile")}                  â”‚
â”‚         className="ml-2 underline">                        â”‚
â”‚         Complete Profile â†’                                 â”‚
â”‚       </Link>                                              â”‚
â”‚     </AlertDescription>                                    â”‚
â”‚   </Alert>                                                  â”‚
â”‚ )}                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜